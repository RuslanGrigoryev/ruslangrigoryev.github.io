(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0===t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=O(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&O(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),function(e,t){function H(e){var t=e.length,n=w.type(e);return w.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function j(e){var t=B[e]={};return w.each(e.match(S)||[],function(e,n){t[n]=!0}),t}function q(e,n,r,i){if(!w.acceptData(e))return;var s,o,u=w.expando,a=e.nodeType,f=a?w.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===t&&typeof n=="string")return;l||(a?l=e[u]=c.pop()||w.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:w.noop});if(typeof n=="object"||typeof n=="function")i?f[l]=w.extend(f[l],n):f[l].data=w.extend(f[l].data,n);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[w.camelCase(n)]=r),typeof n=="string"?(s=o[n],s==null&&(s=o[w.camelCase(n)])):s=o,s}function R(e,t,n){if(!w.acceptData(e))return;var r,i,s=e.nodeType,o=s?w.cache:e,u=s?e[w.expando]:w.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){w.isArray(t)?t=t.concat(w.map(t,w.camelCase)):t in r?t=[t]:(t=w.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!z(r):!w.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!z(o[u]))return}s?w.cleanData([e],!0):w.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null}function U(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(I,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:F.test(r)?w.parseJSON(r):r}catch(s){}w.data(e,n,r)}else r=t}return r}function z(e){var t;for(t in e){if(t==="data"&&w.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ot(){try{return o.activeElement}catch(e){}}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){if(w.isFunction(t))return w.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return w.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(ut.test(t))return w.filter(t,e,n);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return w.nodeName(e,"table")&&w.nodeName(t.nodeType===1?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _t(e){return e.type=(w.find.attr(e,"type")!==null)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)w._data(n,"globalEval",!t||w._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!w.hasData(e))return;var n,r,i,s=w._data(e),o=w._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)w.event.add(t,n,u[n][r])}o.data&&(o.data=w.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!w.support.noCloneEvent&&t[w.expando]){i=w._data(t);for(r in i.events)w.removeEvent(t,r,i.handle);t.removeAttribute(w.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||w.nodeName(s,n)?u.push(s):w.merge(u,jt(s,n));return n===t||n&&w.nodeName(e,n)?w.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--){t=en[i]+n;if(t in e)return t}return r}function nn(e,t){return e=t||e,w.css(e,"display")==="none"||!w.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=w._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&nn(r)&&(s[o]=w._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&n!=="none"||!i)&&w._data(r,"olddisplay",i?n:w.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=w.css(e,n+Zt[s],!0,i)),r?(n==="content"&&(o-=w.css(e,"padding"+Zt[s],!0,i)),n!=="margin"&&(o-=w.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=w.css(e,"padding"+Zt[s],!0,i),n!=="padding"&&(o+=w.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=qt(e),o=w.support.boxSizing&&w.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Rt(e,t,s);if(i<0||i==null)i=e.style[t];if(Jt.test(i))return i;r=o&&(w.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=o,n=Qt[e];if(!n){n=fn(e,t);if(n==="none"||!n)It=(It||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach();Qt[e]=n}return n}function fn(e,t){var n=w(t.createElement(e)).appendTo(t.body),r=w.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(w.isArray(t))w.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&w.type(t)==="object")for(i in t)vn(e+"["+i+"]",t[i],n,r);else r(e,t)}function _n(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(S)||[];if(w.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,t,n,r){function o(u){var a;return i[u]=!0,w.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===An;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Pn(e,n){var r,i,s=w.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&w.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes;while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Bn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=w.now()}function Zn(e,t,n){var r,i=(Gn[t]||[]).concat(Gn["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function er(e,t,n){var r,i,s=0,o=Qn.length,u=w.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;tr(l,f.opts.specialEasing);for(;s<o;s++){r=Qn[s].call(f,e,l,f.opts);if(r)return r}return w.map(l,Zn,f),w.isFunction(f.opts.start)&&f.opts.start.call(e,f),w.fx.timer(w.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(n in e){r=w.camelCase(n),i=t[r],s=e[n],w.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=w.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function nr(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&nn(e),p=w._data(e,"fxshow");n.queue||(u=w._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,w.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],w.css(e,"display")==="inline"&&w.css(e,"float")==="none"&&(!w.support.inlineBlockNeedsLayout||an(e.nodeName)==="inline"?c.display="inline-block":c.zoom=1)),n.overflow&&(c.overflow="hidden",w.support.shrinkWrapBlocks||f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t){i=t[r];if($n.exec(i)){delete t[r],s=s||i==="toggle";if(i===(h?"hide":"show"))continue;l[r]=p&&p[r]||w.style(e,r)}}if(!w.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=w._data(e,"fxshow",{}),s&&(p.hidden=!h),h?w(e).show():f.done(function(){w(e).hide()}),f.done(function(){var t;w._removeData(e,"fxshow");for(t in l)w.style(e,t,l[t])});for(r in l)o=Zn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return w.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.location,o=e.document,u=o.documentElement,a=e.jQuery,f=e.$,l={},c=[],h="1.10.2",p=c.concat,d=c.push,v=c.slice,m=c.indexOf,g=l.toString,y=l.hasOwnProperty,b=h.trim,w=function(e,t){return new w.fn.init(e,t,r)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,S=/\S+/g,x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^[\],:{}\s]*$/,k=/(?:^|:|,)(?:\s*\[)+/g,L=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,O=/^-ms-/,M=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()},D=function(e){if(o.addEventListener||e.type==="load"||o.readyState==="complete")P(),w.ready()},P=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",D,!1),e.removeEventListener("load",D,!1)):(o.detachEvent("onreadystatechange",D),e.detachEvent("onload",D))};w.fn=w.prototype={jquery:h,constructor:w,init:function(e,n,r){var i,s;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=T.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof w?n[0]:n,w.merge(this,w.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0));if(N.test(i[1])&&w.isPlainObject(n))for(i in n)w.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}s=o.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=o,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return v.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!w.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(w.isPlainObject(r)||(n=w.isArray(r)))?(n?(n=!1,o=e&&w.isArray(e)?e:[]):o=e&&w.isPlainObject(e)?e:{},u[i]=w.extend(l,o,r)):r!==t&&(u[i]=r)}return u},w.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===w&&(e.$=f),t&&e.jQuery===w&&(e.jQuery=a),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(e===!0?--w.readyWait:w.isReady)return;if(!o.body)return setTimeout(w.ready);w.isReady=!0;if(e!==!0&&--w.readyWait>0)return;n.resolveWith(o,[w]),w.fn.trigger&&w(o).trigger("ready").off("ready")},isFunction:function(e){return w.type(e)==="function"},isArray:Array.isArray||function(e){return w.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?l[g.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||w.type(e)!=="object"||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(w.support.ownLast)for(n in e)return y.call(e,n);for(n in e);return n===t||y.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||o;var r=N.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=w.buildFragment([e],t,i),i&&w(i).remove(),w.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=w.trim(t);if(t&&C.test(t.replace(L,"@").replace(A,"]").replace(k,"")))return(new Function("return "+t))()}w.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&w.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&w.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(O,"ms-").replace(M,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=H(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:b&&!b.call("﻿ ")?function(e){return e==null?"":b.call(e)}:function(e){return e==null?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(H(Object(e))?w.merge(n,typeof e=="string"?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=H(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return p.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),w.isFunction(e)?(r=v.call(arguments,2),i=function(){return e.apply(n||this,r.concat(v.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(w.type(r)==="object"){s=!0;for(a in r)w.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,w.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),w.ready.promise=function(t){if(!n){n=w.Deferred();if(o.readyState==="complete")setTimeout(w.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",D,!1),e.addEventListener("load",D,!1);else{o.attachEvent("onreadystatechange",D),e.attachEvent("onload",D);var r=!1;try{r=e.frameElement==null&&o.documentElement}catch(i){}r&&r.doScroll&&function s(){if(!w.isReady){try{r.doScroll("left")}catch(e){return setTimeout(s,50)}P(),w.ready()}}()}}return n.promise(t)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=w(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,w;(t?t.ownerDocument||t:E)!==h&&c(t),t=t||h,n=n||[];if(!e||typeof e!="string")return n;if((a=t.nodeType)!==1&&a!==9)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(a===9){o=t.getElementById(u);if(!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){m=p=b,g=t,w=a===9&&e;if(a===1&&t.nodeName.toLowerCase()!=="object"){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,w=l.join(",")}if(w)try{return H.apply(n,g.querySelectorAll(w)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){if(!n||(r=X.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(i=[]);n=!1;if(r=V.exec(u))n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length);for(o in s.filter)(r=G[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&r==="parentNode",o=x++;return t.first?function(t,n,i){while(t=t[r])if(t.nodeType===1||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=S+" "+o;if(u){while(t=t[r])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[r])if(t.nodeType===1||s){l=t[b]||(t[b]={});if((f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else{f=l[r]=[c],f[1]=e(t,n,u)||i;if(f[1]===!0)return!0}}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?wt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<i;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{n=s.filter[e[a].type].apply(null,e[a].matches);if(n[b]){r=++a;for(;r<i;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(W,"$1"),n,a<r&&St(e.slice(a,r)),r<i&&St(e=e.slice(r)),r<i&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=S+=x==null?1:Math.random()||.1;E&&(f=a!==h&&a,i=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}E&&(S=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=D.call(c));g=wt(g)}H.apply(c,g),E&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return E&&(S=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&r.getById&&t.nodeType===9&&d&&s.relative[u[1].type]){t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0];if(!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){f=u[o];if(s.relative[l=f.type])break;if(c=s.find[l])if(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t)){u.splice(o,1),e=i.length&&gt(u);if(!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=new RegExp("^"+I+"*,"+I+"*"),V=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=new RegExp(I+"*[+~]"),J=new RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=new RegExp(z),Q=new RegExp("^"+R+"$"),G={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{H.apply(_=B.call(E.childNodes),E.childNodes),_[E.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},r=ot.support={},c=ot.setDocument=function(e){var t=e?e.ownerDocument||e:E,n=t.defaultView;if(t===h||t.nodeType!==9||!t.documentElement)return h;h=t,p=t.documentElement,d=!u(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),r.getById=ft(function(e){return p.appendChild(e).id=b,!t.getElementsByName||!t.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==A)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==A&&d)return t.getElementsByClassName(e)},m=[],v=[];if(r.qsa=Y.test(t.querySelectorAll))ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")});return(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,n){if(e===n)return k=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);if(i)return i&1||!r.sortDetached&&n.compareDocumentPosition(e)===i?e===t||y(E,e)?-1:n===t||y(E,n)?1:l?j.call(l,e)-j.call(l,n):0:i&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,s=e.parentNode,o=n.parentNode,u=[e],a=[n];if(e===n)return k=!0,0;if(!s||!o)return e===t?-1:n===t?1:s?-1:o?1:l?j.call(l,e)-j.call(l,n):0;if(s===o)return ct(e,n);r=e;while(r=r.parentNode)u.unshift(r);r=n;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===E?-1:a[i]===E?1:0},t},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){(e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']");if(r.matchesSelector&&d&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L);if(k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=o(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(i===3||i===4)return e.nodeValue;return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[b]||(c[b]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[n<0?n+t:n]}),even:dt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return e.compareDocumentPosition(h.createElement("div"))&1}),ft(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||lt("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!r.attributes||!ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&lt("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ft(function(e){return e.getAttribute("disabled")==null})||lt(F,function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),w.find=ot,w.expr=ot.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ot.uniqueSort,w.text=ot.getText,w.isXMLDoc=ot.isXML,w.contains=ot.contains}(e);var B={};w.Callbacks=function(e){e=typeof e=="string"?B[e]||j(e):w.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){w.each(t,function(t,n){var r=w.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&w.each(arguments,function(e,t){var r;while((r=w.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?w.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return a&&(!i||f)&&(t=t||[],t=[e,t.slice?t.slice():t],n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(n){w.each(t,function(t,s){var o=s[0],u=w.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?w.extend(e,r):r}},i={};return r.pipe=r.then,w.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=v.call(arguments),r=n.length,i=r!==1||e&&w.isFunction(e.promise)?r:0,s=i===1?e:w.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?v.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&w.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),w.support=function(t){var n,r,s,u,a,f,l,c,h,p=o.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],r=p.getElementsByTagName("a")[0];if(!r||!r.style||!n.length)return t;u=o.createElement("select"),f=u.appendChild(o.createElement("option")),s=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute=p.className!=="t",t.leadingWhitespace=p.firstChild.nodeType===3,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized=r.getAttribute("href")==="/a",t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!s.value,t.optSelected=f.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone=o.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}s=o.createElement("input"),s.setAttribute("value",""),t.input=s.getAttribute("value")==="",s.value="t",s.setAttribute("type","radio"),t.radioValue=s.value==="t",s.setAttribute("checked","t"),s.setAttribute("name","t"),a=o.createDocumentFragment(),a.appendChild(s),t.appendChecked=s.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box";for(h in w(t))break;return t.ownLast=h!=="0",w(function(){var n,r,s,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=o.getElementsByTagName("body")[0];if(!a)return;n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=p.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(a,a.style.zoom!=null?{zoom:1}:{},function(){t.boxSizing=p.offsetWidth===4}),e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(o.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=s=r=null}),n=u=a=f=r=s=null,t}({});var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?w.cache[e[w.expando]]:e[w.expando],!!e&&!z(e)},data:function(e,t,n){return q(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return q(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,n){var r,i,s=null,o=0,u=this[0];if(e===t){if(this.length){s=w.data(u);if(u.nodeType===1&&!w._data(u,"parsedAttrs")){r=u.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")===0&&(i=w.camelCase(i.slice(5)),U(u,i,s[i]));w._data(u,"parsedAttrs",!0)}}return s}return typeof e=="object"?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,n)}):u?U(u,e,w.data(u,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=w._data(e,t),n&&(!r||w.isArray(n)?r=w._data(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t),o=function(){w.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return w._data(e,n)||w._data(e,n,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,n)})})}}),w.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?w.queue(this[0],e):n===t?this:this.each(function(){var t=w.queue(this,e,n);w._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx?w.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=w.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=w._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var W,X,V=/[\t\r\n\f]/g,$=/\r/g,J=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,Q=/^(?:checked|selected)$/i,G=w.support.getSetAttribute,Y=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(S)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(V," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=w.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(S)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(V," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?w.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):w.isFunction(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,s=w(this),o=e.match(S)||[];while(t=o[r++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else if(n===i||n==="boolean")this.className&&w._data(this,"__className__",this.className),this.className=this.className||e===!1?"":w._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(V," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace($,""):n==null?"":n);return}return i=w.isFunction(e),this.each(function(n){var s;if(this.nodeType!==1)return;i?s=e.call(this,n,w(this).val()):s=e,s==null?s="":typeof s=="number"?s+="":w.isArray(s)&&(s=w.map(s,function(e){return e==null?"":e+""})),r=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return t!=null?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(w.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!w.nodeName(n.parentNode,"optgroup"))){t=w(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=w.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=w.inArray(w(r).val(),s)>=0)n=!0}return n||(e.selectedIndex=-1),s}}},attr:function(e,n,r){var s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;if(typeof e.getAttribute===i)return w.prop(e,n,r);if(u!==1||!w.isXMLDoc(e))n=n.toLowerCase(),s=w.attrHooks[n]||(w.expr.match.bool.test(n)?X:W);if(r===t)return s&&"get"in s&&(o=s.get(e,n))!==null?o:(o=w.find.attr(e,n),o==null?t:o);if(r!==null)return s&&"set"in s&&(o=s.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r);w.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(S);if(s&&e.nodeType===1)while(n=s[i++])r=w.propFix[n]||n,w.expr.match.bool.test(n)?Y&&G||!Q.test(n)?e[r]=!1:e[w.camelCase("default-"+n)]=e[r]=!1:w.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&t==="radio"&&w.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!w.isXMLDoc(e),o&&(n=w.propFix[n]||n,s=w.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):J.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?w.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&w.propFix[n]||n,n):e[w.camelCase("default-"+n)]=e[n]=!0,n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,n){var r=w.expr.attrHandle[n]||w.find.attr;w.expr.attrHandle[n]=Y&&G||!Q.test(n)?function(e,n,i){var s=w.expr.attrHandle[n],o=i?t:(w.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return w.expr.attrHandle[n]=s,o}:function(e,n,r){return r?t:e[w.camelCase("default-"+n)]?n.toLowerCase():null}});if(!Y||!G)w.attrHooks.value={set:function(e,t,n){if(!w.nodeName(e,"input"))return W&&W.set(e,t,n);e.defaultValue=t}};G||(W={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.value!==""?i.value:null},w.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:W.set},w.attrHooks.contenteditable={set:function(e,t,n){W.set(e,t===""?!1:t,n)}},w.each(["width","height"],function(e,t){w.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(w.isArray(t))return e.checked=w.inArray(w(e).val(),t)>=0}},w.support.checkOn||(w.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;w.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=w._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=w.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof w===i||!!e&&w.event.triggered===e.type?t:w.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(S)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort();if(!v)continue;c=w.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=w.event.special[v]||{},p=w.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),w.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=w.hasData(e)&&w._data(e);if(!m||!(l=m.events))return;t=(t||"").match(S)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)w.event.remove(e,p+t[f],n,r,!0);continue}c=w.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&w.removeEvent(e,p,m.handle),delete l[p])}w.isEmptyObject(l)&&(delete m.handle,w._removeData(e,"events"))},trigger:function(n,r,i,s){var u,a,f,l,c,h,p,d=[i||o],v=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||o;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+w.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[w.expando]?n:new w.Event(v,typeof n=="object"&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:w.makeArray(r,[n]),c=w.event.special[v]||{};if(!s&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!s&&!c.noBubble&&!w.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||o)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(w._data(f,"events")||{})[n.type]&&w._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&w.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&w.acceptData(i)&&a&&i[v]&&!w.isWindow(i)){h=i[a],h&&(i[a]=null),w.event.triggered=v;try{i[v]()}catch(g){}w.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=w.event.fix(e);var n,r,i,s,o,u=[],a=v.call(arguments),f=(w._data(this,"events")||{})[e.type]||[],l=w.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=w.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((w.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?w(r,this).index(f)>=0:w.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[w.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new w.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||o),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||o,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ot()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===ot()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(w.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?w.event.trigger(i,null,t):w.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},w.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0},w.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!w.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){if(w.nodeName(this,"form"))return!1;w.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=w.nodeName(n,"input")||w.nodeName(n,"button")?n.form:t;r&&!w._data(r,"submitBubbles")&&(w.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),w._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(w.nodeName(this,"form"))return!1;w.event.remove(this,"._submit")}}),w.support.changeBubbles||(w.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")w.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)});return!1}w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){n++===0&&o.addEventListener(e,r,!0)},teardown:function(){--n===0&&o.removeEventListener(e,r,!0)}}}),w.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return w().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=w.guid++)),this.each(function(){w.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){w.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}});var ut=/^.[^:#\[\.,]*$/,at=/^(?:parents|prev(?:Until|All))/,ft=w.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(w(e).filter(function(){for(t=0;t<i;t++)if(w.contains(r[t],this))return!0}));for(t=0;t<i;t++)w.find(e,r[t],n);return n=this.pushStack(i>1?w.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=w(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(w.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e||[],!0))},filter:function(e){return this.pushStack(ht(this,e||[],!1))},is:function(e){return!!ht(this,typeof e=="string"&&ft.test(e)?w(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?w(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&w.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?w.unique(s):s)},index:function(e){return e?typeof e=="string"?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),r=w.merge(this.get(),n);return this.pushStack(w.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,n){return w.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,n){return w.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return w.dir(e,"previousSibling",n)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=w.filter(r,i)),this.length>1&&(lt[e]||(i=w.unique(i)),at.test(e)&&(i=i.reverse())),this.pushStack(i)}}),w.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return e.nodeType===1}))},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!w(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(o),Ot=At.appendChild(o.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===t?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Mt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Mt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?w.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&w.cleanData(jt(n)),n.parentNode&&(t&&w.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&w.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(w.support.htmlSerialize||!mt.test(e))&&(w.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(w.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),w(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=p.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,d=e[0],v=w.isFunction(d);if(v||!(l<=1||typeof d!="string"||w.support.checkClone||!Tt.test(d)))return this.each(function(r){var i=c.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(l){a=w.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=a.firstChild,a.childNodes.length===1&&(a=r);if(r){o=w.map(jt(a,"script"),_t),s=o.length;for(;f<l;f++)i=a,f!==h&&(i=w.clone(i,!0,!0),s&&w.merge(o,jt(i,"script"))),t.call(this[f],i,f);if(s){u=o[o.length-1].ownerDocument,w.map(o,Dt);for(f=0;f<s;f++)i=o[f],Nt.test(i.type||"")&&!w._data(i,"globalEval")&&w.contains(u,i)&&(i.src?w._evalUrl(i.src):w.globalEval((i.text||i.textContent||i.innerHTML||"").replace(kt,"")))}a=r=null}}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){var n,r=0,i=[],s=w(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),w(s[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),w.extend({clone:function(e,t,n){var r,i,s,o,u,a=w.contains(e.ownerDocument,e);w.support.html5Clone||w.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!w.support.noCloneEvent||!w.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!w.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(w.type(s)==="object")w.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!w.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!w.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)w.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}w.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),w.support.appendChecked||w.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&w.inArray(s,r)!==-1)continue;o=w.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=w.expando,f=w.cache,l=w.support.deleteExpando,h=w.event.special;for(;(n=e[u])!=null;u++)if(t||w.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?w.event.remove(n,r):w.removeEvent(n,r,o.handle);f[s]&&(delete f[s],l?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,c.push(s))}}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=new RegExp("^("+E+")(.*)$","i"),Jt=new RegExp("^("+E+")(?!px)[a-z%]+$","i"),Kt=new RegExp("^([+-])=("+E+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];w.fn.extend({css:function(e,n){return w.access(this,function(e,n,r){var i,s,o={},u=0;if(w.isArray(n)){s=qt(e),i=n.length;for(;u<i;u++)o[n[u]]=w.css(e,n[u],!1,s);return o}return r!==t?w.style(e,n,r):w.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){nn(this)?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=w.camelCase(n),f=e.style;n=w.cssProps[a]||(w.cssProps[a]=tn(f,a)),u=w.cssHooks[n]||w.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(w.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!w.cssNumber[a]&&(r+="px"),!w.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=w.camelCase(n);return n=w.cssProps[a]||(w.cssProps[a]=tn(e.style,a)),u=w.cssHooks[n]||w.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),o==="normal"&&n in Yt&&(o=Yt[n]),r===""||r?(s=parseFloat(o),r===!0||w.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!w.contains(e.ownerDocument,e)&&(a=w.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):o.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Xt.test(w.css(e,"display"))?w.swap(e,Gt,function(){return un(e,t,r)}):un(e,t,r)},set:function(e,n,r){var i=r&&qt(e);return sn(e,n,r?on(e,t,r,w.support.boxSizing&&w.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=w.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&w.trim(s.replace(Ut,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,t){if(t)return w.swap(e,{display:"inline-block"},Rt,[e,"marginRight"])}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,t){w.cssHooks[t]={get:function(e,n){if(n)return n=Rt(e,t),Jt.test(n)?w(e).position()[t]+"px":n}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!w.support.reliableHiddenOffsets&&(e.style&&e.style.display||w.css(e,"display"))==="none"},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(w.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=w(this).val();return n==null?null:w.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),w.param=function(e,n){var r,i=[],s=function(e,t){t=w.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=w.ajaxSettings&&w.ajaxSettings.traditional);if(w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,gn,yn=w.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=w.fn.load,Ln={},An={},On="*/".concat("*");try{gn=s.href}catch(Mn){gn=o.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],w.fn.load=function(e,n,r){if(typeof e!="string"&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),w.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&w.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,w.ajaxSettings),t):Pn(w.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;if(b===2)return;b=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,l=e>=200&&e<300||e===304,r&&(E=Hn(c,x,r)),E=Bn(c,E,x,l);if(l)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(w.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(w.etag[s]=S)),e===204||c.type==="HEAD"?T="nocontent":e===304?T="notmodified":(T=E.state,g=E.data,y=E.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--w.active||w.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=w.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?w(h):w.event,d=w.Deferred(),v=w.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(b===2){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return b===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=w.trim(c.dataType||"*").toLowerCase().match(S)||[""],c.crossDomain==null&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(r[1]==="http:"?"80":"443"))===(mn[3]||(mn[1]==="http:"?"80":"443")))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=w.param(c.data,c.traditional)),Dn(Ln,c,n,x);if(b===2)return x;a=c.global,a&&w.active++===0&&w.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(w.lastModified[s]&&x.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&x.setRequestHeader("If-None-Match",w.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&b!==2){E="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);f=Dn(An,c,n,x);if(!f)N(-1,"No Transport");else{x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,f.send(g,N)}catch(T){if(!(b<2))throw T;N(-1,T)}}return x}return x.abort()},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,n){return w.get(e,t,n,"script")}}),w.each(["get","post"],function(e,n){w[n]=function(e,r,i,s){return w.isFunction(r)&&(s=s||i,i=r,r=t),w.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||w("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||w.expando+"_"+yn++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=w.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||w.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&w.isFunction(o)&&o(u[0]),u=o=t}),"script"});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};w.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=w.ajaxSettings.xhr(),w.support.cors=!!qn&&"withCredentials"in qn,qn=w.support.ajax=!!qn,qn&&w.ajaxTransport(function(n){if(!n.crossDomain||w.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=w.noop,Un&&delete In[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Rn,Un&&(In||(In={},w(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=new RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Jn.exec(t),s=i&&i[3]||(w.cssNumber[e]?"":"px"),o=(w.cssNumber[e]||s!=="px"&&+r)&&Jn.exec(w.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,w.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};w.Animation=w.extend(er,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),w.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=w.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(e.elem.style[w.cssProps[e.prop]]!=null||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),o=function(){var t=er(this,w.extend({},e),s);(i||w._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=w.timers,o=w._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&w.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=w._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,o=r?r.length:0;n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.speed=function(e,t,n){var r=e&&typeof e=="object"?w.extend({},e):{complete:n||!n&&t||w.isFunction(e)&&e,duration:e,easing:n&&t||t&&!w.isFunction(t)&&t};r.duration=w.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){w.isFunction(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=rr.prototype.init,w.fx.tick=function(){var e,n=w.timers,r=0;Xn=w.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||w.fx.stop(),Xn=t},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Vn||(Vn=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Vn),Vn=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){w.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,w.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},w.offset={setOffset:function(e,t,n){var r=w.css(e,"position");r==="static"&&(e.style.position="relative");var i=w(e),s=i.offset(),o=w.css(e,"top"),u=w.css(e,"left"),a=(r==="absolute"||r==="fixed")&&w.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),w.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},w.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return w.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(n=e.offset()),n.top+=w.css(e[0],"borderTopWidth",!0),n.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-w.css(r,"marginTop",!0),left:t.left-n.left-w.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u;while(e&&!w.nodeName(e,"html")&&w.css(e,"position")==="static")e=e.offsetParent;return e||u})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);w.fn[e]=function(i){return w.access(this,function(e,i,s){var o=sr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?w(o).scrollLeft():s,r?s:w(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),w.each({Height:"height",Width:"width"},function(e,n){w.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){w.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return w.access(this,function(n,r,i){var s;return w.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?w.css(n,r,u):w.style(n,r,i,u)},n,o?i:t,o,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=w:(e.jQuery=e.$=w,typeof define=="function"&&define.amd&&define("jquery",[],function(){return w}))}(window),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),function(e,t){if(typeof define=="function"&&define.amd)define("backbone.wreqr",["backbone","underscore"],function(e,n){return t(e,n)});else if(typeof exports!="undefined"){var n=require("backbone"),r=require("underscore");module.exports=t(n,r)}else t(e.Backbone,e._)}(this,function(e,t){var n=e.Wreqr,r=e.Wreqr={};return e.Wreqr.VERSION="1.3.1",e.Wreqr.noConflict=function(){return e.Wreqr=n,this},r.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var r=null;t.isObject(e)&&!t.isFunction(e)&&(r=e.context,e=e.callback),this.setHandler(n,e,r)},this)},setHandler:function(e,t,n){var r={callback:t,context:n};this._wreqrHandlers[e]=r,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)return;return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,t),r.CommandStorage=function(){var n=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(n.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),n}(),r.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,n,r){var i=this.storage.getCommands(e);t.each(i.instances,function(e){n.apply(r,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var n,r=e.storageType||this.storageType;t.isFunction(r)?n=new r:n=r,this.storage=n}})}(r),r.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);if(this.hasHandler(e))return this.getHandler(e).apply(this,t)}})}(r),r.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,t),r.Channel=function(n){var r=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(r.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,n,r){if(!n)return;r=r||this;var i=e==="vent"?"on":"setHandler";t.each(n,function(n,s){this[e][i](s,t.bind(n,r))},this)}}),r}(r),r.radio=function(e){var n=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(n.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var n=this._channels[t];return n||(n=new e.Channel(t),this._channels[t]=n),n},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(r[e],function(t){this[e][t]=i(this,e,t)},this)},this)}});var r={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},i=function(e,t,n){return function(r){var i=e._getChannel(r)[t],s=Array.prototype.slice.call(arguments,1);return i[n].apply(i,s)}};return new n}(r),e.Wreqr}),function(e,t){if(typeof define=="function"&&define.amd)define("backbone.babysitter",["backbone","underscore"],function(e,n){return t(e,n)});else if(typeof exports!="undefined"){var n=require("backbone"),r=require("underscore");module.exports=t(n,r)}else t(e.Backbone,e._)}(this,function(e,t){var n=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===n)return delete this._indexByCustom[t],!0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(r){t.isFunction(r[e])&&r[e].apply(r,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(r,function(e){n.prototype[e]=function(){var n=t.values(this._views),r=[n].concat(t.toArray(arguments));return t[e].apply(t,r)}}),n}(e,t),e.ChildViewContainer.VERSION="0.1.4",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=n,this},e.ChildViewContainer}),function(e,t){if(typeof define=="function"&&define.amd)define("marionette",["backbone","underscore","backbone.wreqr","backbone.babysitter"],function(n,r){return e.Marionette=t(e,n,r)});else if(typeof exports!="undefined"){var n=require("backbone"),r=require("underscore"),i=require("backbone.wreqr"),s=require("backbone.babysitter");module.exports=t(e,n,r)}else e.Marionette=t(e,e.Backbone,e._)}(this,function(e,t,n){function o(e,t){var n=new Error(e);throw n.name=t||"Error",n}var r=e.Marionette,i=t.Marionette={};i.VERSION="2.1.0",i.noConflict=function(){return e.Marionette=r,this},i.Deferred=t.$.Deferred;var s=Array.prototype.slice;return i.extend=t.Model.extend,i.getOption=function(e,t){if(!e||!t)return;var n;return e.options&&e.options[t]!==undefined?n=e.options[t]:n=e[t],n},i.proxyGetOption=function(e){return i.getOption(this,e)},i.normalizeMethods=function(e){var t={};return n.each(e,function(e,r){n.isFunction(e)||(e=this[e]);if(!e)return;t[r]=e},this),t},i.normalizeUIKeys=function(e,t){if(typeof e=="undefined")return;return n.each(n.keys(e),function(n){var r=/@ui\.[a-zA-Z_$0-9]*/g;n.match(r)&&(e[n.replace(r,function(e){return t[e.slice(4)]})]=e[n],delete e[n])}),e},i.actAsCollection=function(e,t){var r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];n.each(r,function(r){e[r]=function(){var e=n.values(n.result(this,t)),i=[e].concat(n.toArray(arguments));return n[r].apply(n,i)}})},i.triggerMethod=function(){function t(e,t,n){return n.toUpperCase()}var e=/(^|:)(\w)/gi,r=function(r){var i="on"+r.replace(e,t),s=this[i],o;return n.isFunction(s)&&(o=s.apply(this,n.tail(arguments))),n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),o};return r}(),i.MonitorDOMRefresh=function(e){function r(e){e._isShown=!0,s(e)}function i(e){e._isRendered=!0,s(e)}function s(e){e._isShown&&e._isRendered&&o(e)&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function o(n){return t.$.contains(e,n.el)}return function(e){e.listenTo(e,"show",function(){r(e)}),e.listenTo(e,"render",function(){i(e)})}}(document.documentElement),function(e){function t(e,t,r,i){var s=i.split(/\s+/);n.each(s,function(n){var i=e[n];i||o('Method "'+n+'" was configured as an event handler, but does not exist.'),e.listenTo(t,r,i)})}function r(e,t,n,r){e.listenTo(t,n,r)}function i(e,t,r,i){var s=i.split(/\s+/);n.each(s,function(n){var i=e[n];e.stopListening(t,r,i)})}function s(e,t,n,r){e.stopListening(t,n,r)}function u(e,t,r,i,s){if(!t||!r)return;n.isFunction(r)&&(r=r.call(e)),n.each(r,function(r,o){n.isFunction(r)?i(e,t,o,r):s(e,t,o,r)})}e.bindEntityEvents=function(e,n,i){u(e,n,i,r,t)},e.unbindEntityEvents=function(e,t,n){u(e,t,n,s,i)},e.proxyBindEntityEvents=function(t,n){return e.bindEntityEvents(this,t,n)},e.proxyUnbindEntityEvents=function(t,n){return e.unbindEntityEvents(this,t,n)}}(i),i.Callbacks=function(){this._deferred=i.Deferred(),this._callbacks=[]},n.extend(i.Callbacks.prototype,{add:function(e,t){var r=n.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),r.then(function(n){t&&(n.context=t),e.call(n.context,n.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=i.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),i.Controller=function(e){this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},i.Controller.extend=i.extend,n.extend(i.Controller.prototype,t.Events,{destroy:function(){var e=s.call(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.triggerMethod.apply(this,["destroy"].concat(e)),this.stopListening(),this.off(),this},triggerMethod:i.triggerMethod,getOption:i.proxyGetOption}),i.Object=function(e){this.options=n.extend({},n.result(this,"options"),e),this.initialize(this.options)},i.Object.extend=i.extend,n.extend(i.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening()},triggerMethod:i.triggerMethod,getOption:i.proxyGetOption,bindEntityEvents:i.proxyBindEntityEvents,unbindEntityEvents:i.proxyUnbindEntityEvents}),n.extend(i.Object.prototype,t.Events),i.Region=function(e){this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,this.el||o('An "el" must be specified for a region.',"NoElError"),this.$el=this.getEl(this.el);if(this.initialize){var n=s.apply(arguments);this.initialize.apply(this,n)}},n.extend(i.Region,{buildRegion:function(e,t){if(n.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(n.isFunction(e))return this._buildRegionFromRegionClass(e);o("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,r){var i=e.regionClass||r,s=n.omit(e,"selector","regionClass");e.selector&&!s.el&&(s.el=e.selector);var o=new i(s);return e.parentEl&&(o.getEl=function(r){if(n.isObject(r))return t.$(r);var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(r)}),o},_buildRegionFromRegionClass:function(e){return new e}}),n.extend(i.Region.prototype,t.Events,{show:function(e,t){this._ensureElement();var r=t||{},i=e!==this.currentView,s=!!r.preventDestroy,o=!!r.forceShow,u=!!this.currentView,a=!s&&i;a&&this.empty();var f=i||o;return f?(e.once("destroy",n.bind(this.empty,this)),e.render(),u&&this.triggerMethod("before:swap",e),this.triggerMethod("before:show",e),n.isFunction(e.triggerMethod)?e.triggerMethod("before:show"):this.triggerMethod.call(e,"before:show"),this.attachHtml(e),this.currentView=e,u&&this.triggerMethod("swap",e),this.triggerMethod("show",e),n.isFunction(e.triggerMethod)?e.triggerMethod("show"):this.triggerMethod.call(e,"show"),this):this},_ensureElement:function(){n.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),(!this.$el||this.$el.length===0)&&o('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(e){return t.$(e)},attachHtml:function(e){this.el.innerHTML="",this.el.appendChild(e.el)},empty:function(){var e=this.currentView;if(!e)return;return this.triggerMethod("before:empty",e),this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,this},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&e.remove()},attachView:function(e){return this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this},getOption:i.proxyGetOption,triggerMethod:i.triggerMethod}),i.Region.extend=i.extend,i.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.call(this,t)},addRegions:function(e,t){n.isFunction(e)&&(e=e.apply(this,arguments));var r={};return n.each(e,function(e,i){n.isString(e)&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var s=this.addRegion(i,e);r[i]=s},this),r},addRegion:function(t,r){var i,s=n.isObject(r),o=n.isString(r),u=!!r.selector;return o||s&&u?i=e.Region.buildRegion(r,e.Region):n.isFunction(r)?i=e.Region.buildRegion(r,e.Region):i=r,this.triggerMethod("before:add:region",t,i),this._store(t,i),this.triggerMethod("add:region",t,i),i},get:function(e){return this._regions[e]},getRegions:function(){return n.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return n.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return n.each(e,function(e){e.empty()},this),e},destroy:function(){return this.removeRegions(),e.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete this._regions[e],this._setLength(),this.triggerMethod("remove:region",e,t)},_setLength:function(){this.length=n.size(this._regions)}});return e.actAsCollection(t.prototype,"_regions"),t}(i),i.TemplateCache=function(e){this.templateId=e},n.extend(i.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new i.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=s.call(arguments),n=t.length;if(n>0)for(e=0;e<n;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(i.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var n=t.$(e).html();return(!n||n.length===0)&&o('Could not find template: "'+e+'"',"NoTemplateError"),n},compileTemplate:function(e){return n.template(e)}}),i.Renderer={render:function(e,t){e||o("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");var n;return typeof e=="function"?n=e:n=i.TemplateCache.get(e),n(t)}},i.View=t.View.extend({constructor:function(e){n.bindAll(this,"render"),this.options=n.extend({},n.result(this,"options"),n.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(n.result(this,"events")),n.isObject(this.behaviors)&&new i.Behaviors(this),t.View.apply(this,arguments),i.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,s.call(arguments,1))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"ui"),r=n.result(this,"_uiBindings");return i.normalizeUIKeys(e,r||t)},configureTriggers:function(){if(!this.triggers)return;var e={},t=this.normalizeUIKeys(n.result(this,"triggers"));return n.each(t,function(t,r){var i=n.isObject(t),s=i?t.event:t;e[r]=function(e){if(e){var n=e.preventDefault,r=e.stopPropagation,o=i?t.preventDefault:n,u=i?t.stopPropagation:r;o&&n&&n.apply(e),u&&r&&r.apply(e)}var a={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,a)}},this),e},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),this},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this)),e=this.normalizeUIKeys(e);var r={},i=n.result(this,"behaviorEvents")||{},s=this.configureTriggers();n.extend(r,i,e,s),t.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){var e=s.call(arguments);return t.View.prototype.undelegateEvents.apply(this,e),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var e=new Error("Cannot use a view thats already been destroyed.");throw e.name="ViewDestroyedError",e}},destroy:function(){if(this.isDestroyed)return;var e=s.call(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.remove(),this},bindUIElements:function(){if(!this.ui)return;this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)},unbindUIElements:function(){if(!this.ui||!this._uiBindings)return;n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings},triggerMethod:i.triggerMethod,normalizeMethods:i.normalizeMethods,getOption:i.proxyGetOption,bindEntityEvents:i.proxyBindEntityEvents,unbindEntityEvents:i.proxyUnbindEntityEvents}),i.ItemView=i.View.extend({constructor:function(){i.View.apply(this,arguments)},serializeData:function(){var e={};return this.model?e=n.partial(this.serializeModel,this.model).apply(this,arguments):this.collection&&(e={items:n.partial(this.serializeCollection,this.collection).apply(this,arguments)}),e},serializeCollection:function(e){return e.toJSON.apply(e,s.call(arguments,1))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(e===!1)return;e||o("Cannot render the template since it is null or undefined.","UndefinedTemplateError");var t=this.serializeData();t=this.mixinTemplateHelpers(t);var n=i.Renderer.render(e,t,this);return this.attachElContent(n),this},attachElContent:function(e){return this.$el.html(e),this},destroy:function(){if(this.isDestroyed)return;return i.View.prototype.destroy.apply(this,arguments)}}),i.CollectionView=i.View.extend({childViewEventPrefix:"childview",constructor:function(e){var t=e||{};this.sort=n.isUndefined(t.sort)?!0:t.sort,this._initChildViewStorage(),i.View.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&n.invoke(this._bufferedChildren,"triggerMethod","before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(n.each(this._bufferedChildren,function(e){n.isFunction(e.triggerMethod)?e.triggerMethod("show"):i.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e){this.destroyEmptyView();var t=this.getChildView(e),n=this.collection.indexOf(e);this.addChild(e,t,n)},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},onShowCalled:function(){this.children.each(function(e){n.isFunction(e.triggerMethod)?e.triggerMethod("show"):i.triggerMethod.call(e,"show")})},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},resortView:function(){this.render()},_sortViews:function(){var e=this.collection.find(function(e,t){var n=this.children.findByModel(e);return!n||n._index!==t},this);e&&this.resortView()},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getChildView(t),this.addChild(t,e,n)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var n=new t.Model;this.addEmptyView(n,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var r=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");n.isFunction(r)&&(r=r.call(this));var i=this.buildChildView(e,t,r);this._isShown&&this.triggerMethod.call(i,"before:show"),this.children.add(i),this.renderChildView(i,-1),this._isShown&&this.triggerMethod.call(i,"show")},getChildView:function(e){var t=this.getOption("childView");return t||o('A "childView" must be specified',"NoChildViewError"),t},addChild:function(e,t,r){var i=this.getOption("childViewOptions");n.isFunction(i)&&(i=i.call(this,e,r));var s=this.buildChildView(e,t,i);return this._updateIndices(s,!0,r),this._addChildView(s,r),s},_updateIndices:function(e,t,n){if(!this.sort)return;t?(e._index=n,this.children.each(function(t){t._index>=e._index&&t._index++})):this.children.each(function(t){t._index>=e._index&&t._index--})},_addChildView:function(e,t){this.proxyChildEvents(e),this.triggerMethod("before:add:child",e),this.children.add(e),this.renderChildView(e,t),this._isShown&&!this.isBuffering&&(n.isFunction(e.triggerMethod)?e.triggerMethod("show"):i.triggerMethod.call(e,"show")),this.triggerMethod("add:child",e)},renderChildView:function(e,t){return e.render(),this.attachHtml(this,e,t),e},buildChildView:function(e,t,r){var i=n.extend({model:e},r);return new t(i)},removeChildView:function(e){return e&&(this.triggerMethod("before:remove:child",e),e.destroy?e.destroy():e.remove&&e.remove(),this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1)),e},isEmpty:function(e){return!this.collection||this.collection.length===0},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},attachHtml:function(e,t,n){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e._insertBefore(t,n)||e._insertAfter(t)},_insertBefore:function(e,t){var n,r=this.sort&&t<this.children.length-1;return r&&(n=this.children.find(function(e){return e._index===t+1})),n?(n.$el.before(e.el),!0):!1},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){if(this.isDestroyed)return;return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),i.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var e=this.children.map(n.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),e},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var r=s.call(arguments),i=r[0],o=this.normalizeMethods(n.result(this,"childEvents"));r[0]=t+":"+i,r.splice(1,0,e),typeof o!="undefined"&&n.isFunction(o[i])&&o[i].apply(this,r.slice(1)),this.triggerMethod.apply(this,r)},this)}}),i.CompositeView=i.CollectionView.extend({constructor:function(){i.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(e){var t=this.getOption("childView")||this.constructor;return t||o('A "childView" must be specified',"NoChildViewError"),t},serializeData:function(){var e={};return this.model&&(e=n.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&i.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),n=i.Renderer.render(t,e,this);this.attachElContent(n),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){var n=this.getChildViewContainer(e);n.append(t)},_insertAfter:function(e){var t=this.getChildViewContainer(this);t.append(e.el)},getChildViewContainer:function(e){if("$childViewContainer"in e)return e.$childViewContainer;var t,r=i.getOption(e,"childViewContainer");if(r){var s=n.isFunction(r)?r.call(e):r;s.charAt(0)==="@"&&e.ui?t=e.ui[s.substr(4)]:t=e.$(s),t.length<=0&&o('The specified "childViewContainer" was not found: '+e.childViewContainer,"ChildViewContainerMissingError")}else t=e.$el;return e.$childViewContainer=t,t},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),i.LayoutView=i.ItemView.extend({regionClass:i.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),i.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),i.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.regionManager.destroy(),i.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(e,t){this.triggerMethod("before:region:add",e);var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return this.triggerMethod("before:region:remove",e),delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t=this,n={regionClass:this.getOption("regionClass"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),n.isFunction(this.regions)?t=this.regions(e):t=this.regions||{};var r=this.getOption.call(e,"regions");n.isFunction(r)&&(r=r.call(this,e)),n.extend(t,r),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.emptyRegions(),this.regionManager.each(function(e){e.reset()})},getRegionManager:function(){return new i.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})}}),i.Behavior=function(e,t){function n(t,n){this.view=n,this.defaults=e.result(this,"defaults")||{},this.options=e.extend({},this.defaults,t),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return e.extend(n.prototype,t.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:i.triggerMethod,getOption:i.proxyGetOption,bindEntityEvents:i.proxyBindEntityEvents,unbindEntityEvents:i.proxyUnbindEntityEvents}),n.extend=i.extend,n}(n,t),i.Behaviors=function(e,t){function n(e,i){i=n.parseBehaviors(e,i||t.result(e,"behaviors")),n.wrap(e,i,t.keys(r))}var r={setElement:function(e,n){return e.apply(this,t.tail(arguments,2)),t.each(n,function(e){e.$el=this.$el,e.el=this.el},this),this},destroy:function(e,n){var r=t.tail(arguments,2);return e.apply(this,r),t.invoke(n,"destroy",r),this},bindUIElements:function(e,n){e.apply(this),t.invoke(n,e)},unbindUIElements:function(e,n){e.apply(this),t.invoke(n,e)},triggerMethod:function(e,n){var r=t.tail(arguments,2);e.apply(this,r),t.each(n,function(t){e.apply(t,r)})},delegateEvents:function(n,r){var i=t.tail(arguments,2);return n.apply(this,i),t.each(r,function(t){e.bindEntityEvents(t,this.model,e.getOption(t,"modelEvents")),e.bindEntityEvents(t,this.collection,e.getOption(t,"collectionEvents"))},this),this},undelegateEvents:function(n,r){var i=t.tail(arguments,2);return n.apply(this,i),t.each(r,function(t){e.unbindEntityEvents(t,this.model,e.getOption(t,"modelEvents")),e.unbindEntityEvents(t,this.collection,e.getOption(t,"collectionEvents"))},this),this},behaviorEvents:function(n,r){var i={},s=t.result(this,"ui");return t.each(r,function(n,r){var o={},u=t.clone(t.result(n,"events"))||{},a=t.result(n,"ui"),f=t.extend({},s,a);u=e.normalizeUIKeys(u,f),t.each(t.keys(u),function(e){var i=(new Array(r+2)).join(" "),s=e+i,a=t.isFunction(u[e])?u[e]:n[u[e]];o[s]=t.bind(a,n)}),i=t.extend(i,o)}),i}};return t.extend(n,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(e,r){return e.behaviorClass?e.behaviorClass:t.isFunction(n.behaviorsLookup)?n.behaviorsLookup.apply(this,arguments)[r]:n.behaviorsLookup[r]},parseBehaviors:function(e,r){return t.chain(r).map(function(r,i){var s=n.getBehaviorClass(r,i),o=new s(r,e),u=n.parseBehaviors(e,t.result(o,"behaviors"));return[o].concat(u)}).flatten().value()},wrap:function(e,n,i){t.each(i,function(i){e[i]=t.partial(r[i],e[i],n)})}}),n}(i,n),i.AppRouter=t.Router.extend({constructor:function(e){t.Router.apply(this,arguments),this.options=e||{};var n=this.getOption("appRoutes"),r=this._getController();this.processAppRoutes(r,n),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},_processOnRoute:function(e,t){var r=n.invert(this.getOption("appRoutes"))[e];n.isFunction(this.onRoute)&&this.onRoute(e,r,t)},processAppRoutes:function(e,t){if(!t)return;var r=n.keys(t).reverse();n.each(r,function(n){this._addAppRoute(e,n,t[n])},this)},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,r){var i=e[r];i||o('Method "'+r+'" was not found on the controller'),this.route(t,r,n.bind(i,e))},getOption:i.proxyGetOption}),i.Application=function(e){this._initializeRegions(e),this._initCallbacks=new i.Callbacks,this.submodules={},n.extend(this,e),this._initChannel()},n.extend(i.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var n=i.Module.getClass(t),r=s.call(arguments);return r.unshift(this),n.create.apply(n,r)},getRegionManager:function(){return new i.RegionManager},_initializeRegions:function(e){var t=n.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var r=i.getOption(e,"regions");return n.isFunction(r)&&(r=r.call(this,e)),n.extend(t,r),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this.listenTo(this._regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this._regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this._regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_initChannel:function(){this.channelName=n.result(this,"channelName")||"global",this.channel=n.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=n.result(this,"vent")||this.channel.vent,this.commands=n.result(this,"commands")||this.channel.commands,this.reqres=n.result(this,"reqres")||this.channel.reqres},triggerMethod:i.triggerMethod,getOption:i.proxyGetOption}),i.Application.extend=i.extend,i.Module=function(e,t,r){this.moduleName=e,this.options=n.extend({},this.options,r),this.initialize=r.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,n.isFunction(this.initialize)&&this.initialize(e,t,this.options)},i.Module.extend=i.extend,n.extend(i.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){if(this._isInitialized)return;n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e)},stop:function(){if(!this._isInitialized)return;this._isInitialized=!1,this.triggerMethod("before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(undefined,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop")},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,r){if(!e)return;var s=n.flatten([this,this.app,t,i,t.$,n,r]);e.apply(this,s)},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new i.Callbacks,this._finalizerCallbacks=new i.Callbacks},triggerMethod:i.triggerMethod}),n.extend(i.Module,{create:function(e,t,r){var i=e,o=s.call(arguments);o.splice(0,3),t=t.split(".");var u=t.length,a=[];return a[u-1]=r,n.each(t,function(t,n){var s=i;i=this._getModule(s,t,e,r),this._addModuleDefinition(s,i,a[n],o)},this),i},_getModule:function(e,t,r,i,s){var o=n.extend({},i),u=this.getClass(i),a=e[t];return a||(a=new u(t,r,o),e[t]=a,e.submodules[t]=a),a},getClass:function(e){var t=i.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,n,r){var i=this._getDefine(n),s=this._getStartWithParent(n,t);i&&t.addDefinition(i,r),this._addStartWithParent(e,t,s)},_getStartWithParent:function(e,t){var r;return n.isFunction(e)&&e.prototype instanceof i.Module?(r=t.constructor.prototype.startWithParent,n.isUndefined(r)?!0:r):n.isObject(e)?(r=e.startWithParent,n.isUndefined(r)?!0:r):!0},_getDefine:function(e){return!n.isFunction(e)||e.prototype instanceof i.Module?n.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,n){t.startWithParent=t.startWithParent&&n;if(!t.startWithParent||!!t.startWithParentIsConfigured)return;t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)})}}),i}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.5",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);c.onXhr&&c.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("json",["text"],function(text){function cacheBust(e){return e=e.replace(CACHE_BUST_FLAG,""),e+=e.indexOf("?")<0?"?":"&",e+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse=typeof JSON!="undefined"&&typeof JSON.parse=="function"?JSON.parse:function(val){return eval("("+val+")")},buildMap={};return{load:function(e,t,n,r){!r.isBuild||r.inlineJSON!==!1&&e.indexOf(CACHE_BUST_QUERY_PARAM+"=")===-1?text.get(t.toUrl(e),function(t){r.isBuild?(buildMap[e]=t,n(t)):n(jsonParse(t))},n.error,{accept:"application/json"}):n(null)},normalize:function(e,t){return e.indexOf(CACHE_BUST_FLAG)===-1?e:cacheBust(e)},write:function(e,t,n){if(t in buildMap){var r=buildMap[t];n('define("'+e+"!"+t+'", function(){ return '+r+";});\n")}}}}),define("json!config",function(){return{avatar:{path:"/uploads/user/avatar",defaultSize:{width:126,height:126},emptyAvatarFilename:"/resources/images/avatars/no-avatar.png"},rank:{path:"/resources/images/ranks",defaultSize:{width:41,height:41}},award:{path:"/resources/images/awards",defaultSize:{width:41,height:41}},articlecategory:{path:"/resources/images/articleactegory"},article:{smallImage:{path:"/resources/images/article/small",defaultSize:{width:242}},innerImage:{path:"/resources/images/article/inner",defaultSize:{maxWidth:1600,maxHeight:1600}}},banner:{path:"/resources/images/banners"},smile:{path:"/resources/images/smiles"},photo:{path:"/uploads/photo"},comments:{maxDepth:3},user:{onlineLag:1800},generatedCollection:{path:"/resources/front/js/generated"}}}),define("block",{load:function(e,t,n,r){var i=r.modules&&r.modules.block&&r.modules.block.path?r.modules.block.path:"blocks",s=e.split("/"),o=i+"/",u="";for(var a=0;a<s.length;a++)o+=s[a],o+="/",a>0?u+=s[a].charAt(0).toUpperCase()+s[a].slice(1):u+=s[a];o+=u,t([o],function(e){n(e)})}}),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e){var t={init:function(t){return this.options=e.extend({},e.noty.defaults,t),this.options.layout=this.options.custom?e.noty.layouts.inline:e.noty.layouts[this.options.layout],e.noty.themes[this.options.theme]?this.options.theme=e.noty.themes[this.options.theme]:t.themeClassName=this.options.theme,delete t.layout,delete t.theme,this.options=e.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=e.extend({},this.options,t),this._build(),this},_build:function(){var t=e('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(t.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?e(this.options.layout.parent.object).css(this.options.layout.parent.css).append(t):t,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=e("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var r=this;e.each(this.options.buttons,function(t,n){var i=e("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+t).appendTo(r.$bar.find(".noty_buttons")).bind("click",function(){e.isFunction(n.onClick)&&n.onClick.call(i,r)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),e.noty.store[this.options.id]=this},show:function(){var t=this;return t.options.custom?t.options.custom.find(t.options.layout.container.selector).append(t.$bar):e(t.options.layout.container.selector).append(t.$bar),t.options.theme&&t.options.theme.style&&t.options.theme.style.apply(t),"function"===e.type(t.options.layout.css)?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(e(t.options.layout.container.selector)),t.showing=!0,t.options.theme&&t.options.theme.style&&t.options.theme.callback.onShow.apply(this),e.inArray("click",t.options.closeWith)>-1&&t.$bar.css("cursor","pointer").one("click",function(e){t.stopPropagation(e),t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()}),e.inArray("hover",t.options.closeWith)>-1&&t.$bar.one("mouseenter",function(){t.close()}),e.inArray("button",t.options.closeWith)>-1&&t.$closeButton.one("click",function(e){t.stopPropagation(e),t.close()}),-1==e.inArray("button",t.options.closeWith)&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0}),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done(function(){t.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var t=this;if(this.showing)return t.$bar.queue(function(){t.close.apply(t)}),void 0;if(!this.shown&&!this.showing){var n=[];return e.each(e.noty.queue,function(e,r){r.options.id!=t.options.id&&n.push(r)}),e.noty.queue=n,void 0}t.$bar.addClass("i-am-closing-now"),t.options.callback.onClose&&t.options.callback.onClose.apply(t),t.$bar.clearQueue().stop().animate(t.options.animation.close,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t)}).promise().done(function(){t.options.modal&&(e.notyRenderer.setModalCount(-1),0==e.notyRenderer.getModalCount()&&e(".noty_modal").fadeOut("fast",function(){e(this).remove()})),e.notyRenderer.setLayoutCountFor(t,-1),0==e.notyRenderer.getLayoutCountFor(t)&&e(t.options.layout.container.selector).remove(),"undefined"!=typeof t.$bar&&null!==t.$bar&&(t.$bar.remove(),t.$bar=null,t.closed=!0),delete e.noty.store[t.options.id],t.options.theme.callback&&t.options.theme.callback.onClose&&t.options.theme.callback.onClose.apply(t),t.options.dismissQueue||(e.noty.ontap=!0,e.notyRenderer.render()),t.options.maxVisible>0&&t.options.dismissQueue&&e.notyRenderer.render()})}},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},stopPropagation:function(e){e=e||window.event,"undefined"!=typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};e.notyRenderer={},e.notyRenderer.init=function(n){var r=Object.create(t).init(n);return r.options.killer&&e.noty.closeAll(),r.options.force?e.noty.queue.unshift(r):e.noty.queue.push(r),e.notyRenderer.render(),"object"==e.noty.returns?r:r.options.id},e.notyRenderer.render=function(){var t=e.noty.queue[0];"object"===e.type(t)?t.options.dismissQueue?t.options.maxVisible>0?e(t.options.layout.container.selector+" li").length<t.options.maxVisible&&e.notyRenderer.show(e.noty.queue.shift()):e.notyRenderer.show(e.noty.queue.shift()):e.noty.ontap&&(e.notyRenderer.show(e.noty.queue.shift()),e.noty.ontap=!1):e.noty.ontap=!0},e.notyRenderer.show=function(t){t.options.modal&&(e.notyRenderer.createModalFor(t),e.notyRenderer.setModalCount(1)),t.options.custom?0==t.options.custom.find(t.options.layout.container.selector).length?t.options.custom.append(e(t.options.layout.container.object).addClass("i-am-new")):t.options.custom.find(t.options.layout.container.selector).removeClass("i-am-new"):0==e(t.options.layout.container.selector).length?e("body").append(e(t.options.layout.container.object).addClass("i-am-new")):e(t.options.layout.container.selector).removeClass("i-am-new"),e.notyRenderer.setLayoutCountFor(t,1),t.show()},e.notyRenderer.createModalFor=function(t){if(0==e(".noty_modal").length){var n=e("<div/>").addClass("noty_modal").addClass(t.options.theme).data("noty_modal_count",0);t.options.theme.modal&&t.options.theme.modal.css&&n.css(t.options.theme.modal.css),n.prependTo(e("body")).fadeIn("fast")}},e.notyRenderer.getLayoutCountFor=function(t){return e(t.options.layout.container.selector).data("noty_layout_count")||0},e.notyRenderer.setLayoutCountFor=function(t,n){return e(t.options.layout.container.selector).data("noty_layout_count",e.notyRenderer.getLayoutCountFor(t)+n)},e.notyRenderer.getModalCount=function(){return e(".noty_modal").data("noty_modal_count")||0},e.notyRenderer.setModalCount=function(t){return e(".noty_modal").data("noty_modal_count",e.notyRenderer.getModalCount()+t)},e.fn.noty=function(t){return t.custom=e(this),e.notyRenderer.init(t)},e.noty={},e.noty.queue=[],e.noty.ontap=!0,e.noty.layouts={},e.noty.themes={},e.noty.returns="object",e.noty.store={},e.noty.get=function(t){return e.noty.store.hasOwnProperty(t)?e.noty.store[t]:!1},e.noty.close=function(t){return e.noty.get(t)?e.noty.get(t).close():!1},e.noty.setText=function(t,n){return e.noty.get(t)?e.noty.get(t).setText(n):!1},e.noty.setType=function(t,n){return e.noty.get(t)?e.noty.get(t).setType(n):!1},e.noty.clearQueue=function(){e.noty.queue=[]},e.noty.closeAll=function(){e.noty.clearQueue(),e.each(e.noty.store,function(e,t){t.close()})};var n=window.alert;e.noty.consumeAlert=function(t){window.alert=function(n){t?t.text=n:t={text:n},e.notyRenderer.init(t)}},e.noty.stopConsumeAlert=function(){window.alert=n},e.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},e(window).resize(function(){e.each(e.noty.layouts,function(t,n){n.container.style.apply(e(n.container.selector))})})}(jQuery),window.noty=function(e){return jQuery.notyRenderer.init(e)},function(e){e.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){e(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){e(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){e(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){e(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){e(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-n)/2+"px"}):e(this).animate({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-n)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){e(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-n)/2+"px"}):e(this).animate({top:(e(window).height()-n)/2+"px"},500),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){e(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-n)/2+"px"}):e(this).animate({top:(e(window).height()-n)/2+"px"},500),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){e(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){e(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){e(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){e(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){e(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var t=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),e(t).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){e(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){e(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery),define("noty/packaged/jquery.noty.packaged.min",["jquery"],function(){}),define("blocks/notice/notice",["require","noty/packaged/jquery.noty.packaged.min"],function(e){return e("noty/packaged/jquery.noty.packaged.min"),$.noty.defaults.closeWith=["click","button"],$.noty.defaults.layout="topRight",$.noty.defaults.timeout=5e3,noty}),define("textblock",{load:function(e,t,n,r){var i=/^(.+)(\.[^\.]+$)?/.exec(e),s=i[1].split(".");s.length>0&&(i[1]=s[0],i[2]="."+s[1]);var o=r.modules&&r.modules.block&&r.modules.block.path?r.modules.block.path:"blocks",u=i[1].split("/"),a="text!"+o+"/",f="";for(var l=0;l<u.length;l++)a+=u[l],a+="/",l>0?f+=u[l].charAt(0).toUpperCase()+u[l].slice(1):f+=u[l];a+=f,"undefined"!=typeof i[2]&&(a+=i[2]),t([a],function(e){n(e)})}}),define("text!blocks/comments/comments.html",[],function(){return'<div class="comments__field comments__field_answer clearfix">\r\n</div>\r\n<a href="#" class="comments__more clearfix">Загрузить все <span class="comments__more__number"></span> комментариев</a>\r\n<ul class="comments__list clearfix loader loader_center loader_48433e"></ul>'}),define("text!blocks/comments/__item/comments__item.html",[],function(){return'<div class="comments__item__normal">\r\n	<div class="comments__item__center">\r\n		<div class="comments__item__text">\r\n			<span class="comments__item__nickname"><%= author.nickname %></span>\r\n			<div class="comments__item__text__content">\r\n				<%= nl2br(message) %>\r\n			</div>\r\n		</div>\r\n\r\n		<% if(App.currentUser.get(\'id\') != author.id && !isRated) { %>\r\n		<div class="topic__item__user__controls">\r\n			<button class="button__controls button__controls_minus"></button>\r\n			<button class="button__controls button__controls_plus"></button>\r\n		</div>\r\n		<% } %>\r\n		\r\n		<span class="comments__item__time"><%= templateDate(onCreated) %></span>\r\n		<ul class="comments__item__control__list clearfix">\r\n			<% if((App.currentUser.get(\'id\') == author.id && App.currentUser.check(\'isCanEditOwnComments\'))\r\n					|| App.currentUser.check(\'isCanEditAllComments\')\r\n				) { %>\r\n				<li class="comments__item__controls__item">\r\n					<a data-type="edit" href="javascript://">Редактировать</a>\r\n				</li>\r\n			<% } %>\r\n\r\n			<% if((App.currentUser.get(\'id\') == author.id && App.currentUser.check(\'isCanDeleteOwnComments\'))\r\n					|| App.currentUser.check(\'isCanDeleteAllComments\')\r\n				) { %>\r\n				<li class="comments__item__controls__item">\r\n					<a data-type="delete" href="javascript://">Удалить</a>\r\n				</li>\r\n			<% } %>\r\n\r\n			<% if(App.currentUser.get(\'id\') != author.id && App.currentUser.check(\'isCanCreateComments\')\r\n					&& deps < App.config.comments.maxDepth) { %>\r\n				<li class="comments__item__controls__item">\r\n					<a data-type="answer" href="javascript://">Ответить</a>\r\n				</li>\r\n			<% } %>\r\n\r\n			<% if(App.currentUser.get(\'id\') != author.id) { %>\r\n				<li class="comments__item__controls__item">\r\n					<a data-type="complaint" href="javascript://">Пожаловаться</a>\r\n				</li>\r\n			<% } %>\r\n		</ul>\r\n	</div>\r\n	<div class="comments__item__left">\r\n		<img class="comments__item__avatar" src="<%= author.avatar %>">\r\n	</div>\r\n	<div class="comments__item__right">\r\n		<% if(rateCount < 1) { %>\r\n			<span class="comments__item__rate comments__item__rate_negative"><%= rateCount %></span>\r\n		<% } else { %>\r\n			<span class="comments__item__rate"><%= rateCount %></span>\r\n		<% } %>\r\n	</div>\r\n</div>\r\n<div class="comments__item__edit">\r\n	<div class="comments__item__left loader_center loader_48433e">\r\n		<img class="comments__item__avatar" src="<%= author.avatar %>">\r\n	</div>\r\n	<div class="comments__item__center">\r\n		<textarea pattern="[A-Za-z0-9]{3,}$" name="comment" id="" cols="30" rows="10" placeholder="Введите комментарий"><%= message %></textarea>\r\n	</div>\r\n	<ul class="comments__item__right">\r\n		<li><button class="button button_red" type="submit">Изменить</button></li>\r\n		<li><button class="button button_dark" type="cancel">Отменить</button></li>\r\n	</ul>\r\n</div>\r\n\r\n<div class="comments__field_answer comments__item"></div>\r\n<ul class="comments__list__inner">\r\n</ul>'}),define("helpers/templateDate",["require"],function(e){return function(e){e=new Date(e*1e3);var t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1),i=t-e,s=Math.round(i/864e5),o=Math.round(i%864e5/36e5),u=Math.round(i%864e5%36e5/6e4);if(0==s&&0==o)return 1>=u?"только что":2>=u?"1 минуту назад":5>=u?u-1+" минуты назад":u-1+" минут назад";if(0==s)return 2>=o?"1 час назад":5>=o?o-1+" часа назад":o-1+" часов назад";if(e>=n)return"сегодня";if(e>=r&&e<n)return"вчера";if(s>=30)return("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear();switch(s){case 1:return s+" день назад";case 2:case 3:case 4:return s+" дня назад";default:return s+" дней назад"}}}),define("helpers/nl2br",["require"],function(e){return function(t,n){var r=n||typeof n=="undefined"?"<br />":"<br>";return(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+r+"$2")}}),define("text!blocks/comments/__field/_answer/comments__field_answer.html",[],function(){return'<div class="comments__item__left loader_center loader_48433e">\r\n	<img class="comments__item__avatar" src="<%= avatar %>">\r\n</div>\r\n<div class="comments__item__center">\r\n	<textarea pattern="[A-Za-z0-9]{3,}$" name="comment" id="" cols="30" rows="10" placeholder="Введите комментарий"></textarea>\r\n</div>\r\n<div class="comments__item__right">\r\n	<button class="button button_red" type="submit">Написать</button>\r\n	<span class="comments__field_answer__explain">Или Cntrl+Enter</span>\r\n</div>'}),define("models/module",["require"],function(e){return{Article:1,Photo:2,Forum:3,Profile:4,Comments:5,PrivateMessages:6,Chat:7}}),define("models/group",["require","jquery","underscore","backbone","marionette"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=r.Model.extend({defaults:{isCanCreateComments:1,isCanEditOwnComments:1,isCanEditOwnCategoryComments:0,isCanEditAllComments:0,isCanDeleteOwnComments:0,isCanDeleteOwnCategoryComments:0,isCanDeleteAllComments:0,isCanCreateArticles:1,isCanEditOwnArticles:1,isCanEditOwnCategoryArticles:0,isCanEditAllArticles:1,isCanPublishOwnArticles:0,isCanPublishAllArticles:0,isCanDeleteOwnArticles:1,isCanDeleteOwnCategoryArticles:0,isCanDeleteAllArticles:0,isCanCreatePhotos:1,isCanEditOwnPhotos:1,isCanEditOwnCategoryPhotos:0,isCanEditAllPhotos:1,isCanPublishOwnPhotos:0,isCanPublishOwnCategoryPhotos:0,isCanPublishAllPhotos:0,isCanDeleteOwnPhotos:1,isCanDeleteOwnCategoryPhotos:0,isCanDeleteAllPhotos:0,isCanCreateForumThemes:1,isCanCreateForumPosts:1,isCanEditOwnForumThemes:1,isCanEditOwnCategoryForumThemes:0,isCanEditAllForumThemes:0,isCanEditOwnForumPosts:1,isCanEditOwnCategoryForumPosts:0,isCanEditAllForumPosts:0,isCanMoveOwnCategoryForumThemes:0,isCanMoveAllForumThemes:0,isCanDeleteOwnForumThemes:0,isCanDeleteOwnCategoryForumThemes:0,isCanDeleteAllForumThemes:0,isCanDeleteOwnForumPosts:0,isCanDeleteOwnCategoryForumPosts:0,isCanDeleteAllForumPosts:0,isCanCreateReputation:1,isCanEditReputation:0,isCanDeleteReputation:0,isCanDropReputation:0,isCanCreateBan:0,isCanEditBan:0,isCanDeleteBan:0,isCanCreatePrivateMessages:1,isCanCreateChatMessages:1,isCanDeleteOwnChatMessages:0,isCanDeleteAllChatMessages:0,isCanEditAllUserProfiles:0,isCanChangeAllUserGroups:0,isCanEditAllUserTitles:0,isCanGiveAwards:0,isCanRevokeAwards:0,name:"Гость"}});return s}),define("models/user",["require","jquery","underscore","backbone","marionette","models/group"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette");GroupModel=e("models/group");var s=r.Model.extend({defaults:{nickname:"",onAvatarUpdated:null},initialize:function(e){n.isUndefined(e)&&(e={}),n.isUndefined(e.avatar)&&this.set("avatar",this.getAvatar()),n.isUndefined(e.group)?this.group=new GroupModel:(this.unset("group"),n.isEmpty(e.group)||(this.group=new GroupModel(e.group)))},getAvatar:function(){var e=this.get("id"),t=this.get("onAvatarUpdated");if(n.isUndefined(e))return App.config.avatar.emptyAvatarFilename;var r=e.toString(16);while(r.length<4)r="0"+r;var i=App.config.avatar.path+"/"+r.charAt(0)+"/"+r.charAt(1)+"/"+r.charAt(2)+"/"+r+".png";return n.isNull(t)||(i+="?t="+t),i},check:function(e){return this.group.has(e)&&this.group.get(e)}});return s}),define("components/cmodel",["require","jquery","underscore","backbone","marionette"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=r.Model.extend({syncAttributes:null,allAttributes:{},setSyncAttributes:function(e){this.syncAttributes=e,this.allAttributes={}},clearSyncAttributes:function(){this.syncAttributes=null,this.attributes=this.allAttributes,this.allAttributes={}},toJSON:function(){var e=this;if(n.isArray(this.syncAttributes)){var t={};this.allAttributes=n.clone(this.attributes),n.each(this.syncAttributes,function(n){var r;switch(typeof e.attributes[n]){case"boolean":r=e.attributes[n]?1:0;break;default:r=e.attributes[n]}t[n]=r}),this.attributes=t}return r.Model.prototype.toJSON.apply(this)},destroy:function(e){var r=this;n.isUndefined(e)&&(e={}),t.ajax({url:this.url,type:"DELETE",data:this.toJSON(),error:function(){n.isFunction(e.error)&&e.error()},success:function(){r.trigger("destroy",r,r.collection,e),n.isFunction(e.success)&&e.success()}})}});return s}),define("models/like",["require","jquery","underscore","backbone","marionette","models/module","components/cmodel"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/module"),o=e("components/cmodel"),u=o.extend({url:"/ajax/like",defaults:{entry_id:0,isShare:!1,isPositive:!0,module_id:0,onCreated:0},destroy:function(){t.ajax({url:this.url,type:"DELETE",data:this.toJSON()})}},{Module:function(){return s}});return u}),define("models/comment",["require","jquery","underscore","backbone","marionette","models/module","models/user","components/cmodel","models/like"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/module"),o=e("models/user"),u=e("components/cmodel"),a=e("models/like"),f=u.extend({url:"/ajax/comment",defaults:{entry_id:0,message:null,rateCount:0,createIp:"",onCreated:0,onUpdated:0,author_id:null,parent_id:null,updater_id:null,module_id:0,authorNickname:"Undefined",onAuthorAvatarUpdated:null,isNew:!1,isRated:!1,deps:0},initialize:function(e){n.isUndefined(e)&&(e={}),n.isUndefined(e.author)&&(this.author=new o({id:e.author_id,nickname:e.authorNickname,onAvatarUpdated:e.onAuthorAvatarUpdated})),n.isUndefined(e.updater)&&(this.updater=new o({id:e.updater_id}))},toJSON:function(){var e=u.prototype.toJSON.apply(this);return!this.isSaving&&!n.isUndefined(this.author)&&n.isEmpty(this.syncAttributes)&&(e.author=this.author.toJSON()),e},validate:function(e){if(e.message.length<3)return"Сообщение должно быть длиннее 3х символов";if(n.isUndefined(e.module_id))return"Не указан модуль";if(n.isUndefined(e.entry_id))return"Не указан материал"},changeRate:function(e,t){n.isUndefined(e)&&(e=!0);var r=new a({entry_id:this.get("id"),module_id:s.Comments,isPositive:e});r.setSyncAttributes(["entry_id","module_id","isPositive"]),r.save(null,t),r.clearSyncAttributes()}},{Module:function(){return s}});return f}),define("helpers/keys",["require"],function(e){var t={ARROW_UP:38,ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ESCAPE:27,ENTER:13};return t}),define("blocks/comments/__field/_answer/comments__field_answer",["require","jquery","underscore","backbone","marionette","textblock!comments/__field/_answer.html","models/comment","block!notice","helpers/keys","helpers/nl2br"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!comments/__field/_answer.html"),o=e("models/comment"),u=e("block!notice"),a=e("helpers/keys"),f=e("helpers/nl2br"),l=r.Marionette.ItemView.extend({template:n.template(s),ui:{leftPart:".comments__item__left",message:"textarea[name=comment]",submit:"button[type=submit]"},events:{"click button[type=submit]":"submit","keydown textarea":"hotKeySubmit"},clear:function(){this.ui.message.val("")},submit:function(){var e=this,t=new o({message:this.ui.message.val(),entry_id:this.options.comments.entry_id,module_id:this.options.comments.module_id,parent_id:n.isUndefined(this.options.parent)?null:this.options.parent.model.get("id"),author_id:App.currentUser.get("id"),onAuthorAvatarUpdated:App.currentUser.get("onAvatarUpdated"),authorNickname:App.currentUser.get("nickname"),onCreated:(new Date).getTime()/1e3,isNew:!0});t.on("invalid",function(t,n){u({layout:"bottomRight",text:n}),e.ui.leftPart.removeClass("loader"),e.enable()}),this.ui.leftPart.addClass("loader"),this.disable(),this.clear();var r=n.clone(t);t.setSyncAttributes(["message","entry_id","module_id","parent_id"]),t.save(null,{success:function(t,i){var s=r.get("message");r.set("id",i),r.set("message",f(n.escape(s))),e.options.comments.collection.add(r.toJSON()),e.ui.leftPart.removeClass("loader"),e.enable()},error:function(){e.ui.leftPart.removeClass("loader"),u({layout:"bottomRight",text:"Ошибка во время сохранения"}),e.enable()}}),t.clearSyncAttributes()},hotKeySubmit:function(e){e.keyCode==a.ENTER&&e.ctrlKey&&this.submit()},disable:function(){this.ui.message.prop("disabled",!0),this.ui.submit.prop("disabled",!0)},enable:function(){this.ui.message.prop("disabled",!1),this.ui.submit.prop("disabled",!1)}});return l}),define("text!blocks/modal/modal.html",[],function(){return'<div class="overlay">\r\n	<div class="modal modal_custom modal_confirm modal_shadow">\r\n		<% if(!_.isUndefined(title)) { %><span class="modal__title"><%= title %></span><% } %>\r\n		<% if(!_.isUndefined(content)) { %><div class="modal__content"><%= content %></div><% } %>\r\n	</div>\r\n</div>'}),define("blocks/modal/modal",["require","jquery","underscore","backbone","marionette","textblock!modal.html","helpers/keys"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!modal.html"),o=e("helpers/keys"),u=r.Marionette.View.extend({template:n.template(s),title:"Вы подтверждаете данное действие?",content:"",render:function(){var e=this;this.beforeRender();var n=this.template({title:this.title,content:this.content});this.close();var r=t(n);t("body").append(r).find(".overlay").click(function(){e.close.apply(e)}),this.setElement(r),this.$el.find("input, button").focus(),this.onRender(),t(document).on("keyup",function(){e.keyUp.apply(e,arguments)})},show:function(){this.render()},beforeRender:function(){},onRender:function(){},close:function(){t("body > .overlay").remove(),this.destroy()},keyUp:function(e){switch(e.keyCode){case o.ESCAPE:this.trigger("escapeKey");break;case o.ENTER:this.trigger("enterKey")}}});return u}),define("text!blocks/modal/_confirm/modal_confirm.html",[],function(){return'<% if("undefined" !== typeof message) { %>\r\n	<div class="modal__field clearfix">\r\n		<%= message %>\r\n	</div>\r\n<% } %>\r\n<div class="modal__field modal__field_nospace modal_confirm__buttons clearfix">\r\n	<button class="button button_dark" type="cancel"><%= cancelText %></button>\r\n	<button class="button button_red" type="confirm"><%= confirmText %></button>\r\n</div>'}),define("blocks/modal/_confirm/modal_confirm",["require","jquery","underscore","backbone","marionette","block!modal","textblock!modal/_confirm.html"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!modal"),o=e("textblock!modal/_confirm.html"),u=s.extend({defaults:{cancelText:"Отменить",confirmText:"Подтвердить"},events:{"click button[type=cancel]":"cancel","click button[type=confirm]":"confirm","click .modal":"stopProgataion"},stopProgataion:function(e){e.stopPropagation()},cancel:function(){this.close(),n.isFunction(this.options.cancel)&&this.options.cancel()},confirm:function(){this.close(),n.isFunction(this.options.confirm)&&this.options.confirm()},initialize:function(e){n.isUndefined(e)&&(e={});var i=this;this.model=new r.Model(t.extend({},this.defaults,e)),n.isUndefined(e.title)||(this.title=e.title),this.content=n.template(o,this.model.toJSON()),this.on("enterKey",function(){i.confirm.apply(i)}),this.on("escapeKey",function(){i.cancel.apply(i)})}});return u}),define("text!blocks/modal/_complaint/modal_complaint.html",[],function(){return'<div class="modal__field clearfix">\r\n	<select class="input_select input_select_full" name="importance">\r\n		<option value="1" disabled selected>Укажите важность жалобы</option>\r\n		<option value="4">Критично</option>\r\n		<option value="3">Важно</option>\r\n		<option value="2">Терпимо</option>\r\n		<option value="1">Не важно</option>\r\n	</select>\r\n</div>\r\n<div class="modal__field clearfix">\r\n	<textarea pattern="[A-Za-z0-9]{3,}$"  class="input_textarea" name="comment" cols="30" rows="5" placeholder="Укажите причину жалобы"></textarea>\r\n</div>'}),function(e){e.fn.styler=function(t){var n=e.extend({wrapper:"form",idSuffix:"-styler",filePlaceholder:"Файл не выбран",fileBrowse:"Обзор...",selectSearch:!0,selectSearchLimit:10,selectSearchNotFound:"Совпадений не найдено",selectSearchPlaceholder:"Поиск...",selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:!0,onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}},t);return this.each(function(){function t(){var e="",t="",i="",s="";void 0!==r.attr("id")&&""!==r.attr("id")&&(e=' id="'+r.attr("id")+n.idSuffix+'"'),void 0!==r.attr("title")&&""!==r.attr("title")&&(t=' title="'+r.attr("title")+'"'),void 0!==r.attr("class")&&""!==r.attr("class")&&(i=" "+r.attr("class"));for(var o=r.data(),u=0;u<o.length;u++)""!==o[u]&&(s+=" data-"+u+'="'+o[u]+'"');this.id=e+s,this.title=t,this.classes=i}var r=e(this);r.is(":checkbox")?r.each(function(){if(1>r.parent("div.jq-checkbox").length){var n=function(){var n=new t,i=e("<div"+n.id+' class="jq-checkbox'+n.classes+'"'+n.title+'><div class="jq-checkbox__div"></div></div>');r.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(i).prependTo(i),i.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative",overflow:"hidden"}),r.is(":checked")&&i.addClass("checked"),r.is(":disabled")&&i.addClass("disabled"),i.on("click.styler",function(){return i.is(".disabled")||(r.is(":checked")?(r.prop("checked",!1),i.removeClass("checked")):(r.prop("checked",!0),i.addClass("checked")),r.change()),!1}),r.closest("label").add('label[for="'+r.attr("id")+'"]').click(function(e){i.click(),e.preventDefault()}),r.on("change.styler",function(){r.is(":checked")?i.addClass("checked"):i.removeClass("checked")}).on("keydown.styler",function(e){32==e.which&&i.click()}).on("focus.styler",function(){i.is(".disabled")||i.addClass("focused")}).on("blur.styler",function(){i.removeClass("focused")})};n(),r.on("refresh",function(){r.off(".styler").parent().before(r).remove(),n()})}}):r.is(":radio")?r.each(function(){if(1>r.parent("div.jq-radio").length){var i=function(){var i=new t,s=e("<div"+i.id+' class="jq-radio'+i.classes+'"'+i.title+'><div class="jq-radio__div"></div></div>');r.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(s).prependTo(s),s.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative"}),r.is(":checked")&&s.addClass("checked"),r.is(":disabled")&&s.addClass("disabled"),s.on("click.styler",function(){return s.is(".disabled")||(s.closest(n.wrapper).find('input[name="'+r.attr("name")+'"]').prop("checked",!1).parent().removeClass("checked"),r.prop("checked",!0).parent().addClass("checked"),r.change()),!1}),r.closest("label").add('label[for="'+r.attr("id")+'"]').click(function(e){s.click(),e.preventDefault()}),r.on("change.styler",function(){r.parent().addClass("checked")}).on("focus.styler",function(){s.is(".disabled")||s.addClass("focused")}).on("blur.styler",function(){s.removeClass("focused")})};i(),r.on("refresh",function(){r.off(".styler").parent().before(r).remove(),i()})}}):r.is(":file")?r.css({position:"absolute",top:0,right:0,width:"100%",height:"100%",opacity:0,margin:0,padding:0}).each(function(){if(1>r.parent("div.jq-file").length){var i=function(){var i=new t,s=e("<div"+i.id+' class="jq-file'+i.classes+'"'+i.title+' style="display: inline-block; position: relative; overflow: hidden"></div>'),o=e('<div class="jq-file__name">'+n.filePlaceholder+"</div>").appendTo(s);e('<div class="jq-file__browse">'+n.fileBrowse+"</div>").appendTo(s),r.after(s),s.append(r),r.is(":disabled")&&s.addClass("disabled"),r.on("change.styler",function(){var e=r.val();if(r.is("[multiple]"))for(var e="",t=r[0].files,i=0;i<t.length;i++)e+=(0<i?", ":"")+t[i].name;o.text(e.replace(/.+[\\\/]/,"")),""===e?(o.text(n.filePlaceholder),s.removeClass("changed")):s.addClass("changed")}).on("focus.styler",function(){s.addClass("focused")}).on("blur.styler",function(){s.removeClass("focused")}).on("click.styler",function(){s.removeClass("focused")})};i(),r.on("refresh",function(){r.off(".styler").parent().before(r).remove(),i()})}}):r.is("select")?r.each(function(){if(1>r.parent("div.jqselect").length){var s=function(){function s(t){t.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(t){var n=null;"mousewheel"==t.type?n=-1*t.originalEvent.wheelDelta:"DOMMouseScroll"==t.type&&(n=40*t.originalEvent.detail),n&&(t.stopPropagation(),t.preventDefault(),e(this).scrollTop(n+e(this).scrollTop()))})}function o(){i=0;for(len=h.length;i<len;i++){var e="",t="",n=e="",r="",s="";h.eq(i).prop("selected")&&(t="selected sel"),h.eq(i).is(":disabled")&&(t="disabled"),h.eq(i).is(":selected:disabled")&&(t="selected sel disabled"),void 0!==h.eq(i).attr("class")&&(n=" "+h.eq(i).attr("class"),s=' data-jqfs-class="'+h.eq(i).attr("class")+'"');var o=h.eq(i).data(),u;for(u in o)""!==o[u]&&(e+=" data-"+u+'="'+o[u]+'"');e="<li"+s+e+' class="'+t+n+'">'+h.eq(i).text()+"</li>",h.eq(i).parent().is("optgroup")&&(void 0!==h.eq(i).parent().attr("class")&&(r=" "+h.eq(i).parent().attr("class")),e="<li"+s+' class="'+t+n+" option"+r+'">'+h.eq(i).text()+"</li>",h.eq(i).is(":first-child")&&(e='<li class="optgroup'+r+'">'+h.eq(i).parent().attr("label")+"</li>"+e)),p+=e}}function u(){var i=new t,u=e("<div"+i.id+' class="jq-selectbox jqselect'+i.classes+'" style="display: inline-block; position: relative; z-index:'+n.singleSelectzIndex+'"><div class="jq-selectbox__select"'+i.title+' style="position: relative"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>');r.css({margin:0,padding:0}).after(u).prependTo(u);var i=e("div.jq-selectbox__select",u),l=e("div.jq-selectbox__select-text",u),d=h.filter(":selected");d.length?l.html(d.text()):l.html(h.first().text()),o();var v="";n.selectSearch&&(v='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+n.selectSearchPlaceholder+'"></div><div class="jq-selectbox__not-found">'+n.selectSearchNotFound+"</div>");var m=e('<div class="jq-selectbox__dropdown" style="position: absolute">'+v+'<ul style="position: relative; list-style: none; overflow: auto; overflow-x: hidden">'+p+"</ul></div>");u.append(m);var g=e("ul",m),y=e("li",m),E=e("input",m),S=e("div.jq-selectbox__not-found",m).hide();y.length<n.selectSearchLimit&&E.parent().hide();var T=0,N=0;y.each(function(){var t=e(this);t.css({display:"inline-block","white-space":"nowrap"}),t.innerWidth()>T&&(T=t.innerWidth(),N=t.width()),t.css({display:"block"})});var v=u.clone().appendTo("body").width("auto"),C=v.width();v.remove(),C==u.width()&&(l.width(N),T+=u.find("div.jq-selectbox__trigger").width()),T>u.width()&&m.width(T),r.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0});var k=u.outerHeight(),L=E.outerHeight(),A=g.css("max-height"),v=y.filter(".selected");1>v.length&&y.first().addClass("selected sel"),void 0===y.data("li-height")&&y.data("li-height",y.outerHeight());var O=m.css("top");"auto"==m.css("left")&&m.css({left:0}),"auto"==m.css("top")&&m.css({top:k}),m.hide(),v.length&&(h.first().text()!=d.text()&&u.addClass("changed"),u.data("jqfs-class",v.data("jqfs-class")),u.addClass(v.data("jqfs-class")));if(r.is(":disabled"))return u.addClass("disabled"),!1;i.click(function(){e("div.jq-selectbox").filter(".opened").length&&n.onSelectClosed.call(e("div.jq-selectbox").filter(".opened")),r.focus();if(!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)){var t=e(window),i=y.data("li-height"),o=u.offset().top,l=t.height()-k-(o-t.scrollTop()),h=n.selectVisibleOptions,p=5*i,d=i*h;0<h&&6>h&&(p=d),0===h&&(d="auto");var h=function(){m.height("auto").css({bottom:"auto",top:O});var e=function(){g.css("max-height",Math.floor((l-20-L)/i)*i)};e(),g.css("max-height",d),"none"!=A&&g.css("max-height",A),l<m.outerHeight()+20&&e()},v=function(){m.height("auto").css({top:"auto",bottom:O});var e=function(){g.css("max-height",Math.floor((o-t.scrollTop()-20-L)/i)*i)};e(),g.css("max-height",d),"none"!=A&&g.css("max-height",A),o-t.scrollTop()-20<m.outerHeight()+20&&e()};return!0===n.selectSmartPositioning?l>p+L+20?h():v():!1===n.selectSmartPositioning&&l>p+L+20&&h(),e("div.jqselect").css({zIndex:n.singleSelectzIndex-1}).removeClass("opened"),u.css({zIndex:n.singleSelectzIndex}),m.is(":hidden")?(e("div.jq-selectbox__dropdown:visible").hide(),m.show(),u.addClass("opened focused"),n.onSelectOpened.call(u)):(m.hide(),u.removeClass("opened"),e("div.jq-selectbox").filter(".opened").length&&n.onSelectClosed.call(u)),y.filter(".selected").length&&(0!==g.innerHeight()/i%2&&(i/=2),g.scrollTop(g.scrollTop()+y.filter(".selected").position().top-g.innerHeight()/2+i)),E.length&&(E.val("").keyup(),S.hide(),E.keyup(function(){var t=e(this).val();y.each(function(){e(this).html().match(RegExp(".*?"+t+".*?","i"))?e(this).show():e(this).hide()}),1>y.filter(":visible").length?S.show():S.hide()})),s(g),!1}}),y.hover(function(){e(this).siblings().removeClass("selected")}),y.filter(".selected").text(),y.filter(".selected").text(),y.filter(":not(.disabled):not(.optgroup)").click(function(){r.focus();var t=e(this),i=t.text();if(!t.is(".selected")){var s=t.index(),s=s-t.prevAll(".optgroup").length;t.addClass("selected sel").siblings().removeClass("selected sel"),h.prop("selected",!1).eq(s).prop("selected",!0),l.html(i),u.data("jqfs-class")&&u.removeClass(u.data("jqfs-class")),u.data("jqfs-class",t.data("jqfs-class")),u.addClass(t.data("jqfs-class")),r.change()}E.length&&(E.val("").keyup(),S.hide()),m.hide(),u.removeClass("opened"),n.onSelectClosed.call(u)}),m.mouseout(function(){e("li.sel",m).addClass("selected")}),r.on("change.styler",function(){l.html(h.filter(":selected").text()),y.removeClass("selected sel").not(".optgroup").eq(r[0].selectedIndex).addClass("selected sel"),h.first().text()!=y.filter(".selected").text()?u.addClass("changed"):u.removeClass("changed")}).on("focus.styler",function(){u.addClass("focused"),e("div.jqselect").not(".focused").removeClass("opened")}).on("blur.styler",function(){u.removeClass("focused")}).on("keydown.styler keyup.styler",function(e){var t=y.data("li-height");l.html(h.filter(":selected").text()),y.removeClass("selected sel").not(".optgroup").eq(r[0].selectedIndex).addClass("selected sel"),38!=e.which&&37!=e.which&&33!=e.which&&36!=e.which||g.scrollTop(g.scrollTop()+y.filter(".selected").position().top),40!=e.which&&39!=e.which&&34!=e.which&&35!=e.which||g.scrollTop(g.scrollTop()+y.filter(".selected").position().top-g.innerHeight()+t),32==e.which&&e.preventDefault(),13==e.which&&(e.preventDefault(),m.hide(),u.removeClass("opened"),n.onSelectClosed.call(u))}),e(document).on("click",function(t){e(t.target).parents().hasClass("jq-selectbox")||"OPTION"==t.target.nodeName||(e("div.jq-selectbox").filter(".opened").length&&n.onSelectClosed.call(e("div.jq-selectbox").filter(".opened")),E.length&&E.val("").keyup(),m.hide().find("li.sel").addClass("selected"),u.removeClass("focused opened"))})}function l(){var n=new t,i=e("<div"+n.id+' class="jq-select-multiple jqselect'+n.classes+'"'+n.title+' style="display: inline-block; position: relative"></div>');r.css({margin:0,padding:0}).after(i),o(),i.append("<ul>"+p+"</ul>");var u=e("ul",i).css({position:"relative","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}),f=e("li",i).attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none","white-space":"nowrap"}),n=r.attr("size"),l=u.outerHeight(),d=f.outerHeight();void 0!==n&&0<n?u.css({height:d*n}):u.css({height:4*d}),l>i.height()&&(u.css("overflowY","scroll"),s(u),f.filter(".selected").length&&u.scrollTop(u.scrollTop()+f.filter(".selected").position().top)),r.prependTo(i).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0}),r.is(":disabled")?(i.addClass("disabled"),h.each(function(){e(this).is(":selected")&&f.eq(e(this).index()).addClass("selected")})):(f.filter(":not(.disabled):not(.optgroup)").click(function(t){r.focus();var n=e(this);t.ctrlKey||t.metaKey||n.addClass("selected"),t.shiftKey||n.addClass("first"),t.ctrlKey||t.metaKey||t.shiftKey||n.siblings().removeClass("selected first");if(t.ctrlKey||t.metaKey)n.is(".selected")?n.removeClass("selected first"):n.addClass("selected first"),n.siblings().removeClass("first");if(t.shiftKey){var i=!1,s=!1;n.siblings().removeClass("selected").siblings(".first").addClass("selected"),n.prevAll().each(function(){e(this).is(".first")&&(i=!0)}),n.nextAll().each(function(){e(this).is(".first")&&(s=!0)}),i&&n.prevAll().each(function(){if(e(this).is(".selected"))return!1;e(this).not(".disabled, .optgroup").addClass("selected")}),s&&n.nextAll().each(function(){if(e(this).is(".selected"))return!1;e(this).not(".disabled, .optgroup").addClass("selected")}),1==f.filter(".selected").length&&n.addClass("first")}h.prop("selected",!1),f.filter(".selected").each(function(){var t=e(this),n=t.index();t.is(".option")&&(n-=t.prevAll(".optgroup").length),h.eq(n).prop("selected",!0)}),r.change()}),h.each(function(t){e(this).data("optionIndex",t)}),r.on("change.styler",function(){f.removeClass("selected");var t=[];h.filter(":selected").each(function(){t.push(e(this).data("optionIndex"))}),f.not(".optgroup").filter(function(n){return-1<e.inArray(n,t)}).addClass("selected")}).on("focus.styler",function(){i.addClass("focused")}).on("blur.styler",function(){i.removeClass("focused")}),l>i.height())&&r.on("keydown.styler",function(e){38!=e.which&&37!=e.which&&33!=e.which||u.scrollTop(u.scrollTop()+f.filter(".selected").position().top-d),40!=e.which&&39!=e.which&&34!=e.which||u.scrollTop(u.scrollTop()+f.filter(".selected:last").position().top-u.innerHeight()+2*d)})}var h=e("option",r),p="";r.is("[multiple]")?l():u()};s(),r.on("refresh",function(){r.off(".styler").parent().before(r).remove(),s()})}}):r.is(":reset")&&r.on("click",function(){setTimeout(function(){r.closest(n.wrapper).find("input, select").trigger("refresh")},1)})}).promise().done(function(){n.onFormStyled.call()})}}(jQuery),define("formstyler",["jquery"],function(){}),define("blocks/input/_select/input_select",["require","jquery","underscore","backbone","marionette","formstyler"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette");e("formstyler");var s=r.Marionette.View.extend({initialize:function(){this.$el.styler()}});return s}),define("blocks/modal/_complaint/modal_complaint",["require","jquery","underscore","backbone","marionette","block!modal/_confirm","textblock!modal/_complaint.html","block!input/_select","block!notice"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!modal/_confirm"),o=e("textblock!modal/_complaint.html"),u=e("block!input/_select"),a=e("block!notice"),f=s.extend({ui:{importance:"select[name=importance]",comment:"textarea[name=comment]"},confirm:function(){return s.prototype.confirm.apply(this,arguments)},initialize:function(e){this.model.set("message",n.template(o,this.model.toJSON())),e=this.model.toJSON(),e.title="Заполните форму жалобы";var t=this.model.clone();s.prototype.initialize.apply(this,arguments),this.model=t,this.model.on("invalid",this.onNotice,this)},onNotice:function(e,t){a({layout:"bottomRight",text:t})},onRender:function(){this.bindUIElements(),new u({el:this.ui.importance})},confirm:function(){var e=this;return this.model.set({importance:this.ui.importance.val(),comment:this.ui.comment.val()}),this.model.setSyncAttributes(["id","entry_id","module_id","importance","comment"]),this.model.save(null,{success:function(){e.onNotice.call(e,e.model,"Жалоба отправлена")},error:function(){e.onNotice.call(e,e.model,"Возникла ошибка при отправке жалобы")}}),this.model.clearSyncAttributes(),s.prototype.confirm.apply(e,arguments)}});return f}),define("models/complaint",["require","jquery","underscore","backbone","marionette","models/user","models/module","components/cmodel"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/user"),o=e("models/module"),u=e("components/cmodel"),a=u.extend({url:"/ajax/complaint",defaults:{importance:0,entry_id:null,onCreated:null,comment:"",sender_id:null,module_id:null},validate:function(e){if(e.comment.length<3)return"Комментарий должен быть длиннее 3х символов";if(n.isUndefined(e.module_id))return"Не указан модуль";if(n.isUndefined(e.entry_id))return"Не указан материал"}});return a}),define("blocks/comments/__item/comments__item",["require","jquery","underscore","backbone","marionette","textblock!comments/__item.html","helpers/templateDate","helpers/nl2br","block!comments/__field/_answer","block!notice","block!modal/_confirm","block!modal/_complaint","models/complaint","models/module","helpers/keys"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!comments/__item.html"),o=e("helpers/templateDate"),u=e("helpers/nl2br"),a=e("block!comments/__field/_answer"),f=e("block!notice"),l=e("block!modal/_confirm"),c=e("block!modal/_complaint"),h=e("models/complaint"),p=e("models/module"),d=e("helpers/keys"),v=r.Marionette.ItemView.extend({isEditing:!1,tagName:"li",className:"comments__item",template:n.template(s),ui:{normal:".comments__item__normal:eq(0)",edit:".comments__item__edit:eq(0)",answer:".comments__field_answer:eq(0)",editMessage:"textarea:eq(0)",content:".comments__item__text__content:eq(0)",leftPart:".comments__item__left:eq(0)",submit:"button[type=submit]:eq(0)",cancel:"button[type=cancel]:eq(0)",controls:".topic__item__user__controls:eq(0)",rate:".comments__item__rate:eq(0)"},events:{"click a[data-type=answer]:eq(0)":"toggleAnswer","click a[data-type=edit]:eq(0)":"toggleEdit","click a[data-type=delete]:eq(0)":"delete","click a[data-type=complaint]:eq(0)":"showComplain","click button[type=submit]:eq(0)":"submit","click button[type=cancel]:eq(0)":"toggleEdit","keydown textarea:eq(0)":"hotKeySubmit","click .button__controls_minus:eq(0)":"minus","click .button__controls_plus:eq(0)":"plus"},templateHelpers:{templateDate:o,nl2br:u},initialize:function(){var e=this;this.model.on("invalid",this.onError,this);var t=e.model.get("parent_id");if(!n.isNull(t)){var r=this.options.comments.collection.find(function(e){return e.get("id")==t});this.model.set("deps",r.get("deps")+1)}},onChange:function(){var e=this;this.model.setSyncAttributes(["id","message"]),this.ui.leftPart.addClass("loader"),this.disable(),this.model.save(null,{success:function(){e.toggleEdit()},error:function(){e.onError.call(e,null,"Ошибка сохранения")}}),this.model.clearSyncAttributes()},onError:function(e,t){f({layout:"bottomRight",text:t}),this.ui.leftPart.removeClass("loader"),this.disable()},onRender:function(e){this.$el.attr("data-id",this.model.get("id")),this.answerView=new a({el:this.ui.answer,model:App.currentUser,comments:this.options.comments,parent:this}),this.answerView.render()},toggleAnswer:function(e){this.ui.answer.toggle(),e.stopPropagation()},"delete":function(e){var t=this,n=new l({message:"Вы подтверждаете удаление?",title:"Удалить комментарий",cancelText:"Отменить",confirmText:"Подтвердить",confirm:function(){t.model.setSyncAttributes(["id"]),t.model.destroy(),t.options.comments.collection.remove(t.model),t.model.clearSyncAttributes()}});n.show(),e.stopPropagation()},toggleEdit:function(e){this.ui.normal.toggle(),this.ui.edit.toggle(),this.enable(),this.ui.leftPart.removeClass("loader"),this.isEditing=!this.isEditing},submit:function(e){var t=this.ui.editMessage.val();t==this.model.get("message")?this.toggleEdit():(this.ui.content.html(u(n.escape(t))),this.model.set("message",t),this.onChange())},disable:function(){this.ui.editMessage.prop("disabled",!0),this.ui.submit.prop("disabled",!0)},enable:function(){this.ui.editMessage.prop("disabled",!1),this.ui.submit.prop("disabled",!1)},hotKeySubmit:function(e){e.keyCode==d.ENTER&&e.ctrlKey&&this.isEditing&&this.submit(),e.keyCode==d.ESCAPE&&this.isEditing&&this.toggleEdit()},showComplain:function(){var e=new h({module_id:p.Comments,entry_id:this.model.get("id")}),t=new c({model:e});t.show()},changeRate:function(e){var t=this;this.ui.controls.hide(),this.model.changeRate(e,{success:function(){f({layout:"bottomRight",text:"Сохранено"})},error:function(){f({layout:"bottomRight",text:"Ошибка во время сохранения"}),t.ui.controls.show();debugger}});var n=this.model.get("rateCount")*1+(e?1:-1);this.ui.rate.html(n),n<1?this.ui.rate.hasClass("comments__item__rate_negative")||this.ui.rate.addClass("comments__item__rate_negative"):this.ui.rate.hasClass("comments__item__rate_negative")&&this.ui.rate.removeClass("comments__item__rate_negative")},minus:function(e){this.changeRate(!1),e.stopPropagation()},plus:function(e){this.changeRate(!0),e.stopPropagation()}});return v}),define("collections/comments",["require","jquery","underscore","backbone","marionette","models/comment"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/comment"),o=r.Collection.extend({model:s,url:"/ajax/comment/list",defaultCount:10});return o}),define("blocks/comments/comments",["require","jquery","underscore","backbone","marionette","textblock!comments.html","block!comments/__item","collections/comments","block!comments/__field/_answer"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!comments.html"),o=e("block!comments/__item"),u=e("collections/comments"),a=e("block!comments/__field/_answer"),f=r.Marionette.CompositeView.extend({isLoaded:!1,template:n.template(s),childView:o,childViewContainer:".comments__list",collection:new u,childViewOptions:{},ui:{answer:".comments__field_answer:eq(0)",commentsMore:".comments__more",commentsNumber:".comments__header__item",commentsMoreNumber:".comments__more__number",list:".comments__list"},initialize:function(){var e=this;this.module_id=this.$el.data("moduleid"),this.entry_id=this.$el.data("entryid"),this.childViewOptions.comments=this,t(window).add(t(".modal_wrapper")).on("scroll resize",function(){e.updateVisible.apply(e,arguments)})},updateVisible:function(){if(this.isLoaded||this.$el.offset().top>t(window).scrollTop()+t(window).height())return;this.fetch()},fetch:function(){var e=this;this.collection.fetch({data:t.param({module_id:this.module_id,entry_id:this.entry_id}),success:function(){e.render()},error:function(){e.render()}}),this.isLoaded=!0},onRender:function(){this.answerView=new a({el:this.ui.answer,model:App.currentUser,comments:this}),this.answerView.render(),this.ui.list.removeClass("loader"),this.collection.length>0&&this.ui.commentsNumber.html(this.collection.length)},onAddChild:function(e){e.model.isNew&&(e.$el.detach(),this.ui.list.prepend(e.$el));var t=e.model.get("parent_id");if(!n.isNull(t)){var r=this.$el.find(".comments__item[data-id="+t+"] > .comments__list__inner");e.$el.detach(),r.append(e.$el)}}});return f}),define("blocks/button/_like/button_like",["require","jquery","underscore","backbone","marionette","models/like"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/like"),o=r.Marionette.View.extend({isShare:!1,ui:{number:".button__number"},events:{click:"click"},getNumber:function(){return this.ui.number.text()*1},initialize:function(){this.delegateEvents(),this.bindUIElements(),this.model=new s({entry_id:this.$el.data("entryid"),module_id:this.$el.data("moduleid"),isShare:this.isShare}),this.buttonShareElement=this.$el.parent().find(".button_share")},click:function(){this.isActive=this.$el.hasClass("button_active"),this.model.setSyncAttributes(["id","entry_id","module_id","isShare"]),this.isActive?(this.model.destroy(),this.$el.removeClass("button_active"),this.ui.number.html(-1+this.getNumber()),this.buttonShareElement.hasClass("button_active")&&(this.buttonShareElement.removeClass("button_active"),this.buttonShareElement.find(".button__number").html(-1+this.buttonShareElement.text()*1))):(this.model.save(),this.$el.addClass("button_active"),this.ui.number.html(this.getNumber()+1)),this.model.clearSyncAttributes()}});return o}),define("blocks/button/_share/button_share",["require","jquery","underscore","backbone","marionette","block!button/_like"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!button/_like"),o=s.extend({isShare:!0,initialize:function(){s.prototype.initialize.apply(this,arguments),this.likeButtonElement=this.$el.parent().find(".button_like")},click:function(){s.prototype.click.apply(this,arguments),!this.isActive&&!this.likeButtonElement.hasClass("button_active")&&(this.likeButtonElement.addClass("button_active"),this.likeButtonElement.find(".button__number").html(1+this.likeButtonElement.text()*1))}});return o}),function(e,t){function c(e,n,i){typeof n=="function"&&(i=n,n=null);if(n&&t.getElementById(n))return;e.charAt(0)=="+"&&(e=r+"/"+e.substring(1)),s=t.createElement("script"),s.type="text/javascript",s.charset="UTF-8",s.async=!0,typeof n=="string"&&(s.id=n),s.src=e;if(typeof i=="function"){var o=!1;s.onreadystatechange=function(){this.readyState=="complete"&&!o&&(o=!0,i())},s.onload=function(){o||(o=!0,i())}}u.appendChild(s)}function h(e){var n=t.createElement("style");n.setAttribute("type","text/css"),u.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(t.createTextNode(e))}function d(e){return{pageX:typeof e.pageX!="undefined"?e.pageX:e.clientX+t.body.scrollLeft+a.scrollLeft,pageY:typeof e.pageY!="undefined"?e.pageY:e.clientY+t.body.scrollTop+a.scrollTop}}function v(){return{width:e.innerWidth||a.clientWidth||f&&f.clientWidth,height:Math.max(f&&f.scrollHeight,f&&f.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight)}}function m(e,t){var n=typeof t!="undefined"?0:1;return e>=1e9?(e/1e9).toFixed(n).replace(/\.0$/,"")+"G":e>=1e6?(e/1e6).toFixed(n).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(n).replace(/\.0$/,"")+"K":e}function g(e){return e.small==1?"small":e.medium==1?"medium":"big"}function y(e,t){return t||(t=e,e=0),Math.floor(Math.random()*(t-e+1))+e}var n=/^((https|chrome-extension):)/i.test(e.location.protocol)?"https":"http",r=n+"://share.pluso.ru",i="4080065276158134629",o="getElementsByTagName",u=t[o]("body")[0],a=t.documentElement,f=t.body,l=0;Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return t;return-1}),Array.prototype.map||(Array.prototype.map=function(e){var t=[];for(var n=0,r=this.length;n<r;n++)t.push(e(this[n]));return t});var b=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e)},w=t.querySelectorAll?function(e,n){return(n||t).querySelectorAll("."+e)}:function(e,n){if(!e)return[];var r=(n||t)[o]("*"),i=[];for(var s=0,u=r.length;s<u;s++){var a=r[s].className.split(" ");a.indexOf(e)>-1&&i.push(r[s])}return i},E=encodeURIComponent,S=function(e){if(typeof e.length!="undefined")return e.slice(0);var t={};for(var n in e)typeof e[n]=="object"?t[n]=S(e[n]):t[n]=e[n];return t},x=function(e){return Object.prototype.toString.call(e)==="[object Array]"},T=function(e,t,n){var r=e.pluso.params.lang;return n?pluso.lang[r]&&pluso.lang[r].titles&&pluso.lang[r].titles[t]||n:pluso.lang[r]&&pluso.lang[r][t]||pluso.lang.ru&&pluso.lang.ru[t]||t},N=function(e,t){function u(){if(!n){if(!t.body)return setTimeout(u,13);n=!0;if(i){var e,r=0;while(e=i[r++])e.call(null);i=null}}}function f(){if(r)return;r=!0;if(t.readyState==="complete")return u();if(t.addEventListener)t.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",u,!1);else if(t.attachEvent){t.attachEvent("onreadystatechange",s),e.attachEvent("onload",u);var n=!1;try{n=e.frameElement==null}catch(i){}a.doScroll&&n&&l()}else o=e.onload,e.onload=function(e){o(e),u()}}function l(){if(n)return;try{a.doScroll("left")}catch(e){setTimeout(l,1);return}u()}var n=!1,r=!1,i=[],s,o;return t.addEventListener?s=function(){t.removeEventListener("DOMContentLoaded",s,!1),u()}:t.attachEvent&&(s=function(){t.readyState==="complete"&&(t.detachEvent("onreadystatechange",s),u())}),function(e){f(),n?e.call(null):i.push(e)}}(e,t);if(e.pluso&&typeof e.pluso.start=="function")return;e.pluso||(e.pluso={}),pluso.cnt=0,pluso.uid=i,e.pluso.lang||(e.pluso.lang={}),pluso.lang.ru={close:"Закрыть",get:"Получите свои кнопки",share:"Поделитесь с друзьями!",bookmark:"Скопируйте и добавьте эту ссылку в Закладки",buy:"Купить"},pluso.lang.ua={close:"Закрити",get:"Отримаєте свої кнопки",share:"Поділитеся з друзями!",bookmark:"Скопіюйте та додайте цю посилання в Закладки",buy:"Купити"},pluso.lang.by={close:"Зачыніць",get:"Атрымаеце свае кнопкі",share:"Падзяліцеся з сябрамі!",bookmark:"Скапіюйце і дадайце гэтую спасылку ў Закладкі",buy:"Купіць"},pluso.lang.en={close:"Close",get:"Get Your Buttons",share:"Share With Friends!",bookmark:"Copy the link and paste to your Bookmarks",buy:"Buy",titles:{vkontakte:"VKontakte",odnoklassniki:"Odnoklassniki",moimir:"MoiMir@Mail.Ru",bobrdobr:"BobrDobr",vkrugu:"VKruguDruzei",yandex:"ya.ru",yazakladki:"Yandex.Bookmarks",moikrug:"MoiKrug",googlebookmark:"Google Bookmarks",yahoo:"Yahoo Bookmarks",moemesto:"MoeMesto",bookmark:"Add to Favorite",email:"Send by E-mail",print:"Print"}},pluso.css=[[["",".pluso"],"position:relative;z-index:1;display:inline-block;padding:0;-webkit-border-radius:22px;-moz-border-radius:22px;border-radius:22px;background:transparent;text-align:left;font-size:0;line-height:0;*display:inline;*zoom:1;"],[["",".pluso span"],"float:none;"],[["0","a:active"]," opacity:.6; "],[[32,".pluso-wrap a"],"display:inline-block;vertical-align:inherit;margin:5px 0 0 5px;padding:0;width:40px;height:40px;background:url({i}/img/pluso-like/round/big/04.png) 0 0 transparent no-repeat;"],[[64,".pluso-wrap a"],"display:inline-block;vertical-align:inherit;margin:3px 0 0 3px;padding:0;width:20px;height:20px;background:url({i}/img/pluso-like/round/small/04.png) 0 0 transparent no-repeat;"],[[16,".pluso-wrap a"],"display:inline-block;vertical-align:inherit;margin:3px 0 0 3px;padding:0;width:30px;height:30px;background:url({i}/img/pluso-like/round/medium/04.png) 0 0 transparent no-repeat;"],[["",".pluso-wrap"],"margin:0px !important;"],[["0",".pluso-wrap"],"position:relative;z-index:1;display:inline-block;padding:0 5px 5px 0;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;background:{bb};text-align:left;font-size:0;line-height:0;*display:inline;*zoom:1;"],[[64,".pluso-wrap"],"padding:0 3px 3px 0px;"],[[66,".pluso-wrap"],"-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;"],[[16,".pluso-wrap"],"padding:0 3px 3px 0px;"],[[18,".pluso-wrap"],"-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;"],[[34,".pluso-wrap"],"-webkit-border-radius:22px;-moz-border-radius:22px;border-radius:22px;"],[[544,""],"width:50px;"],[[800,""],"width:95px;"],[[576,""],"width:26px;"],[[528,""],"width:36px;"],[[832,""],"width:49px;"],[[784,""],"width:69px;"],[[32,"a.pluso-more"],"width:40px;height:40px;background:url({i}/img/plus.png) 0 -60px no-repeat!important;position:relative;"],[[64,"a.pluso-more"],"width:20px;height:20px;background:url({i}/img/plus.png) 0 0 no-repeat!important;position:relative;"],[[16,"a.pluso-more"],"width:30px;height:30px;background:url({i}/img/plus.png) 0 -25px no-repeat!important;position:relative;"],[[1280,".pluso-wrap a"],"float:left;text-align:middle;"],[[2048,".pluso-wrap > div"],"cursor:default;display:inline-block;text-decoration:none !important;color:white;"],[[2048,".pluso-wrap a"],"margin:0px;"],[[2048,".pluso-wrap div b"],"float:right;font-weight:normal;color:white;"],[[2080,".pluso-wrap > div"],"border-radius:6px;margin-right:4px;"],[[2080,".pluso-wrap a"],"width:40px;"],[[2080,".pluso-wrap div b"],"padding-left:5px;padding-right:10px;font-size:16px;line-height:40px;"],[[2064,".pluso-wrap >div"],"border-radius:4px;margin-right:3px;height:30px;"],[[2064,".pluso-wrap a"],"margin:2px;"],[[2064,".pluso-wrap div b"],"padding-right:3px;font-size:12px;line-height:30px;"],[[2112,".pluso-wrap >div"],"border-radius:3px;margin-right:3px;height:20px;"],[[2112,".pluso-wrap a"],"margin:1px;"],[[2112,".pluso-wrap div b"],"padding-right:3px;font-size:11px;line-height:20px;"],[[576,"a.pluso-more"],"margin-bottom:-12px;*left:5px;"],[[832,"a.pluso-more"],"margin-left:13px;*left:13px;"],[[832,".pluso-wrap a:nth-child(even).pluso-more"],"margin-left:3px;margin-bottom:0px"],[[1216,"a.pluso-more"],"margin-right:-12px;*left:5px;"],[[1344,"a.pluso-more"],"margin-right:-12px;top:-12px;*left:auto;"],[[528,"a.pluso-more"],"margin-bottom:-12px;*left:5px;"],[[784,"a.pluso-more"],"margin-left:18px;*left:18px;"],[[784,".pluso-wrap a:nth-child(even).pluso-more"],"margin-left:3px;margin-bottom:0px;"],[[1280,".pluso-wrap a:nth-child(even).pluso-more"],"top: 0px;"],[[1168,"a.pluso-more"],"margin-right:-12px;*left:5px;"],[[1296,"a.pluso-more"],"margin-right:-18px;top:-17px;*left:auto;"],[[1296,".pluso-wrap a:nth-child(even).pluso-more"],"top:inherit;"],[[544,"a.pluso-more"],"margin-bottom:-22px;*left:5px;"],[[800,"a.pluso-more"],"margin-left:27px;*left:27px;"],[[800,".pluso-wrap a:nth-child(even).pluso-more"],"margin-left:5px;margin-bottom:0px;"],[[1056,"a.pluso-more"],"margin-right:-22px;*left:5px;"],[[1312,"a.pluso-more"],"top:-22px;*left:auto;"],[[1312,".pluso-wrap a:nth-child(even).pluso-more"],"top:inherit;"],[[64,".pluso-counter b"],"position:relative;padding:2px 4px;-webkit-border-radius: 22px;-moz-border-radius: 22px;border-radius: 22px;background:{bc};box-shadow:0 0 3px rgba(0,0,0,.3);color:{bt};white-space: nowrap;font:11px/12px Tahoma, Geneva, sans-serif!important;"],[[1088,".pluso-counter"],"position:relative;padding-right:18px;"],[[1088,".pluso-counter b"],"top:-6px;left:18px;"],[[1344,".pluso-counter b"],"top:-16px;left:18px;"],[[1088,".pluso-counter b:after"],"position: absolute;top: 5px;left: -6px;z-index: 0;display: block;width: 0;border-width: 4px 8px 4px 0;border-style: solid;border-color: transparent {bc};content: '';"],[[576,".pluso-counter"],"position:relative;display:block;margin-top:20px;width:100%;text-align:center;"],[[576,".pluso-counter:after"],"position: absolute;top: -5px;left: 50%;margin-left:-4px;z-index: 10;display: block;width: 0;border-width: 0 4px 8px;border-style: solid;border-color: {bc} transparent;content: '';"],[[16,".pluso-counter b"],"position:relative;padding:6px 8px;-webkit-border-radius: 30px;-moz-border-radius: 22px;border-radius: 30px;background:{bc};box-shadow:0 0 3px rgba(0,0,0,.3);color:{bt};white-space: nowrap;font:12px/14px Tahoma, Geneva, sans-serif!important;"],[[1040,".pluso-counter"],"position:relative;padding-right:18px;"],[[1040,".pluso-counter b"],"top:-10px;left:18px;"],[[1296,".pluso-counter b"],"top:-27px;left:23px;"],[[1040,".pluso-counter b:after"],"position: absolute;top: 9px;left: -6px;z-index: 0;display: block;width: 0;border-width: 4px 8px 4px 0;border-style: solid;border-color: transparent {bc};content: '';"],[[528,".pluso-counter"],"position:relative;display:block;margin-top:20px;width:100%;text-align:center;"],[[528,".pluso-counter:after"],"position: absolute;top: -10px;left: 50%;margin-left:-4px;z-index: 10;display: block;width: 0;border-width: 0 4px 8px;border-style: solid;border-color: {bc} transparent;content: '';"],[[32,".pluso-counter b"],"position:relative;padding:8px 12px;-webkit-border-radius: 22px;-moz-border-radius: 22px;border-radius: 122px;background:{bc};box-shadow:0 0 3px rgba(0,0,0,.3);color:{bt};white-space:nowrap;font:16px/40px Tahoma, Geneva, sans-serif!important;"],[[1056,".pluso-counter"],"position:relative;padding-right:28px;"],[[1056,".pluso-counter b"],"top:-14px;left:28px;"],[[1312,".pluso-counter b"],"top:-35px;left:28px;"],[[1056,".pluso-counter b:after"],"position: absolute;top: 13px;left: -8px;z-index: 0;display: block;width: 0;border-width: 5px 9px 5px 0;border-style: solid;border-color: transparent {bc};content: '';"],[[544,".pluso-counter"],"position:relative;display:block;margin-top:30px;width:100%;text-align:center;"],[[544,".pluso-counter:after"],"position: absolute;top: -8px;left: 50%;margin-left:-4px;z-index: 10;display: block;width: 0;border-width: 0 5px 11px;border-style: solid;border-color: {bc} transparent;content: '';"],[[128,"br"]," display:none; "],[[4,".pluso-counter"]," display:none; "],[["",".pluso-box"],"position:absolute;border:4px solid #eaebea;width:310px;height:225px;overflow:hidden;z-index: 777;background:#f2f2f2;font:normal normal 12px/25px Tahoma, Geneva, sans-serif;box-shadow:0 4px 10px rgba(0, 0, 0, 0.4);text-align:left;-webkit-border-radius:14px;-moz-border-radius:14px;border-radius:14px;"],[["",".pluso-box a b"],"width:20px;height:20px;position:absolute;left:0;top:2px;"],[["",".pluso-box a:visited,.pluso-box a:hover,.pluso-box a"],"font:normal normal 12px/25px Tahoma, Geneva, sans-serif;color:#7f7f7f;text-decoration:none;white-space:nowrap;padding:0 0 0 25px;margin:0 0 0 5px;border:0;position:relative;width:115px;float:left;"],[["",".pluso-box .pluso-list"],"background:#ffffff;border-radius:14px;width:100%;height:200px;overflow:auto;position:absolute;left:0;top:25px;"],[["",".pluso-box a.pluso-logo"],"background:url({i}/img/pluso-like/logo-mini.png) 0 5px no-repeat;width:66px;height:19px;border:0;text-indent:-600em;padding:0 0 0 12px;margin:0 0 0 9px;"],[["",".pluso-box a.pluso-go"],"color:#4c4c4c;text-decoration:underline;padding-left:0;"],[["",".pluso-box a.pluso-close,.pluso-box a.pluso-close:hover,.pluso-box a.pluso-close:visited"],"float:right;width:20px;text-align:center;font-size:12px;line-height:20px;width:20px;margin:1px 1px 0 0;padding:0;font-weight:bold;color:#4c4c4c;text-decoration:none;background:#ffffff;border-radius:15px;border:1px solid #eaebea;"],[["",".pluso-box a.pluso-close:hover"],"background:#7f7f7f;color:#ffffff;border-color:transparent"],[["",".pluso-tip"],"cursor:pointer;position:absolute;padding:10px;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;white-space:nowrap;font:bold 14px/12px Tahoma, Geneva, sans-serif!important;color:#fff;background:#f78d1d;background:-webkit-gradient(linear, left top, left bottom, from(#7ed263), to(#3d9530));background:-webkit-linear-gradient(top,#7ed263,#3d9530);background:-moz-linear-gradient(top,#7ed263,#3d9530);background:-ms-linear-gradient(top,#7ed263,#3d9530);background:-o-linear-gradient(top,#7ed263,#3d9530);background:linear-gradient(top,#7ed263,#3d9530);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#7ed263, endColorstr=#3d9530);box-shadow:0 0 5px rgba(0,0,0,.5), inset 0 0 0px 1px rgba(0,0,0,.3)"],[["",".pluso-tip:after"],"position:absolute;z-index:0;display:block;width:0;height:0;border-style: solid;content:''"],[["",".pluso-tip.pluso-left-arrow:after"],"top:40%;right:-6px;border-color:transparent #447b36;border-width:6px 0px 6px 6px"],[["",".pluso-tip.pluso-top-arrow:after"],"bottom:-6px;border-color:#27601f transparent;border-width:6px 6px 0px 6px"],[["",".pluso-tip.pluso-bottom-arrow:after"],"top:-6px;border-color:#447b36 transparent;border-width:0px 6px 6px 6px"],[["","@keyframes pluso-market-animate"],"0% { opacity:1 } 50%{ opacity:.3} 100% { opacity:1}"],[["","@-webkit-keyframes pluso-market-animate"],"0% { opacity:1 } 50%{ opacity:.3} 100% { opacity:1}"],[["",".pluso-overlay-background"],'height:100%;width:100%;position:fixed;left:0;top:0;z-index:999999999;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";padding:0;margin:0;'],[["",".pluso-overlay-box"],"width:910px;margin: 50px auto 0;overflow:hidden;height:85%;background-color: #f5f5f5;border:1px solid #c4c4c4;padding:0!important;text-align:left;box-shadow:0 4px 12px rgba(0, 0, 0, 0.4), 0 1px 0 rgba(255, 255, 255, 0.5) inset;border-radius:10px;"],[["","a.pluso-overlay-close,a.pluso-overlay-close:hover,a.pluso-overlay-close:visited"],"position:absolute;left:50%;margin:0 0 0 442px;top:38px;width:26px;height:26px;text-align:center;font:normal 20px/22px Arial;padding:0;color:#878787;text-decoration:none;background:#ffffff;border-radius:26px;border:2px solid #c4c4c4;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;"],[["","a.pluso-overlay-close:hover"],"background:#7f7f7f;color:#ffffff;border-color:transparent"],[["",".pluso-overlay-box div"],"margin:20px 0 0 0;padding:0 0 12px 0;border-bottom:1px solid #c4c4c4;"],[["",".pluso-overlay-box ul"],"list-style:none;margin:10px 0 10px 0px;padding:0;height:85%;overflow:auto;"],[["",".pluso-overlay-box li"],"width:210px;height:260px;background:#ffffff;border-radius:10px;border:none;float:left;padding:0;margin:0 0px 10px 10px;"],[["",".pluso-overlay-box li a"],"display:block;text-decoration:none;margin:0;padding:0;height:100%;overflow:hidden;position:relative;"],[["",".pluso-overlay-box li a span, .pluso-overlay-box li a:hover span"],"position: relative;width: 190px;height:150px;border:1px solid #c4c4c4;overflow:hidden;margin:10px auto 5px auto;padding:0;text-align:center;display:block;"],[["",".pluso-overlay-box li a:hover span"],"box-shadow:0 0 5px #c4c4c4;-webkit-box-shadow:0 0 5px #c4c4c4;border:1px solid #c4c4c4"],[["",".pluso-overlay-box li a em"],"font:normal bold 15px/20px Arial;float:left;color:#e86340;padding:0px 0 0 10px;margin:0;"],[["",".pluso-overlay-box li a em u"],"font:normal normal 12px/12px Arial;text-decoration:none;display:block;color:#eb6338;padding:0;margin:0;"],[["",".pluso-overlay-box li a strong"],"font:normal 11px/14px Arial;display:block;padding:0 10px;color:#454545;position:relative;bottom:auto;height:42px;width:180px;overflow:hidden;margin:0 0 5px 0;border:0;"],[["",".pluso-overlay-box li a:hover strong"],"height:42px;overflow:auto;padding:0 10px;border:0;"],[["",".pluso-overlay-box li a b, .pluso-overlay-box li a b:hover, .pluso-overlay-box li a b:active"],"font:bold normal 15px/18px Arial, sans-serif;color: #ffffff;padding-top: 7px;padding-right: 12px;padding-bottom: 7px;padding-left: 12px;text-decoration: none;-webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px;-webkit-box-shadow: inset 0px -1px 2px rgba(255,255,255,.5);-moz-box-shadow: inset 0px -1px 2px rgba(255,255,255,.5);box-shadow: inset 0px -1px 2px rgba(255,255,255,.5);text-shadow: 0px 1px 2px #3d8a33;border:solid #4bb543 1px;background:-webkit-gradient(linear, 0 0, 0 100%, from(#95e488), to(#20a517));background: -moz-linear-gradient(top, #95e488, #20a517);background: -o-linear-gradient(top, #95e488, #20a517);-ms-filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#95e488, endColorStr=#20a517);filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#95e488, endColorStr=#20a517);display:inline-block;float:right;bottom:auto;right:10px;position:relative;"],[["",".pluso-overlay-box li a b:hover"],"background:-webkit-gradient(linear, 0 0, 0 100%, from(#b1f4a3), to(#27c21c));background: -moz-linear-gradient(top, #b1f4a3, #27c21c);background:-o-linear-gradient(top, #b1f4a3, #27c21c);-ms-filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#b1f4a3, endColorStr=#27c21c);filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#b1f4a3, endColorStr=#27c21c);"],[["",".pluso-overlay-box li a b:active"],"background:-webkit-gradient(linear, 0 0, 0 100%, from(#20a517), to(#95e488));background: -moz-linear-gradient(top, #20a517, #95e488);background:-o-linear-gradient(top, #20a517, #95e488);-ms-filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#20a517, endColorStr=#95e488);filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#20a517, endColorStr=#95e488);"]],pluso.tree=[["sepcounter","horizontal","vertical","multiline","line","small","big","medium","counter","nocounter","round","square"],{horizontal:"vertical",multiline:"line",small:["big","medium"],counter:"nocounter",round:"square",vertical:"horizontal",line:"multiline",big:["small","medium"],nocounter:"counter",square:"round",medium:["small","big"]},[["round","square"],["small","big","medium"]]],pluso.titles=[["vkontakte","ВКонтакте",5,3,"#41658b"],["odnoklassniki","Одноклассники",4,4,"#f4960f"],["facebook","Facebook",1,1,"#39579a"],["twitter","Twitter",2,2,"#00abf0"],["google","Google+",7,5,"#be3308"],["moimir","Мой Мир@Mail.Ru",8,7,"#2f69a1"],["pinterest","Pinterest",6,17,"#ce1d1f"],["livejournal","LiveJournal",9,6,"#6899c4"],["tumblr","Tumblr",3,22,"#2e4e67"],["liveinternet","LiveInternet",10,8,"#27819b"],["springpad","Springpad",11,19,"#f7b42f"],["stumbleupon","StumbleUpon",12,20,"#ed4713"],["myspace","mySpace",13,15,"#1d1d1d"],["formspring","Formspring.me",14,13,"#4693d7"],["blogger","Blogger",15,9,"#f58220"],["digg","Digg",16,11,"#165495"],["surfingbird","Surfingbird",17,21,"#14aef8"],["bobrdobr","БобрДобр",18,24,"#763c34"],["readability","Readability",19,18,"#9d0000"],["instapaper","Instapaper",20,14,"#6b6b6b"],["evernote","Evernote",21,12,"#75bb1e"],["delicious","Delicious",26,10,"#003bd8"],["vkrugu","В Кругу Друзей",25,25,"#e95e12"],["pinme","Pinme",27,16,"#f47a24"],["yandex","Я.ру",28,23,"#e70505"],["yazakladki","Яндекс.Закладки",29,29,"#ff0000"],["moikrug","МойКруг",30,30,"#c71b1a"],["googlebookmark","Google закладки",31,31,"#0e41f4"],["yahoo","Yahoo закладки",32,32,"#7b0099"],["moemesto","МоёМесто",33,33,"#3a5d82"],["memori","Memori.ru",34,34,"#fd2668"],["juick","Juick",36,35,"#b98337"],["linkedin","LinkedIn",37,36,"#0072ab"],["webdiscover","WebDiscover",39,37,"#8bc514"],["bookmark","В закладки",22,26,"#de157d"],["email","Отправить на email",23,27,"#5f32b0"],["print","Печатать",24,28,"#0fae96"],["webmoney","Webmoney события",45,39,"#007dc6"],["misterwong","Мистер Вонг",44,40,"#ab0315"],["friendfeed","Friend Feed",43,41,"#5e92d1"],["market","Pluso Маркет",!1,38]],pluso.buy=["cart","dollar","bulb","quest","tag"],pluso.tips=[["Распродажа!","Это может быть Вам интересно!","Лучшие товары со скидкой!","Спецпредложения от интернет-магазинов!","Самые продаваемые товары!","Любые товары по лучшим ценам!","Популярные товары по лучшим ценам!","Популярные товары со скидкой!","Товары для комфортной жизни со скидкой!","Самые востребованные товары со скидкой!","Новинки от интернет-магазинов!","Лучшие цены от интернет-магазинов!","Бестселлеры от интернет-магазинов!","Бестселлеры по лучшим ценам!","Новинки по лучшим ценам!"],{big:{top:"top:-38px;left:10px",left:"top:9px;right:5px",bottom:"top:57px;left:10px"},medium:{top:"top:-38px;left:2px",left:"top:0px;right:5px",bottom:"top:42px;left:2px"},small:{top:"top:-38px;left:-3px",left:"top:-5px;right:5px",bottom:"top:32px;left:-3px"}}],pluso.services=!1,pluso.sets={},pluso.counter={},pluso.counters={},pluso.sepcounters={},pluso.advs=!1,pluso.user=!1,pluso.offsets={small:21,medium:31,big:42},pluso.tabbed=["livejournal","liveinternet","stumbleupon","bobrdobr","evernote","instapaper","digg"],pluso.defaults={options:{horizontal:1,line:1,small:1,counter:1,round:1,theme:"04",sepcounter:0},services:[],params:{background:"#eaeaea",baloon:"#eaeaeb",text:"#707070",url:e.location.href.split("#")[0],title:t.title,image:"",description:t.getElementsByName("description")[0]?t.getElementsByName("description")[0].content:"",user:0,lang:"ru"}},pluso.html=function(e,i){function o(e){if(!e)return;if(x(e))for(var t=0;t<e.length;t++)o(e[t]);else delete s.options[e]}if(e.pluso)return!1;if(e.className.split(" ").indexOf("pluso-skip")>-1)return!1;var s=e.pluso=S(pluso.defaults),u=e.getAttribute("data-options");u&&u.split(",").map(function(e){k=e.split("=");if(x(k)&&k.length>1){if(k[1]=="0"){var t=pluso.tree[1][k[0]];x(t)&&(t=t[0]),k=[t,1]}}else k=[k[0],1];return o(pluso.tree[1][k[0]]),s.options[k[0]]=k[1]});var a=e.getAttribute("data-services");a&&(s.services=a.split(",")),b(s.params,function(t,n){var r=e.getAttribute("data-"+t);r&&(n[t]=r)}),s.params.url.split("://").length<2&&(s.params.url=n+"://"+s.params.url),s.params.url.indexOf("#")==-1&&s.params.url.split("/").length<4&&(s.params.url+="/");var f=[],l=[],c=s.options,h,p;pluso.tree[0].map(function(e){h=typeof c[e]!="undefined"&&c[e]=="1"?"1":"0",h>0&&f.push(e),l.push(h)}),l=l.join(""),p=parseInt(l,2),l="pluso-"+l+"-"+c.theme,f.push("t"+c.theme);var d={u:r,i:r,bb:s.params.background,bc:s.params.baloon,bt:s.params.text},v=['<div class="'+l+(i?" "+f.join(" "):"")+'">'],m=[],y,w,E=function(e){return e.replace(/\{(\w+)\}/g,function(e,t){return d[t]||e})},N=pluso.offsets[g(c)];if(typeof pluso.sets[l]=="undefined"){for(var C=0;C<pluso.css.length;C++)y=pluso.css[C],(y[0][0]==""&&!pluso.services||(p&y[0][0])==y[0][0])&&m.push((y[0][0]==""?"":"."+l+" ")+y[0][1]+"{"+E(y[1])+"}\n");y=[];for(var C=0;C<pluso.tree[2].length;C++)for(var h=0;h<pluso.tree[2][C].length;h++)if(c[pluso.tree[2][C][h]]&&c[pluso.tree[2][C][h]]!=0){y.push(pluso.tree[2][C][h]);continue}m.push("."+l+" .pluso-wrap a{ background-image:url("+r+"/img/pluso-like/"+y.join("/")+"/"+c.theme+".png) }");for(var C=0;C<pluso.buy.length;C++)m.push("."+l+" .pluso-wrap a.pluso-market-"+pluso.buy[C]+", ."+l+" .pluso-wrap a.pluso-market-"+pluso.buy[C]+"-animate{ background:url("+r+"/img/pluso-like/"+y.join("/")+"/market.png) -"+C*N+"px 0}"),m.push("."+l+" .pluso-wrap a.pluso-market-"+pluso.buy[C]+"-animate{animation: pluso-market-animate 3s linear infinite alternate;-webkit-animation: pluso-market-animate 3s linear infinite alternate;}")}if(!pluso.services){pluso.services={},m.push(".pluso-box a b{ background-image:url("+r+"/img/pluso-like/round/small/04.png) }"),m.push(".pluso-box a.pluso-market b{ background:url("+r+"/img/pluso-like/round/small/market.png) -21px 0}");for(var C=0,L=pluso.titles.length;C<L;C++)y=pluso.titles[C],pluso.services[y[0]]=C,m.push(".pluso-box a.pluso-"+y[0]+" b{ background-position: -"+(y[2]-1)*pluso.offsets.small+"px 0}")}v.push('<span class="pluso-wrap" style="background:'+s.params.background+'">');for(var C=0,L=s.services.length,A=L/2;C<L;C++)if(typeof pluso.services[s.services[C]]!="undefined"){y=pluso.titles[pluso.services[s.services[C]]],pt=T(e,y[0],y[1]);var O="";c.horizontal>0&&c.multiline>0&&c.multiline!=2&&C>=A&&(c.multiline=2,O="clear:both;");var M='<a href="'+s.params.url+'" title="'+pt+'" class="pluso-'+y[0]+'"'+(y[0]=="bookmark"?' rel="sidebar"':"")+(O!=""?'style="'+O+'"':"")+"></a>";if(c.sepcounter==1){var _=t.createElement("div");_.style.background=y[4];var D=pluso.sepcounters[y[0]]||0;_.innerHTML=M+'<b title = "'+D+'">'+D+"</b>",M=_.outerHTML}v.push(M);if(!pluso.sets[l]||pluso.sets[l].indexOf(y[0]<0))m.push("."+l+" .pluso-wrap a.pluso-"+y[0]+"{ background-position: -"+(y[2]-1)*N+"px 0}"),pluso.sets[l]||(pluso.sets[l]=[]),pluso.sets[l].push(y[0])}return v.push('<a href="'+n+'://pluso.ru/" class="pluso-more"></a>'),v.push("</span>"),c.counter>0&&v.push('<span class="pluso-counter"><b>'+(pluso.counter[s.params.url]||"0")+"</b></span>"),v.push("</div>"),pluso.sets[l]||(pluso.sets[l]=[]),{html:v.join(""),css:m.join("")}},pluso.styles=function(e){var t=[];return["small","big","medium"].map(function(e){["round","square"].map(function(n){for(var i=1;i<15;i++){var s=(i<10?"0":"")+i;t.push(".pluso ."+e+"."+n+".t"+s+" .pluso-wrap a{ background-image:url("+r+"/img/pluso-like/"+[n,e,s].join("/")+".png) }");for(var o=0,u=pluso.titles.length;o<u;o++)p=pluso.titles[o],t.push(".pluso ."+e+"."+n+".t"+s+" .pluso-wrap a.pluso-"+p[0]+"{ background-position: -"+(p[2]-1)*pluso.offsets[e]+"px 0}")}})}),t=t.join(""),e?t:h(t)},pluso.click=function(e,t){return function(n){if(!n)var n=window.event;var s=n.target||n.srcElement;s.tagName=="B"&&(s=s.parentNode);if(s.tagName=="A")if(s.className.substr(0,12)=="pluso-market"){pluso.process("market",e);var o=document.createElement("div");o.className="pluso-overlay-background";var u=document.createElement("a");u.href="#close",u.className="pluso-overlay-close",u.innerHTML="&times;",u.onclick=function(e){return o.parentNode.removeChild(o),!1},o.appendChild(u);var a=document.createElement("div");a.className="pluso-overlay-box",html=[],html.push('<div><a target="_blank" href="//market.pluso.ru?newmarket" style="margin:0 0 0 20px;padding:0;text-decoration:none"><img src="'+r+'/img/pluso-like/logo-market.png" border="0" width="300" height="30" alt="Pluso Маркет"></a><a target="_blank" href="//market.pluso.ru/" style="float:right;margin:3px 20px 0 0;text-align:right;font:bold normal 20px/26px Arial;text-decoration:none;color:#848484;width:550px">Лучшие товары по самым выгодным ценам!</a></div>'),html.push('<ul id="pluso-market-placeholder"></ul>'),a.innerHTML=html.join(""),o.appendChild(a),o.onclick=function(e){if(!e)var e=window.event;var t=e.target||e.srcElement;t.className=="pluso-overlay-background"&&o.parentNode.removeChild(o)},document.body.insertBefore(o,document.body.childNodes[0]);if(!s.clicked){s.clicked=1;var f="http://offers.pluso.ru/offers/"+e.pluso.params.user+"/"+i+"?callback=pluso.market&"+Math.random();c(f,function(){s.clicked=0})}}else switch(s.className){case"pluso-more":pluso.more(d(n),e);break;case"pluso-promo":case"pluso-logo":case"pluso-go":return pluso.process(s.className.substring(6),e),!0;case"pluso-close":e.box.style.display="none";break;default:return pluso.share(s,e,t)}return!1}},pluso.build=function(e,n){var r=pluso.html(e,n);if(!r)return!1;r.css&&h(r.css),e.innerHTML=r.html,(e.counter=w("pluso-counter",e)).length&&(e.counter=e.counter[0][o]("b")).length&&(e.counter=e.counter[0])||(e.counter=t.createElement("b"));if(e.pluso.options.sepcounter=="1")for(var i in e.pluso.services){if(!pluso.sepcounters[e.pluso.services[i]]){pluso.process("counter",e,"&soc=1");break}var u=w("pluso-"+s,e)[0];if(u){var a=u.parentNode.getElementsByTagName("b")[0];a.title=pluso.sepcounters[s],a.inner=m(pluso.sepcounters[s])}}pluso.counter[e.pluso.params.url]||(pluso.counter[e.pluso.params.url]=0),e.counter.title=pluso.counter[e.pluso.params.url],e.counter.innerHTML=m(pluso.counter[e.pluso.params.url]),pluso.counters[e.pluso.params.url]||(pluso.counters[e.pluso.params.url]=[]),pluso.counters[e.pluso.params.url].push(e.counter),e.onclick=pluso.click(e,0);var f=w("pluso-more",e)[0];return f.onmouseover=function(t){if(!t)var t=window.event;var n=d(t);f.timer=setTimeout(function(){pluso.more(n,e)},500)},f.onmouseout=function(){clearTimeout(f.timer)},e},pluso.start=function(e){pluso.screenWidth=null,pluso.screenHeight=null;if(parseInt(navigator.appVersion)>3)pluso.screenWidth=screen.width,pluso.screenHeight=screen.height;else if(navigator.appName=="Netscape"&&parseInt(navigator.appVersion)==3&&navigator.javaEnabled()){var t=java.awt.Toolkit.getDefaultToolkit(),r=t.getScreenSize();pluso.screenWidth=r.width,pluso.screenHeight=r.height}var e=e||w("pluso");for(var s=0,o=e.length;s<o;s++)if(pluso.build(e[s])){var u="";e[s].pluso.options.sepcounter&&(u+="&soc=1"),pluso.cnt++||(u+="&first=1"),pluso.process("counter",e[s],u),e[s].getAttribute("data-user")&&(pluso.user=e[s].getAttribute("data-user"))}c(n+"://code.xidx.org/xidx-master3.js","xidx-ui",function(){xidx_cb(i)}),c(n+"://kitcode.net/kitcode.js","kitcode",function(){})},pluso.share_pinterest=function(){c("http://assets.pinterest.com/js/pinmarklet.js?r="+Math.random()*99999999)},pluso.share_pinme=function(){c("http://st.pinme.ru/js/pinbutton.js?r="+Math.random()*99999999)},pluso.share_readability=function(){c("http://www.readability.com/bookmarklet/save.js?r="+Math.random()*99999999)},pluso.share_print=function(){window.print()},pluso.share_bookmark=function(e){typeof window.sidebar=="object"&&typeof window.sidebar.addPanel=="function"?window.sidebar.addPanel(e.params.title,e.params.url,""):typeof window.external=="object"&&!window.chrome?window.external.AddFavorite(e.params.url,e.params.title):prompt("Скопируйте и добавьте эту ссылку в Закладки",e.params.url)},pluso.share_email=function(e){var t="mailto:?Subject="+e.params.title+"&body="+encodeURIComponent(e.params.url)+"%0A";window.open(t,"mailto")},pluso.params=function(e){return"u="+E(e.pluso.params.url)+(pluso.screenWidth&&pluso.screenHeight?"&w="+pluso.screenWidth+"&h="+pluso.screenHeight:"")+"&ref="+E(t.referrer)+(e.pluso.params.user>0?"&user="+E(e.pluso.params.user):"")+"&uid="+i+"&k="+pluso.randomString(16)},pluso.share=function(t,n,r){var i=t.className.substring(6),s=pluso["share_"+i],o=pluso.sharelink(i,n,r);pluso.counter[n.pluso.params.url]+=1,n.counter.title=pluso.counter[n.pluso.params.url],n.counter.innerHTML=m(pluso.counter[n.pluso.params.url]);if(n.pluso.options.sepcounter=="1"){var u=t.className;pluso.sepcounters[i]||(pluso.sepcounters[i]=0),pluso.sepcounters[i]=parseInt(pluso.sepcounters[i])+1;var a=t.parentNode.getElementsByTagName("b")[0];a.title=pluso.sepcounters[i],a.innerHTML=m(pluso.sepcounters[i])}if(typeof s=="function"){c(o);if(window.opera&&i=="bookmark")return t.href=n.pluso.params.url,!0;s(n.pluso)}else window.open(o,i,pluso.tabbed.indexOf(i)==-1?"toolbar=0,status=0,resizable=1,width=626,height=436":"")||(e.location.href=o);return!1},pluso.more=function(n,i){if(i.box)var s=i.box;else{var s=t.createElement("div"),u=[];s.className="pluso-box",u.push('<a href="'+r+'/?newnew" target="_blank" class="pluso-logo">+PLUSO</a>'),u.push('<a href="'+r+'/?newnew" target="_blank" class="pluso-go">'+T(i,"get")+"</a>"),u.push('<a href="#close" title="'+T(i,"close")+'" class="pluso-close">&times;</a>'),u.push('<div class="pluso-list">');for(var a=0,f=pluso.titles.length;a<f;a++)p=pluso.titles[a],pt=T(i,p[0],p[1]),u.push('<a href="'+i.pluso.params.url+'" title="'+pt+'" class="pluso-'+p[0]+'"'+(p[0]=="bookmark"?' rel="sidebar"':"")+"><b></b>"+pt+"</a>");var l=Math.random()>.5?"1":"2";u.push('<a class="pluso-promo" style="display:block;width:100%;height:200px;margin:0;padding:0;background:url('+r+"/img/pluso-like/promo_"+l+'.png) center center no-repeat" href="http://'+(l==1?"chrome":"music")+".pluso.ru/?new"+(l==1?"chromeaddon":"music")+'" target="_blank"></a>'),u.push("</div>"),s.innerHTML=u.join(""),s.onmouseover=function(e){s.timer&&clearTimeout(s.timer)},s.onmouseout=function(t){var t=t||e.event,n=t.toElement||t.relatedTarget,r=t.target||t.srcElement;n&&n.tagName&&n.tagName.toUpperCase()=="B"&&(n=n.parentNode);if(!n||n==s||n.parentNode==s||n.parentNode.parentNode==s)return!1;s.timer=setTimeout(function(){s.style.display="none"},777)},s.onclick=pluso.click(i,1)}if(i.box&&i.box.style.display=="block")return;var c=pluso.offsets[g(i.pluso.options)]/2,h=n.pageX-c,d=n.pageY-c,m=v();h<0?h=10:h+310>m.width&&(h=m.width-350),d<0?d=5:d+265>m.height&&(d=m.height-265),s.style.left=h+"px",s.style.top=d+"px",i.box?i.box.style.display="block":(i.box=s,t[o]("body")[0].appendChild(s)),pluso.process("menu",i)},pluso.sharelink=function(n,i,s){var o=t.getSelection,u=e.getSelection,a=t.selection,f=u?u():o?o():a?a.createRange().text:0;return r+"/process?act=share&"+pluso.params(i)+"&type="+E(n)+"&t="+E(i.pluso.params.title)+"&s="+E(f||i.pluso.params.description)+(i.pluso.params.image?"&img="+E(i.pluso.params.image):"")+(s?"&menu=1":"")},pluso.process=function(e,t,n){c("+process?act="+e+"&"+pluso.params(t)+(n||""))},pluso.setCounter=function(e,n,r,i,s){var o=w("pluso");if(typeof r!="undefined")for(var u=0,a=o.length;u<a;u++)if(o[u].className.split(" ").indexOf("pluso-skip")==-1&&o[u].getAttribute("data-user")!==null){var f=w("pluso-wrap",o[u]),l=f[0].firstChild||!1,c=o[u].pluso.options;if(l&&l.className.substr(0,12)!="pluso-market"){var h=t.createElement("a");h.className="pluso-market-"+(r.style||"bulb")+(r.animate?"-animate":""),h.href="//market.pluso.ru/",l.parentNode.insertBefore(h,l),o[u].pluso.options.sepcounter&&(h.style["margin-bottom"]="0px");if(r.pos&&r.pos!="hide"&&!r.hide){var p=document.createElement("span");p.innerHTML='<span style="position:absolute;z-index:2;top:0;left:0;bottom:auto;right:auto"><span class="pluso-tip pluso-'+r.pos+'-arrow" style="'+pluso.tips[1][g(c)][r.pos]+'">'+pluso.tips[0][y(pluso.tips[0].length-1)]+"</span></span>",p.onclick=function(){return h.click(),!1},o[u].insertBefore(p,o[u].firstChild)}}}if(typeof i!="undefined"){pluso.sepcounters=i;for(var u=0,a=o.length;u<a;u++)if(o[u].className.split(" ").indexOf("pluso-skip")==-1&&o[u].pluso&&o[u].pluso.options.sepcounter==1)for(var d in pluso.sepcounters){var v=w("pluso-"+d,o[u])[0];if(v){var b=v.parentNode.getElementsByTagName("b")[0];b.title=pluso.sepcounters[d],b.innerHTML=m(pluso.sepcounters[d])}}}n||(n=f.location.href.split("#")[0]),pluso.counter[n]=parseInt(e);var E=pluso.counters[n];if(E&&E.length){var S=m(pluso.counter[n]);for(var u=0;u<E.length;u++)E[u].title=pluso.counter[n],E[u].innerHTML=S}typeof pluso_counter=="function"&&pluso_counter(e,n);var x=!1;w("pluso")[0]&&(x=w("pluso")[0].getAttribute("data-user"));if(!pluso.advs&&s){var T=[];try{T=JSON.parse(s)}catch(N){T.push(s)}pluso.advs=T;if(T.length){var C="http://ads.betweendigital.com/adj?s=95614&h=400&w=240",k=document.createElement("div");k.innerHTML='<iframe id="pluso-ads-iframe" scrolling=no frameborder=0></iframe>',document.getElementsByTagName("body")[0].appendChild(k),iframe=document.getElementById("pluso-ads-iframe");if(iframeDocument=iframe.contentDocument){iframe.style.width="240px",iframe.style.height="400px",iframe.style.margin=0,iframe.style.padding=0,iframe.style.position="fixed",iframe.style.bottom=0,iframe.style.right=0,iframe.style.zIndex="999999";var L=document.createElement("div");L.setAttribute("id","ads_close"),L.style.fontFamily="Arial, sans-serif",L.style.fontSize="10px",L.style.textAlign="right",L.style.position="fixed",L.style.zIndex="999999",L.style.right="0px",L.style.bottom="400px",L.style.width="240px",L.style.color="#bbb",L.style.cursor="pointer",L.style.zIndex="999999",L.innerHTML="&#1047;&#1040;&#1050;&#1056;&#1067;&#1058;&#1068;&nbsp;[&#1061;]&nbsp;",L.addEventListener("click",function(){k.style.display="none"}),k.appendChild(L),iframeDocument.write('<script type="text/javascript" src="'+C+'"></script>')}}}},pluso.market=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];t.push('<li><a href="'+i.url+'" target="_blank"><span><img src="//offers.pluso.ru/img/'+i.image+'.png" border="0" alt="" height="150"></span><strong>'+i.title+"</strong><em>"+(i.price*1).toString()+" руб.<u>Из рук в руки</u></em><b>Купить!</b></a></li>")}document.getElementById("pluso-market-placeholder").innerHTML=t.join("")},pluso.randomString=function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=y(t.length));var n="";for(var r=0;r<e;r++)n+=t[y(t.length)];return n},pluso.refreshCounter=function(e){if(!e)return;var t={};t[e]=[];for(var n in pluso.counters)for(var r in pluso.counters[n]){var i=pluso.counters[n][r];i.innerText="0",t[e].push(i)}pluso.counters=t;var i={};i[e]=0,pluso.counter=i,pluso.defaults.params.url=e,pluso.cnt=0,el=w("pluso");for(var n=0;n<el.length;n++)el[n].pluso=S(pluso.defaults),pluso.process("counter",el[n],pluso.cnt++?"":"&first=1")},N(function(){pluso.start(),typeof pluso_ready=="function"&&pluso_ready()})}(window,document),define("libs/pluso/pluso-like",function(){}),define("pluso",["require","libs/pluso/pluso-like"],function(e){(!window.pluso||typeof window.pluso.start!="function")&&window.ifpluso==undefined&&e("libs/pluso/pluso-like")}),define("blocks/postrow/_activity/postrow_activity",["require","jquery","underscore","backbone","marionette","block!button/_share","block!button/_like","pluso"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!button/_share"),o=e("block!button/_like");e("pluso");var u=r.Marionette.View.extend({ui:{share:".button_share",like:".button_like"},initialize:function(){this.bindUIElements(),this.share=new s({el:this.ui.share}),this.like=new o({el:this.ui.like}),window.pluso.start()}});return u}),function(e,t){typeof define=="function"&&define.amd?define("nprogress",t):typeof exports=="object"?module.exports=t():e.NProgress=t()}(this,function(){function n(e,t,n){return e<t?t:e>n?n:e}function r(e){return(-1+e)*100}function i(e,n,i){var s;return t.positionUsing==="translate3d"?s={transform:"translate3d("+r(e)+"%,0,0)"}:t.positionUsing==="translate"?s={transform:"translate("+r(e)+"%,0)"}:s={"margin-left":r(e)+"%"},s.transition="all "+n+"ms "+i,s}function u(e,t){var n=typeof e=="string"?e:l(e);return n.indexOf(" "+t+" ")>=0}function a(e,t){var n=l(e),r=n+t;if(u(n,t))return;e.className=r.substring(1)}function f(e,t){var n=l(e),r;if(!u(e,t))return;r=n.replace(" "+t+" "," "),e.className=r.substring(1,r.length-1)}function l(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function c(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var e={};e.version="0.1.6";var t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};e.configure=function(e){var n,r;for(n in e)r=e[n],r!==undefined&&e.hasOwnProperty(n)&&(t[n]=r);return this},e.status=null,e.set=function(r){var u=e.isStarted();r=n(r,t.minimum,1),e.status=r===1?null:r;var a=e.render(!u),f=a.querySelector(t.barSelector),l=t.speed,c=t.easing;return a.offsetWidth,s(function(n){t.positionUsing===""&&(t.positionUsing=e.getPositioningCSS()),o(f,i(r,l,c)),r===1?(o(a,{transition:"none",opacity:1}),a.offsetWidth,setTimeout(function(){o(a,{transition:"all "+l+"ms linear",opacity:0}),setTimeout(function(){e.remove(),n()},l)},l)):setTimeout(n,l)}),this},e.isStarted=function(){return typeof e.status=="number"},e.start=function(){e.status||e.set(0);var n=function(){setTimeout(function(){if(!e.status)return;e.trickle(),n()},t.trickleSpeed)};return t.trickle&&n(),this},e.done=function(t){return!t&&!e.status?this:e.inc(.3+.5*Math.random()).set(1)},e.inc=function(t){var r=e.status;return r?(typeof t!="number"&&(t=(1-r)*n(Math.random()*r,.1,.95)),r=n(r+t,0,.994),e.set(r)):e.start()},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var t=0,n=0;e.promise=function(r){return!r||r.state()=="resolved"?this:(n==0&&e.start(),t++,n++,r.always(function(){n--,n==0?(t=0,e.done()):e.set((t-n)/t)}),this)}}(),e.render=function(n){if(e.isRendered())return document.getElementById("nprogress");a(document.documentElement,"nprogress-busy");var i=document.createElement("div");i.id="nprogress",i.innerHTML=t.template;var s=i.querySelector(t.barSelector),u=n?"-100":r(e.status||0),f=document.querySelector(t.parent),l;return o(s,{transition:"all 0 linear",transform:"translate3d("+u+"%,0,0)"}),t.showSpinner||(l=i.querySelector(t.spinnerSelector),l&&c(l)),f!=document.body&&a(f,"nprogress-custom-parent"),f.appendChild(i),i},e.remove=function(){f(document.documentElement,"nprogress-busy"),f(document.querySelector(t.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&c(e)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var s=function(){function t(){var n=e.shift();n&&n(t)}var e=[];return function(n){e.push(n),e.length==1&&t()}}(),o=function(){function n(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function r(t){var n=document.body.style;if(t in n)return t;var r=e.length,i=t.charAt(0).toUpperCase()+t.slice(1),s;while(r--){s=e[r]+i;if(s in n)return s}return t}function i(e){return e=n(e),t[e]||(t[e]=r(e))}function s(e,t,n){t=i(t),e.style[t]=n}var e=["Webkit","O","Moz","ms"],t={};return function(e,t){var n=arguments,r,i;if(n.length==2)for(r in t)i=t[r],i!==undefined&&t.hasOwnProperty(r)&&s(e,r,i);else s(e,n[1],n[2])}}();return e}),define("blocks/modal/_image/modal_image",["require","jquery","underscore","backbone","marionette","block!notice","block!comments","block!postrow/_activity","nprogress"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!notice"),o=e("block!comments"),u=e("block!postrow/_activity"),a=e("nprogress"),f=r.Marionette.View.extend({url:"/ajax/photo/show",ui:{modalImage:".modal_image",comments:".comments",postrowActivity:".postrow_activity"},events:{"click .modal__controls__prev":"prev","click .modal__controls__next":"close","click .modal_image__close":"close","click .modal_image__image":"next","click a[data-type=prev]":"prev","click a[data-type=next]":"next","click a[data-type=close]":"close","click .modal_image__resize":"resize"},initialize:function(){var e=this;a.start(),t.ajax({url:this.url+"/"+this.model.get("id"),success:function(){e.render.apply(e,arguments),a.done()},error:function(){s({layout:"bottomRight",text:"Ошибка загрузки изображения"}),a.done()}})},render:function(e){var n=t(".modal_image").height(),r=t(e);if(t(".modal_wrapper").length>0){t(".modal_wrapper").off("click",".modal__controls__prev"),t(".modal_wrapper").off("click",".modal__controls__next"),t(".modal_wrapper").off("click",".modal_image__close"),t(".modal_wrapper").off("click",".modal_image__image"),t(".modal_wrapper").off("click","a[data-type=prev]"),t(".modal_wrapper").off("click","a[data-type=next]"),t(".modal_wrapper").off("click","a[data-type=close]"),t(".modal_wrapper").off("click",".modal_image__resize"),t(".modal_image").css({height:n}).html(r.find(".modal_image").html());var i=r.find(".modal_image").prop("attributes");t.each(i,function(){"class"!=this.name&&t(".modal_image").attr(this.name,this.value)})}else t("body").append(r),this.addOverlay();t(".modal_image img").on("load",function(){t(".modal_image").css({height:""})}),this.setElement(t(".modal_wrapper")),this.undelegateEvents(),this.unbind(),this.bindUIElements(),this.delegateEvents(),this.disallowBodyScroll(),this.postrowActivity=new u({el:this.ui.postrowActivity});var s=new o({el:this.ui.comments});this.prevId=this.ui.modalImage.attr("data-previd"),this.nextId=this.ui.modalImage.attr("data-nextid")},addOverlay:function(){t(".overlay").remove(),t("body").append('<div class="overlay overlay_black"></div>')},disallowBodyScroll:function(){t("body").css({"overflow-y":"hidden"})},prev:function(){n.isEmpty(this.prevId)?this.close():App.navigate("photo/"+this.prevId)},next:function(){n.isEmpty(this.nextId)?this.close():App.navigate("photo/"+this.nextId)},close:function(){this.$el.remove(),t(".overlay").remove(),t("body").css({"overflow-y":""}),App.navigate("",{trigger:!1}),this.remove()},resize:function(e){this.ui.modalImage.hasClass("modal_image_expand")?this.ui.modalImage.removeClass("modal_image_expand"):this.ui.modalImage.addClass("modal_image_expand"),e.stopPropagation()}});return f}),define("models/photo/photo",["require","jquery","underscore","backbone","marionette","models/like"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/like"),o=r.Model.extend({url:"/ajax/photo",defaults:{isFullPhoto:1,viewsCount:0,commentsCount:0,likesCount:0,sharesCount:0,isCommentsAllowed:1,photoId:null,extension:null,url:null,title:null,description:null,onCreated:null,size:null,width:null,height:null,onUpdated:null,onPublished:null,category_id:null,author_id:null,publisher_id:null,updater_id:null},like:function(){var e=new s({module_id:s.Module.Photo,entry_id:this.get("id")});e.save(),this.set("isLiked",!0)},dislike:function(){var e=new s({module_id:s.Module.Photo,entry_id:this.get("id")});e.destroy(),this.set("isLiked",!1)}});return o}),define("routers/photo",["require","jquery","underscore","backbone","marionette","block!modal/_image","models/photo/photo"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!modal/_image"),o=e("models/photo/photo"),u=r.Marionette.Controller.extend({displayPhoto:function(e){var t=new o({id:e}),n=new s({model:t})}}),a=r.Marionette.AppRouter.extend({controller:u,appRoutes:{"photo/:id":"displayPhoto"}});return function(){return n.isUndefined(App.PhotoRouter)&&(App.PhotoRouter=new a({controller:new u})),App.PhotoRouter}}),define("models/forum/theme",["require","jquery","underscore","backbone","marionette","models/user","models/forum/category"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/user"),o=null,u=r.Model.extend({url:"/ajax/forumTheme",defaults:{isHavePoll:null,isShowSignature:1,postsCount:null,readsCount:null,isFixed:null,isOpen:1,isShowFirstPost:null,isCommentsAllowed:1,url:null,name:null,brief:null,description:null,prefix:null,previewImageUrl:null,onCreated:null,createIp:null,onLastPost:null,lastPostBrief:null,onUpdated:null,onPublished:null,onMoved:null,filesData:null,pollQuestion:null,updateIp:null,publishIp:null,moveIp:null,category_id:null,author_id:null,lastPostUser_id:null,updater_id:null,publisher_id:null,lastPostUserNickname:null,lastPostUserAvatar:null,authorNickname:null,authorAvatar:null},initialize:function(t){n.isUndefined(t.author)||(this.unset("author"),n.isEmpty(t.author)||(this.author=new s(t.author))),n.isUndefined(t.lastPostUser)||(this.unset("lastPostUser"),n.isEmpty(t.lastPostUser)||(this.lastPostUser=new s(t.lastPostUser))),n.isUndefined(t.updater)||(this.unset("updater"),n.isEmpty(t.updater)||(this.updater=new s(t.updater))),n.isUndefined(t.publisher)||(this.unset("publisher"),n.isEmpty(t.publisher)||(this.publisher=new s(t.publisher))),n.isUndefined(t.category)||(this.unset("category"),n.isEmpty(t.category)||(o=e("models/forum/category"),this.category=new o(t.category)))}});return u}),define("collections/forum/themes",["require","jquery","underscore","backbone","marionette","models/forum/theme"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/forum/theme"),o=r.Collection.extend({model:s,url:"/ajax/forumTheme/list"});return o}),define("models/forum/category",["require","jquery","underscore","backbone","marionette","models/user","models/forum/theme","collections/forum/themes"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/user"),o=e("models/forum/theme"),u=e("collections/forum/themes"),a=r.Model.extend({url:"/ajax/forumCategory",defaults:{themesCount:null,postsCount:null,position:null,depth:null,isShow:1,id:null,url:null,name:null,onCreated:null,description:null,lastPostThemeTitle:null,lastPostUserBrief:null,thumbImage:null,lastPostUserNickname:null,lastPostUserAvatar:null,childCategories:null,onLastPost:null,lastTheme_id:null,lastPostUser_id:null,parent_id:null},initialize:function(e){n.isUndefined(e.lastTheme)||(this.unset("lastTheme"),n.isEmpty(e.lastTheme)||(this.lastTheme=new o(e.lastTheme))),n.isUndefined(e.lastPostUser)||(this.unset("lastPostUser"),n.isEmpty(e.lastPostUser)||(this.lastPostUser=new s(e.lastPostUser))),n.isUndefined(e.parent)||(this.unset("parent"),n.isEmpty(e.parent)||(this.parent=new a(e.parent)))},getThemes:function(e){var r={data:{},success:function(){},error:function(){}};n.isUndefined(e.data)||(e.data=t.param(t.extend({category_id:this.get("id")},e.data)));var i=t.extend({},r,e);(new u).fetch(i)}});return a}),define("text!blocks/header/__menu/__submenu/_forum/__item/header__menu__submenu_forum__item.html",[],function(){return'<div class="header__menu__submenu_forum__item__theme">\r\n	<h3 class="header__menu__submenu_forum__item__theme__title"><%= name %></h3>\r\n	<div class="header__menu__submenu_forum__item__theme__info">\r\n		<span class="header__menu__submenu_forum__item__theme__info__authorlabel">Автор:</span>\r\n		<span class="header__menu__submenu_forum__item__theme__info__authorname"><%= authorNickname %></span>\r\n		<div class="header__menu__submenu_forum__item__point"></div>\r\n		<span class="header__menu__submenu_forum__item__theme__info__reads"><%= readsCount %></span>\r\n		<span class="header__menu__submenu_forum__item__theme__info__posts"><%= postsCount %></span>\r\n	</div>\r\n</div>\r\n<div class="bubble bubble_menu">\r\n	<div class="bubble__userpic">\r\n		<img src="<%= lastPostUserAvatar %>" alt="">\r\n	</div>\r\n	<span class="bubble__usernick">\r\n		<%= lastPostUserNickname %>\r\n	</span>	\r\n	<span class="bubble__desc">\r\n		<%= lastPostBrief %>\r\n	</span>\r\n	<span class="bubble__date">\r\n		<%= postDate(onLastPost) %>\r\n	</span>													\r\n</div>'}),define("blocks/header/__menu/__submenu/_forum/__item/header__menu__submenu_forum__item",["require","jquery","underscore","backbone","marionette","textblock!header/__menu/__submenu/_forum/__item.html","helpers/templateDate"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!header/__menu/__submenu/_forum/__item.html"),o=e("helpers/templateDate"),u=r.Marionette.ItemView.extend({tagName:"li",template:n.template(s),templateHelpers:{postDate:o}});return u}),define("blocks/header/__menu/__submenu/_forum/header__menu__submenu_forum",["require","jquery","underscore","backbone","marionette","models/forum/category","block!header/__menu/__submenu/_forum/__item"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/forum/category"),o=e("block!header/__menu/__submenu/_forum/__item"),u=r.Marionette.CollectionView.extend({childView:o}),a=r.Marionette.View.extend({isRendered:!1,isActive:!1,pause:250,collection:null,ui:{list:".header__menu__submenu__content"},events:{mouseover:"show",mouseleave:"hide"},initialize:function(){var e=this;this.bindUIElements(),this.model=new s({id:this.$el.data("id")})},render:function(){var e=new u({el:this.ui.list,collection:this.collection});e.render(),this.ui.list.removeClass("loader")},show:function(){var e=this;this.isRendered||setTimeout(function(){if(!e.isActive)return!1;e.model.getThemes({data:{":select":["id","name","url","readsCount","postsCount","onLastPost","lastPostUser_id","lastPostUserNickname","lastPostUserAvatar","lastPostBrief","authorNickname"].join(",")},success:function(t){e.collection=t,e.isRendered=!0,e.render()},error:function(){e.isRendered=!0,e.render()}})},this.pause),this.isActive=!0},hide:function(){this.isActive=!1}});return a}),define("models/article/article",["require","jquery","underscore","backbone","marionette","models/like"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/like"),o=r.Model.extend({url:"/ajax/article",defaults:{readsCount:null,likesCount:null,sharesCount:null,commentsCount:null,isDouble:null,isVideo:null,isCommentsAllowed:1,isNotifyOnComments:1,url:null,title:null,brief:null,description:null,onCreated:null,createIp:null,updateIp:null,publishIp:null,isOldNews:null,oldId:null,videoUrl:null,smallImageUrl:null,innerImageUrl:null,markText:null,onUpdated:null,onPublished:null,redirectUrl:null,author_id:null,category_id:null,publisher_id:null,updater_id:null,version:null},like:function(){var e=new s({module_id:s.Module.Article,entry_id:this.get("id")});e.save(),this.set("isLiked",!0)},dislike:function(){var e=new s({module_id:s.Module.Article,entry_id:this.get("id")});e.destroy(),this.set("isLiked",!1)}});return o}),define("collections/article/articles",["require","jquery","underscore","backbone","marionette","models/article/article"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/article/article"),o=r.Collection.extend({model:s,url:"/ajax/article/list"});return o}),define("models/article/category",["require","jquery","underscore","backbone","marionette","collections/article/articles"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("collections/article/articles"),o=r.Model.extend({url:"/ajax/articleCategory",defaults:{position:null,elementsCount:null,isNews:null,url:null,name:null,description:null,tags:null,thumbImageUrl:null,childCategories:null,parent_id:null},initialize:function(e){n.isUndefined(e.parent)||(this.unset("parent"),n.isEmpty(e.parent)||(this.parent=new o(e.parent)))},getArticles:function(e){var r={data:{},success:function(){},error:function(){}};n.isUndefined(e.data)||(e.data=t.param(t.extend({category_id:this.get("id")},e.data)));var i=t.extend({},r,e);(new s).fetch(i)}});return o}),define("text!blocks/header/__menu/__submenu/_article/__item/header__menu__submenu_article__item.html",[],function(){return'<div class="header__menu__submenu__content__item header__menu__submenu__content__i1">\r\n	<img src="img/item-img1.jpg" alt="">\r\n	<h3>Статья статья?</h3>\r\n</div>'}),define("blocks/header/__menu/__submenu/_article/__item/header__menu__submenu_article__item",["require","jquery","underscore","backbone","marionette","textblock!header/__menu/__submenu/_article/__item.html"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!header/__menu/__submenu/_article/__item.html"),o=r.Marionette.ItemView.extend({tagName:"li",template:n.template(s)});return o}),define("blocks/header/__menu/__submenu/_article/header__menu__submenu_article",["require","jquery","underscore","backbone","marionette","models/article/category","block!header/__menu/__submenu/_article/__item"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/article/category"),o=e("block!header/__menu/__submenu/_article/__item"),u=r.Marionette.CollectionView.extend({childView:o}),a=r.Marionette.View.extend({isRendered:!1,isActive:!1,pause:250,collection:null,ui:{list:".header__menu__submenu__content"},events:{mouseover:"show",mouseleave:"hide"},initialize:function(){var e=this;this.bindUIElements(),this.model=new s({id:this.$el.data("id")})},render:function(){var e=new u({el:this.ui.list,collection:this.collection});e.render(),this.ui.list.removeClass("loader")},show:function(){var e=this;this.isRendered||setTimeout(function(){if(!e.isActive)return!1;e.model.getArticles({data:{":select":["id","url","title","smallImageUrl"].join(",")},success:function(t){e.collection=t,e.isRendered=!0,e.render()},error:function(){e.isRendered=!0,e.render()}})},this.pause),this.isActive=!0},hide:function(){this.isActive=!1}});return a}),define("blocks/header/__menu/header__menu",["require","jquery","underscore","backbone","marionette","block!header/__menu/__submenu/_forum","block!header/__menu/__submenu/_article"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!header/__menu/__submenu/_forum"),o=e("block!header/__menu/__submenu/_article"),u=r.Marionette.View.extend({ui:{more:".header__menu__item_more",items:".header__menu__item:not(.header__menu__item_more)",submenuForumList:".header__menu__submenu_forum  .header__menu__submenu__list > li",submenuArticleList:".header__menu__submenu_article  .header__menu__submenu__list > li"},forumSubmenues:[],articleSubmenues:[],initialize:function(){var e=this;this.bindUIElements(),this.ui.submenuForumList.each(function(){e.forumSubmenues.push(new s({el:this}))}),this.ui.submenuArticleList.each(function(){e.articleSubmenues.push(new o({el:this}))})}});return u}),define("blocks/header/__search/header__search",["require","jquery","underscore","backbone","marionette","helpers/keys"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("helpers/keys"),o=r.Marionette.View.extend({isExpended:!1,ui:{input:".search__input",tags:".tag"},events:{click:"expand","click .header__search__icon":"expand","click .tag":"highliteTag","click .search__submit":"submit","keydown .search__input":"keydown"},initialize:function(){var e=this;t(window).click(function(){e.minimize.apply(e)}),this.bindUIElements()},minimize:function(){this.$el.removeClass("header__search_active"),this.isExpended=!1},expand:function(e){App.HeaderRegion.currentView.minimizeAll(),this.$el.addClass("header__search_active"),this.isExpended=!0,e.stopPropagation()},highliteTag:function(e){var n=t(e.currentTarget);n.toggleClass("tag_active")},submit:function(){if(this.isExpended){var e=this.ui.input.val(),t=this.getActiveTagValues();console.log("submit: "+this.ui.input.val(),t.join(", "))}},keydown:function(e){switch(e.keyCode){case s.ENTER:this.submit()}},getActiveTagValues:function(){var e=[];return this.ui.tags.filter(function(){var n=t(this);n.hasClass("tag_active")&&e.push(n.data("value"))}),e}});return o}),define("text!blocks/notifications/__item/notifications__item.html",[],function(){return'<% if("undefined" !== typeof sender) { %>\r\n<div class="notifications__item__img">\r\n	<img src="<%= sender.avatarImageUrl %>" alt="">\r\n</div>\r\n<div class="notifications__item__desc">\r\n	<span class="notifications__item__desc__name"><%= sender.nickname %></span>\r\n	<span class="notifications__item__desc__activity"><%= message %></span>\r\n</div>\r\n<% } else { %>\r\n<div class="notifications__item__desc notifications__item__desc_full">\r\n	<span class="notifications__item__desc__activity"><%= message %></span>\r\n</div>\r\n<% } %>'}),define("blocks/notifications/__item/notifications__item",["require","jquery","underscore","backbone","marionette","textblock!notifications/__item.html"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!notifications/__item.html"),o=r.Marionette.ItemView.extend({tagName:"li",className:"notifications__item",template:n.template(s)});return o}),define("blocks/notifications/notifications",["require","jquery","underscore","backbone","marionette","block!notifications/__item"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!notifications/__item"),o=r.Marionette.CollectionView.extend({tagName:"ul",className:"notifications",childView:s});return o}),define("blocks/header/__item/header__item",["require","jquery","underscore","backbone","marionette"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=r.Marionette.View.extend({isVisible:!1,events:{click:"click"},initialize:function(){var e=this;t(window).click(function(){e.minimize.apply(e)})},click:function(e){return e.stopPropagation(),!1},minimize:function(){var e=this.$el.find(".header__item__content").height();this.$el.find(".header__item__content").stop().animate({height:0},{duration:this.duration,complete:function(){t(this).removeAttr("style")}}),this.$el.find(".header__icon").removeClass("header__icon_active"),this.isVisible=!1},expand:function(){App.HeaderRegion.currentView.minimizeAll();var e=this.$el.find(".header__item__content").removeAttr("style").height();this.$el.find(".header__item__content").height(0).show().stop().animate({height:e},{complete:function(){}}),this.$el.find(".header__icon").addClass("header__icon_active"),this.isVisible=!0},toggle:function(){this.isVisible?this.minimize():this.expand()}});return s}),define("models/notification",["require","jquery","underscore","backbone","marionette","models/user"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/user"),o=r.Model.extend({defaults:{sender_id:null,receiver_id:null,message:""},initialize:function(e){n.isUndefined(e.senderShort)||(this.unset("senderShort"),n.isEmpty(e.senderShort)||(this.sender=new s(e.senderShort))),n.isUndefined(e.sender)||(this.unset("sender"),n.isEmpty(e.sender)||(this.sender=new s(e.sender)))},toJSON:function(){var e=r.Model.prototype.toJSON.apply(this);return n.isUndefined(this.sender)||(e.sender=this.sender.toJSON()),e}});return o}),define("collections/notifications",["require","jquery","underscore","backbone","marionette","models/notification"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/notification"),o=r.Collection.extend({model:s,url:"/ajax/notification/list"});return o}),define("blocks/header/__item/_notifications/header__item_notifications",["require","jquery","underscore","backbone","marionette","block!notifications","block!header/__item","collections/notifications"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!notifications"),o=e("block!header/__item"),u=e("collections/notifications"),a=o.extend({isFetched:!1,zindex:5,duration:100,ui:{content:".header__item_notifications__content",menu:".header__item_notifications__menu"},events:{"click .header__icon_notice":"toggle",click:"click"},initialize:function(){o.prototype.initialize.apply(this,arguments);var e=this;this.collection=new u,this.bindUIElements(),this.delegateEvents()},click:function(e){return e.stopPropagation(),!1},toggle:function(){var e=this;this.isVisible?this.minimize():this.expand(),this.isFetched||this.collection.fetch({success:function(t){e.notificationsView=new s({collection:t}),e.ui.content.html(e.notificationsView.el),e.ui.menu.removeClass("loader"),e.notificationsView.render(),e.isFetched=!0;var n=e.ui.menu.height(),r=e.ui.menu.attr("style","display: block").height();e.ui.menu.height(n).stop().animate({height:r},{complete:function(){}})}})}});return a}),define("blocks/header/__item/_avatar/header__item_avatar",["require","jquery","underscore","backbone","marionette","block!header/__item"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!header/__item"),o=s.extend({zindex:5,duration:100,ui:{menu:".header__item_avatar__menu"},events:{"click .header__icon_avatar":"toggle",click:"click"},initialize:function(){s.prototype.initialize.apply(this,arguments);var e=this;this.bindUIElements(),this.delegateEvents(),t(window).click(function(){e.minimize.apply(e)})},click:function(e){return e.stopPropagation(),!1}});return o}),define("text!blocks/chat/chat.html",[],function(){return'<div id="chat" class="chat" style="display:none;"> \r\n	<div class="chat__inner">\r\n		<div class="chat__buttons">\r\n			<div class="button_close"></div>\r\n			<div class="button_collapse"></div>\r\n			<div class="button_update"></div>\r\n		</div>\r\n		<div class="chat__users"></div>\r\n		<div class="chat__messages"></div>\r\n	</div>\r\n</div>'}),define("text!blocks/chat/__users/chat__users.html",[],function(){return'<span class="chat__users__online"><span class="chat__users__online__number">0</span> онлайн</span>\r\n<ul class="chat__users__list loader loader_top loader_5f574e"></ul>'}),define("text!blocks/chat/__users/__item/chat__users__item.html",[],function(){return'<div class="chat__users__item__useravatar">\r\n	<img src="<%= getUser(id).getAvatar() %>" />\r\n</div>\r\n<div>\r\n	<span class="chat__users__item__usernick"><%= nickname %></span>\r\n</div>\r\n<div class="clr"></div>'}),define("blocks/chat/__users/__item/chat__users__item",["require","jquery","underscore","backbone","marionette","textblock!chat/__users/__item.html","models/user"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!chat/__users/__item.html"),o=e("models/user"),u=r.Marionette.ItemView.extend({tagName:"li",className:"chat__users__item",template:n.template(s),templateHelpers:{getUser:function(e){return new o({id:e})}}});return u}),define("collections/users",["require","jquery","underscore","backbone","marionette","models/user"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/user"),o=r.Collection.extend({model:s,url:"/ajax/user/list"});return o}),define("helpers/getNumEnding",["require"],function(e){return function(t,n){var r,i;t%=100;if(t>=11&&t<=19)r=n[2];else{i=t%10;switch(i){case 1:r=n[0];break;case 2:case 3:case 4:r=n[1];break;default:r=n[2]}}return r}}),function(e){typeof define=="function"&&define.amd?define("mousewheel",["jquery"],e):typeof exports=="object"?module.exports=e:e(jQuery)}(function(e){function a(t){var n=t||window.event,o=r.call(arguments,1),u=0,a=0,c=0,h=0;t=e.event.fix(n),t.type="mousewheel","detail"in n&&(c=n.detail*-1),"wheelDelta"in n&&(c=n.wheelDelta),"wheelDeltaY"in n&&(c=n.wheelDeltaY),"wheelDeltaX"in n&&(a=n.wheelDeltaX*-1),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(a=c*-1,c=0),u=c===0?a:c,"deltaY"in n&&(c=n.deltaY*-1,u=c),"deltaX"in n&&(a=n.deltaX,c===0&&(u=a*-1));if(c===0&&a===0)return;if(n.deltaMode===1){var p=e.data(this,"mousewheel-line-height");u*=p,c*=p,a*=p}else if(n.deltaMode===2){var d=e.data(this,"mousewheel-page-height");u*=d,c*=d,a*=d}h=Math.max(Math.abs(c),Math.abs(a));if(!s||h<s)s=h,l(n,h)&&(s/=40);return l(n,h)&&(u/=40,a/=40,c/=40),u=Math[u>=1?"floor":"ceil"](u/s),a=Math[a>=1?"floor":"ceil"](a/s),c=Math[c>=1?"floor":"ceil"](c/s),t.deltaX=a,t.deltaY=c,t.deltaFactor=s,t.deltaMode=0,o.unshift(t,u,a,c),i&&clearTimeout(i),i=setTimeout(f,200),(e.event.dispatch||e.event.handle).apply(this,o)}function f(){s=null}function l(e,t){return u.settings.adjustOldDeltas&&e.type==="mousewheel"&&t%120===0}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice,i,s;if(e.event.fixHooks)for(var o=t.length;o;)e.event.fixHooks[t[--o]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],a,!1);else this.onmousewheel=a;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],a,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),!function(e,t,n){e.fn.jScrollPane=function(r){function i(r,i){function s(t){var i,u,l,p,d,v,y=!1,b=!1;if(W=t,X===n)d=r.scrollTop(),v=r.scrollLeft(),r.css({overflow:"hidden",padding:0}),V=r.innerWidth()+St,$=r.innerHeight(),r.width(V),X=e('<div class="jspPane" />').css("padding",Et).append(r.children()),J=e('<div class="jspContainer" />').css({width:V+"px",height:$+"px"}).append(X).appendTo(r);else{if(r.css("width",""),y=W.stickToBottom&&M(),b=W.stickToRight&&_(),p=r.innerWidth()+St!=V||r.outerHeight()!=$,p&&(V=r.innerWidth()+St,$=r.innerHeight(),J.css({width:V+"px",height:$+"px"})),!p&&xt==K&&X.outerHeight()==Q)return r.width(V),void 0;xt=K,X.css("width",""),r.width(V),J.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}X.css("overflow","auto"),K=t.contentWidth?t.contentWidth:X[0].scrollWidth,Q=X[0].scrollHeight,X.css("overflow",""),G=K/V,Y=Q/$,Z=Y>1,et=G>1,et||Z?(r.addClass("jspScrollable"),i=W.maintainPosition&&(rt||ot),i&&(u=A(),l=O()),o(),f(),h(),i&&(k(b?K-V:u,!1),C(y?Q-$:l,!1)),B(),D(),U(),W.enableKeyboardNavigation&&F(),W.clickOnTrack&&m(),q(),W.hijackInternalLinks&&R()):(r.removeClass("jspScrollable"),X.css({top:0,left:0,width:J.width()-St}),P(),j(),I(),g()),W.autoReinitialise&&!wt?wt=setInterval(function(){s(W)},W.autoReinitialiseDelay):!W.autoReinitialise&&wt&&clearInterval(wt),d&&r.scrollTop(0)&&C(d,!1),v&&r.scrollLeft(0)&&k(v,!1),r.trigger("jsp-initialised",[et||Z])}function o(){Z&&(J.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),ut=J.find(">.jspVerticalBar"),at=ut.find(">.jspTrack"),tt=at.find(">.jspDrag"),W.showArrows&&(ht=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",d(0,-1)).bind("click.jsp",H),pt=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",d(0,1)).bind("click.jsp",H),W.arrowScrollOnHover&&(ht.bind("mouseover.jsp",d(0,-1,ht)),pt.bind("mouseover.jsp",d(0,1,pt))),p(at,W.verticalArrowPositions,ht,pt)),lt=$,J.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){lt-=e(this).outerHeight()}),tt.hover(function(){tt.addClass("jspHover")},function(){tt.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",H),tt.addClass("jspActive");var n=t.pageY-tt.position().top;return e("html").bind("mousemove.jsp",function(e){w(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",y),!1}),u())}function u(){at.height(lt+"px"),rt=0,ft=W.verticalGutter+at.outerWidth(),X.width(V-ft-St);try{0===ut.position().left&&X.css("margin-left",ft+"px")}catch(e){}}function f(){et&&(J.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),dt=J.find(">.jspHorizontalBar"),vt=dt.find(">.jspTrack"),it=vt.find(">.jspDrag"),W.showArrows&&(yt=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",d(-1,0)).bind("click.jsp",H),bt=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",d(1,0)).bind("click.jsp",H),W.arrowScrollOnHover&&(yt.bind("mouseover.jsp",d(-1,0,yt)),bt.bind("mouseover.jsp",d(1,0,bt))),p(vt,W.horizontalArrowPositions,yt,bt)),it.hover(function(){it.addClass("jspHover")},function(){it.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",H),it.addClass("jspActive");var n=t.pageX-it.position().left;return e("html").bind("mousemove.jsp",function(e){S(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",y),!1}),mt=J.innerWidth(),l())}function l(){J.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){mt-=e(this).outerWidth()}),vt.width(mt+"px"),ot=0}function h(){if(et&&Z){var t=vt.outerHeight(),n=at.outerWidth();lt-=t,e(dt).find(">.jspCap:visible,>.jspArrow").each(function(){mt+=e(this).outerWidth()}),mt-=n,$-=n,V-=t,vt.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),u(),l()}et&&X.width(J.outerWidth()-St+"px"),Q=X.outerHeight(),Y=Q/$,et&&(gt=Math.ceil(1/G*mt),gt>W.horizontalDragMaxWidth?gt=W.horizontalDragMaxWidth:gt<W.horizontalDragMinWidth&&(gt=W.horizontalDragMinWidth),it.width(gt+"px"),st=mt-gt,x(ot)),Z&&(ct=Math.ceil(1/Y*lt),ct>W.verticalDragMaxHeight?ct=W.verticalDragMaxHeight:ct<W.verticalDragMinHeight&&(ct=W.verticalDragMinHeight),tt.height(ct+"px"),nt=lt-ct,E(rt))}function p(e,t,n,r){var i,s="before",o="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==s?o=t:t==o&&(s=t,i=n,n=r,r=i),e[s](n)[o](r)}function d(e,t,n){return function(){return v(e,t,this,n),this.blur(),!1}}function v(t,n,r,i){r=e(r).addClass("jspActive");var s,o,u=!0,f=function(){0!==t&&Tt.scrollByX(t*W.arrowButtonSpeed),0!==n&&Tt.scrollByY(n*W.arrowButtonSpeed),o=setTimeout(f,u?W.initialDelay:W.arrowRepeatFreq),u=!1};f(),s=i?"mouseout.jsp":"mouseup.jsp",i=i||e("html"),i.bind(s,function(){r.removeClass("jspActive"),o&&clearTimeout(o),o=null,i.unbind(s)})}function m(){g(),Z&&at.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r,i=e(this),s=i.offset(),o=t.pageY-s.top-rt,u=!0,f=function(){var e=i.offset(),n=t.pageY-e.top-ct/2,s=$*W.scrollPagePercent,a=nt*s/(Q-$);if(0>o)rt-a>n?Tt.scrollByY(-s):w(n);else{if(!(o>0))return l(),void 0;n>rt+a?Tt.scrollByY(s):w(n)}r=setTimeout(f,u?W.initialDelay:W.trackClickRepeatFreq),u=!1},l=function(){r&&clearTimeout(r),r=null,e(document).unbind("mouseup.jsp",l)};return f(),e(document).bind("mouseup.jsp",l),!1}}),et&&vt.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r,i=e(this),s=i.offset(),o=t.pageX-s.left-ot,u=!0,f=function(){var e=i.offset(),n=t.pageX-e.left-gt/2,s=V*W.scrollPagePercent,a=st*s/(K-V);if(0>o)ot-a>n?Tt.scrollByX(-s):S(n);else{if(!(o>0))return l(),void 0;n>ot+a?Tt.scrollByX(s):S(n)}r=setTimeout(f,u?W.initialDelay:W.trackClickRepeatFreq),u=!1},l=function(){r&&clearTimeout(r),r=null,e(document).unbind("mouseup.jsp",l)};return f(),e(document).bind("mouseup.jsp",l),!1}})}function g(){vt&&vt.unbind("mousedown.jsp"),at&&at.unbind("mousedown.jsp")}function y(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),tt&&tt.removeClass("jspActive"),it&&it.removeClass("jspActive")}function w(e,t){Z&&(0>e?e=0:e>nt&&(e=nt),t===n&&(t=W.animateScroll),t?Tt.animate(tt,"top",e,E):(tt.css("top",e),E(e)))}function E(e){e===n&&(e=tt.position().top),J.scrollTop(0),rt=e;var t=0===rt,i=rt==nt,s=e/nt,o=-s*(Q-$);(Nt!=t||kt!=i)&&(Nt=t,kt=i,r.trigger("jsp-arrow-change",[Nt,kt,Ct,Lt])),T(t,i),X.css("top",o),r.trigger("jsp-scroll-y",[-o,t,i]).trigger("scroll")}function S(e,t){et&&(0>e?e=0:e>st&&(e=st),t===n&&(t=W.animateScroll),t?Tt.animate(it,"left",e,x):(it.css("left",e),x(e)))}function x(e){e===n&&(e=it.position().left),J.scrollTop(0),ot=e;var t=0===ot,i=ot==st,s=e/st,o=-s*(K-V);(Ct!=t||Lt!=i)&&(Ct=t,Lt=i,r.trigger("jsp-arrow-change",[Nt,kt,Ct,Lt])),N(t,i),X.css("left",o),r.trigger("jsp-scroll-x",[-o,t,i]).trigger("scroll")}function T(e,t){W.showArrows&&(ht[e?"addClass":"removeClass"]("jspDisabled"),pt[t?"addClass":"removeClass"]("jspDisabled"))}function N(e,t){W.showArrows&&(yt[e?"addClass":"removeClass"]("jspDisabled"),bt[t?"addClass":"removeClass"]("jspDisabled"))}function C(e,t){var n=e/(Q-$);w(n*nt,t)}function k(e,t){var n=e/(K-V);S(n*st,t)}function L(t,n,r){var i,s,o,u,f,l,c,h,p,d=0,v=0;try{i=e(t)}catch(m){return}for(s=i.outerHeight(),o=i.outerWidth(),J.scrollTop(0),J.scrollLeft(0);!i.is(".jspPane");)if(d+=i.position().top,v+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;u=O(),l=u+$,u>d||n?h=d-W.horizontalGutter:d+s>l&&(h=d-$+s+W.horizontalGutter),isNaN(h)||C(h,r),f=A(),c=f+V,f>v||n?p=v-W.horizontalGutter:v+o>c&&(p=v-V+o+W.horizontalGutter),isNaN(p)||k(p,r)}function A(){return-X.position().left}function O(){return-X.position().top}function M(){var e=Q-$;return e>20&&e-O()<10}function _(){var e=K-V;return e>20&&e-A()<10}function D(){J.unbind(Ot).bind(Ot,function(e,t,n,r){var i=ot,s=rt,o=e.deltaFactor||W.mouseWheelSpeed;return Tt.scrollBy(n*o,-r*o,!1),i==ot&&s==rt})}function P(){J.unbind(Ot)}function H(){return!1}function B(){X.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){L(e.target,!1)})}function j(){X.find(":input,a").unbind("focus.jsp")}function F(){function t(){var e=ot,t=rt;switch(n){case 40:Tt.scrollByY(W.keyboardSpeed,!1);break;case 38:Tt.scrollByY(-W.keyboardSpeed,!1);break;case 34:case 32:Tt.scrollByY($*W.scrollPagePercent,!1);break;case 33:Tt.scrollByY(-$*W.scrollPagePercent,!1);break;case 39:Tt.scrollByX(W.keyboardSpeed,!1);break;case 37:Tt.scrollByX(-W.keyboardSpeed,!1)}return i=e!=ot||t!=rt}var n,i,s=[];et&&s.push(dt[0]),Z&&s.push(ut[0]),X.focus(function(){r.focus()}),r.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(r){if(r.target===this||s.length&&e(r.target).closest(s).length){var o=ot,u=rt;switch(r.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=r.keyCode,t();break;case 35:C(Q-$),n=null;break;case 36:C(0),n=null}return i=r.keyCode==n&&o!=ot||u!=rt,!i}}).bind("keypress.jsp",function(e){return e.keyCode==n&&t(),!i}),W.hideFocus?(r.css("outline","none"),"hideFocus"in J[0]&&r.attr("hideFocus",!0)):(r.css("outline",""),"hideFocus"in J[0]&&r.attr("hideFocus",!1))}function I(){r.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function q(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash.substr(1));try{t=e("#"+r+', a[name="'+r+'"]')}catch(i){return}t.length&&X.find(r)&&(0===J.scrollTop()?n=setInterval(function(){J.scrollTop()>0&&(L(t,!0),e(document).scrollTop(J.position().top),clearInterval(n))},50):(L(t,!0),e(document).scrollTop(J.position().top)))}}function R(){e(document.body).data("jspHijack")||(e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(n){var r,i,s,o,u,f,l=this.href.substr(0,this.href.indexOf("#")),c=location.href;if(-1!==location.href.indexOf("#")&&(c=location.href.substr(0,location.href.indexOf("#"))),l===c){r=escape(this.href.substr(this.href.indexOf("#")+1));try{i=e("#"+r+', a[name="'+r+'"]')}catch(h){return}i.length&&(s=i.closest(".jspScrollable"),o=s.data("jsp"),o.scrollToElement(i,!0),s[0].scrollIntoView&&(u=e(t).scrollTop(),f=i.offset().top,(u>f||f>u+e(t).height())&&s[0].scrollIntoView()),n.preventDefault())}}))}function U(){var e,t,n,r,i,s=!1;J.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(o){var u=o.originalEvent.touches[0];e=A(),t=O(),n=u.pageX,r=u.pageY,i=!1,s=!0}).bind("touchmove.jsp",function(o){if(s){var u=o.originalEvent.touches[0],f=ot,l=rt;return Tt.scrollTo(e+n-u.pageX,t+r-u.pageY),i=i||Math.abs(n-u.pageX)>5||Math.abs(r-u.pageY)>5,f==ot&&l==rt}}).bind("touchend.jsp",function(){s=!1}).bind("click.jsp-touchclick",function(){return i?(i=!1,!1):void 0})}function z(){var e=O(),t=A();r.removeClass("jspScrollable").unbind(".jsp"),r.replaceWith(At.append(X.children())),At.scrollTop(e),At.scrollLeft(t),wt&&clearInterval(wt)}var W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt=this,Nt=!0,Ct=!0,kt=!1,Lt=!1,At=r.clone(!1,!1).empty(),Ot=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===r.css("box-sizing")?(Et=0,St=0):(Et=r.css("paddingTop")+" "+r.css("paddingRight")+" "+r.css("paddingBottom")+" "+r.css("paddingLeft"),St=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0)),e.extend(Tt,{reinitialise:function(t){t=e.extend({},W,t),s(t)},scrollToElement:function(e,t,n){L(e,t,n)},scrollTo:function(e,t,n){k(e,n),C(t,n)},scrollToX:function(e,t){k(e,t)},scrollToY:function(e,t){C(e,t)},scrollToPercentX:function(e,t){k(e*(K-V),t)},scrollToPercentY:function(e,t){C(e*(Q-$),t)},scrollBy:function(e,t,n){Tt.scrollByX(e,n),Tt.scrollByY(t,n)},scrollByX:function(e,t){var n=A()+Math[0>e?"floor":"ceil"](e),r=n/(K-V);S(r*st,t)},scrollByY:function(e,t){var n=O()+Math[0>e?"floor":"ceil"](e),r=n/(Q-$);w(r*nt,t)},positionDragX:function(e,t){S(e,t)},positionDragY:function(e,t){w(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:W.animateDuration,easing:W.animateEase,queue:!1,step:r})},getContentPositionX:function(){return A()},getContentPositionY:function(){return O()},getContentWidth:function(){return K},getContentHeight:function(){return Q},getPercentScrolledX:function(){return A()/(K-V)},getPercentScrolledY:function(){return O()/(Q-$)},getIsScrollableH:function(){return et},getIsScrollableV:function(){return Z},getContentPane:function(){return X},scrollToBottom:function(e){w(nt,e)},hijackInternalLinks:e.noop,destroy:function(){z()}}),s(i)}return r=e.extend({},e.fn.jScrollPane.defaults,r),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){r[this]=r[this]||r.speed}),this.each(function(){var t=e(this),n=t.data("jsp");n?n.reinitialise(r):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),n=new i(t,r),t.data("jsp",n))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),define("jscrollpane",["jquery","mousewheel"],function(){}),define("blocks/chat/__users/chat__users",["require","jquery","underscore","backbone","marionette","textblock!chat/__users.html","block!chat/__users/__item","collections/users","helpers/getNumEnding","jscrollpane"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!chat/__users.html"),o=e("block!chat/__users/__item"),u=e("collections/users"),a=e("helpers/getNumEnding");e("jscrollpane");var f=r.Marionette.CompositeView.extend({template:n.template(s),childView:o,childViewContainer:".chat__users__list",collection:new u,childViewOptions:{},verticalDragHeight:30,fetchInterval:3e5,minScrollModelsCount:5,ui:{number:".chat__users__online__number",list:".chat__users__list"},events:{"click .button_collapse":"collapse"},initialize:function(){var e=this;this.collection.on("add",this.onAdd,this),this.collection.on("sync",function(){e.trigger("sync")}),this.collection.on("error",function(){e.trigger("error")})},onAdd:function(){var e=this;clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){e.minScrollModelsCount<=e.collection.length&&e.initializeScroll.apply(e,arguments)},20)},initializeScroll:function(){this.jsp=this.ui.list.jScrollPane({}).data("jsp")},ifFetchedFirst:!1,onRender:function(){},update:function(e){n.isUndefined(e)&&(e=0);var t=this;e<1?this.fetchDirect():(clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(function(){t.update.call(t,e)},e))},fetchDirect:function(){var e=this;this.ui.list.addClass("loader"),n.isUndefined(this.jsp)||this.jsp.destroy(),this.collection.reset(),this.collection.fetch({data:{action:"online"},success:function(t){e.render.apply(e),e.ui.list.removeClass("loader"),e.ui.number.html(t.length+" "+a(t.length,["пользователь","пользователя","пользователей"]))},error:function(){e.ui.list.removeClass("loader")}})},stopUpdate:function(){clearTimeout(this.updateTimeout)}});return f}),define("models/chatMessage",["require","jquery","underscore","backbone","marionette","components/cmodel","models/user"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("components/cmodel"),o=e("models/user"),u=s.extend({url:"/ajax/chatMessage",defaults:{senderNickname:"",senderGroup_id:1,message:null,onCreated:null,sender_id:null},initialize:function(e){n.isUndefined(e)&&(e={}),n.isUndefined(e.sender)&&(this.sender=new o({id:e.sender_id,nickname:e.senderNickname}))},toJSON:function(){var e=s.prototype.toJSON.apply(this);return!this.isSaving&&!n.isUndefined(this.sender)&&n.isEmpty(this.syncAttributes)&&(e.sender=this.sender.toJSON()),e},validate:function(e){if(e.message.length<u.minLength)return"Минимальное количество символов: "+u.minLength;if(e.message.length>u.maxLength)return"Максимальное количество символов: "+u.maxLength}},{minLength:2,maxLength:150});return u}),define("text!blocks/chat/__messages/chat__messages.html",[],function(){return'<div class="chat__messages__inner loader loader_bottom loader_5f574e"></div>\r\n<div class="chat__messages__create">\r\n	<div class="chat__messages__gradient"></div>\r\n	<div class="chat__messages__item__userpic">\r\n		<img src="<%= App.currentUser.getAvatar() %>">\r\n	</div>					\r\n	<div class="chat__messages__create__input">\r\n		<div class="chat__messages__create__inner">\r\n			<input type="text" placeholder="Введите сообщение" maxlength="150">\r\n			<div class="chat__smiles">	\r\n				<i class="button_smile"></i>\r\n			</div>\r\n		</div>						\r\n	</div>	\r\n	<input type="submit" class="button button_submit" value="Отправить">	\r\n</div>'}),define("text!blocks/chat/__messages/__item/chat__messages__item.html",[],function(){return'<div class="chat__messages__item__userpic">\r\n	<img src="<%= getSender(sender_id).getAvatar() %>" alt="">\r\n</div>\r\n<div class="chat__messages__item__info">\r\n	<span class="chat__messages__item__usernik"><%= senderNickname %></span>\r\n	<span class="chat__messages__item__time"><%= timeConverter(onCreated) %></span>							\r\n	<ul class="chat__messages__item__controls">\r\n		<% if((App.currentUser.check(\'isCanDeleteOwnChatMessages\') && sender_id == App.currentUser.get(\'id\')) || App.currentUser.check(\'isCanDeleteAllChatMessages\')) { %>\r\n			<li><span class="chat__messages__item__delete"></span></li>\r\n		<% } %>\r\n	</ul>\r\n	<div class="chat__messages__item__message">\r\n		<span><%= replaceSmiles(message) %></span>\r\n		<div class="clr"></div>							\r\n	</div>	\r\n</div>'}),define("helpers/timeConverter",["require"],function(e){return function(e){var t=new Date(e*1e3),n=t.getHours(),r=t.getMinutes(),i=t.getSeconds();return n=n>10?n:"0"+n,r=r>10?r:"0"+r,i=i>10?i:"0"+i,n+":"+r+":"+i}}),define("blocks/chat/__messages/__item/chat__messages__item",["require","jquery","underscore","backbone","marionette","textblock!chat/__messages/__item.html","helpers/timeConverter","block!modal/_confirm","models/user"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!chat/__messages/__item.html"),o=e("helpers/timeConverter"),u=e("block!modal/_confirm"),a=e("models/user"),f,l=r.Marionette.ItemView.extend({tagName:"div",className:"chat__messages__item",template:n.template(s),templateHelpers:{timeConverter:o,getSender:function(e){return new a({id:e})},replaceSmiles:function(e){return f.replaceSmiles(e)}},initialize:function(e){n.isUndefined(f)&&(f=this.options.parent.smiles)},events:{"click .chat__messages__item__delete":"deleteMessage"},deleteMessage:function(){var e=this;(new u({message:"Вы подтверждаете удаление комментария?",confirm:function(){e.model.setSyncAttributes(["id"]),e.model.destroy(),e.model.clearSyncAttributes()}})).show()}});return l}),define("collections/chatMessages",["require","jquery","underscore","backbone","marionette","models/chatMessage"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/chatMessage"),o=r.Collection.extend({model:s,url:"/ajax/chatMessage/list",defaultCount:10});return o}),define("text!blocks/smiles/smiles.html",[],function(){return'<div class="smiles__inner">\r\n	<% _.each(smiles, function(smile) { %>\r\n	<a href="javascript://" class="smiles__item" data-command="<%= smile.command %>">\r\n		<img src="<%= smile.image %>">\r\n	</a>\r\n	<% }); %>\r\n</div>'}),define("models/smile",["require","jquery","underscore","backbone","marionette","json!config"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("json!config"),o=r.Model.extend({url:"/ajax/smile",defaults:{command:"",isVisibleInList:!1},getImage:function(){return o.getImage(this.get("command"))},toJSON:function(){var e=r.Model.prototype.toJSON.apply(this);return e.image=this.getImage(),e}},{getImage:function(e){return s.smile.path+"/"+o.getFilename(e)},getFilename:function(e){var t="",n=e.length;for(var r=0;r<n;r++){var i=e.charAt(r);/[A-Za-z0-9_]/.test(i)?t+=i:t+=e.charCodeAt(r)}return t+".png"}});return o}),define("collections/smiles",["require","jquery","underscore","backbone","marionette","models/smile"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/smile"),o=r.Collection.extend({model:s,url:"/ajax/smile/list"});return o}),define("json!smilesList",function(){return[{command:":)",onIconUpdated:null,isVisibleInList:"0"},{command:":cry",onIconUpdated:null,isVisibleInList:"0"}]}),define("blocks/smiles/smiles",["require","jquery","underscore","backbone","marionette","textblock!smiles.html","collections/smiles","models/smile","json!smilesList"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!smiles.html"),o=e("collections/smiles"),u=e("models/smile"),a=e("json!smilesList"),f=r.Marionette.View.extend({tagName:"div",className:"smiles",parentEl:t("body"),isRendered:!1,isOpened:!1,events:{"click .smiles__item":"addSmile",click:"clickOnMe"},addSmile:function(e){var n=t(e.currentTarget),r=this.inputEl.val(),i=n.data("command");this.inputEl.val(r+i)},initialize:function(e){var r=this;n.isUndefined(e)&&(e={}),this.options=e,this.options.parentEl&&(this.parentEl=t(this.options.parentEl)),this.options.inputEl&&(this.inputEl=t(this.options.inputEl)),this.collection=new o(a);var i=this.collection.map(function(e){return e.get("command").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}).join("|");this.regexp=new RegExp("("+i+")")},setProperty:function(e,t){this[e]=t},replaceSmiles:function(e){return e=e.replace(this.regexp,function(e,t){return'<img src="'+u.getImage(e)+'" />'}),e},render:function(){var e=t("<"+this.tagName+">").addClass(this.className).html(n.template(s,{smiles:this.collection.toJSON()}));n.isUndefined(this.parentEl)||this.parentEl.append(e),this.setElement(e),this.isRendered=!0},show:function(){this.$el.show(),this.isOpened=!0},hide:function(){this.$el.hide(),this.isOpened=!1},clickOnMe:function(e){return e.stopPropagation(),!1}});return f}),define("helpers/timestamp",[],function(){return function(){return Math.round((new Date).getTime()/1e3)}}),define("blocks/chat/__messages/chat__messages",["require","jquery","underscore","backbone","marionette","models/chatMessage","textblock!chat/__messages.html","block!chat/__messages/__item","collections/chatMessages","block!smiles","helpers/timestamp","helpers/keys","block!notice","jscrollpane"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/chatMessage"),o=e("textblock!chat/__messages.html"),u=e("block!chat/__messages/__item"),a=e("collections/chatMessages"),f=e("block!smiles"),l=e("helpers/timestamp"),c=e("helpers/keys"),h=e("block!notice");e("jscrollpane");var p=r.Marionette.CompositeView.extend({template:n.template(o),childView:u,childViewContainer:".chat__messages__inner",collection:new a,animationDuration:200,fetchInterval:5e3,isFetched:!1,ui:{items:".chat__messages__item",inner:".chat__messages__inner",submit:".button_submit",input:".chat__messages__create__input input"},events:{"click .button_submit":"submit","click .button_smile":"toggleSmiles",keyup:"keyup"},initialize:function(){var e=this;this.smiles=new f,this.childViewOptions={parent:this},this.collection.on("add",this.onCollectionChange,this),this.collection.on("remove",this.onCollectionChange,this)},onCollectionChange:function(){var e=this;clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){n.isUndefined(e.jsp)?e.jsp=e.ui.inner.jScrollPane().data("jsp"):(e.ui.inner.find(".chat__messages__item").last().detach().insertAfter(e.$el.find(".jspPane .chat__messages__item").last()),e.jsp.reinitialise()),e.jsp.scrollToPercentY(100,e.animationDuration)},n.isUndefined(e.jsp)?20:0)},reinitialise:function(){this.jsp.reinitialise(),this.jsp.scrollToPercentY(100,this.animationDuration)},onRender:function(){var e=this;this.smiles.setProperty("parentEl",this.$el.find(".chat__messages__create")),this.smiles.setProperty("inputEl",this.$el.find(".chat__messages__create__input input")),t("body").click(function(){e.outsideClick.apply(e)})},update:function(e,t){n.isUndefined(e)&&(e=0);var r=this;e<1?this.fetchNewMessagesDirect(t):(clearTimeout(this.fetchNewMessagesTimeout),this.fetchNewMessagesTimeout=setTimeout(function(){r.fetchNewMessagesDirect.apply(r,arguments)},e))},fetchNewMessagesDirect:function(e){n.isUndefined(e)&&(e=!1);var t=this,r=l();e&&(this.lastFetchTime=l());var i=(new a).fetch({data:{init:e,fetched:this.lastFetchTime},error:function(){t.lastFetchTime=r},success:function(e,n){t.ui.inner.removeClass("loader"),t.lastFetchTime=r,t.collection.add(e.models),t.isFetched=!0}})},submit:function(){var e=this,t=new s({message:this.ui.input.val(),sender_id:window.App.currentUser.get("id"),senderNickname:window.App.currentUser.get("nickname"),onCreated:(new Date).getTime()/1e3});t.setSyncAttributes(["id","message"]),t.on("invalid",this.onError,this),t.save(null,{error:function(){e.onError.call(e,t,"Ошибка сохранения")},success:function(){e.update.apply(e)}}),t.clearSyncAttributes(),this.ui.input.val("").focus(),this.ui.inner.addClass("loader")},keyup:function(e){if(e.keyCode==c.ENTER)return this.submit(),e.stopPropagation(),!1},onError:function(e,t){h({layout:"bottomRight",text:t})},toggleSmiles:function(e){return this.smiles.isRendered||this.smiles.render(),this.smiles.isOpened?this.smiles.hide():this.smiles.show(),e.stopPropagation(),!1},outsideClick:function(){this.smiles.hide()},stopUpdate:function(){clearTimeout(this.fetchNewMessagesTimeout)}});return p}),define("blocks/chat/chat",["require","jquery","underscore","backbone","marionette","textblock!chat.html","block!chat/__users","block!chat/__messages","helpers/timestamp"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("textblock!chat.html"),o=e("block!chat/__users"),u=e("block!chat/__messages"),a=e("helpers/timestamp"),f=r.Marionette.View.extend({isRendered:!1,isOpened:!1,duration:200,updateCircleTime:250,isCollapsed:!1,collapseDuration:300,collapseExtraWait:50,collapseExtraWidth:250,minWindowWidth:700,ui:{close:".button_close",users:".chat__users",messages:".chat__messages"},events:{"click .button_close":"hide",mousewheel:"mousewheel","click .button_update":"update","click .button_collapse":"collapseClick"},initialize:function(e){var t=this;this.options=e},render:function(){var e=this,r=n.template(s,{});t("body").append(r),this.setElement(t("body").find("#chat")),this.bindUIElements(),this.delegateEvents(),this.baseHeight=this.$el.height(),this.isRendered=!0,this.users=new o({el:this.ui.users}),this.users.render(),this.messages=new u({el:this.ui.messages}),this.messages.render(),this.on("collapseIn",this.collapseIn,this),this.on("collapseOut",this.collapseOut,this),this.on("collapsed",this.collapsed,this),t(window).resize(function(){e.testCollapseNeeded.apply(e)})},testCollapseNeeded:function(){t(window).width()<this.minWindowWidth&&!this.isCollapsed?(this.isCollapsed=!0,this.collapseOut()):this.messages.reinitialise()},show:function(){var e=this;this.$el.height(0).show().animate({height:this.baseHeight},{duration:this.duration,complete:function(){e.isOpened=!0}}),this.messages.update(0,!0),this.messages.update(this.messages.fetchInterval),this.users.update(0,!0),this.users.update(this.users.fetchInterval)},hide:function(){var e=this;this.$el.animate({height:0},{duration:this.duration,complete:function(){e.$el.hide(),e.isOpened=!1}}),this.messages.stopUpdate(),this.users.stopUpdate()},mousewheel:function(e){return e.stopPropagation(),!1},collapsed:function(){this.messages.jsp.reinitialise()},collapseIn:function(){this.$el.removeClass("chat_collapsed"),this.collapse(!0)},collapseOut:function(){this.$el.addClass("chat_collapsed"),this.collapse(!1)},collapse:function(e){var t=this,n=this.$el.find(".chat__messages__inner"),r=this.$el.find(".chat__messages__inner").width(),i=this.$el.find(".jspPane").width(),s=this.collapseExtraWidth*(e?-1:1);n.animate({width:parseInt(r)+s},{duration:this.collapseDuration}),n.find(".jspContainer").animate({width:parseInt(r)+s},{duration:this.collapseDuration}),n.find(".jspPane").animate({width:parseInt(i)+s},{duration:this.collapseDuration})},collapseClick:function(){var e=this;this.trigger("collapse"),this.isCollapsed?this.trigger("collapseIn"):this.trigger("collapseOut"),this.isCollapsed=!this.isCollapsed,setTimeout(function(){e.trigger("collapsed")},this.collapseDuration+this.collapseExtraWait)},update:function(e){var n=this,r=t(e.currentTarget),i=a(),s=function(){var e=a(),t=Math.max(0,n.updateCircleTime-(e-i));setTimeout(function(){r.removeClass("loader")},t)};r.addClass("loader"),this.messages.update(),this.users.update(),this.users.once("sync",s),this.users.once("error",s)}});return f}),define("blocks/header/header",["require","jquery","underscore","backbone","marionette","block!header/__menu","block!header/__search","block!header/__item/_notifications","block!header/__item/_avatar","block!chat"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!header/__menu"),o=e("block!header/__search"),u=e("block!header/__item/_notifications"),a=e("block!header/__item/_avatar"),f=e("block!chat"),l=r.Marionette.LayoutView.extend({regions:{MenuRegion:".header__menu",SearchRegion:".header__search",Notifications:".header__item_notifications",Avatar:".header__item_avatar",chatIcon:".header__icon_chat"},ui:{chatIcon:".header__icon_chat"},events:{"click .header__icon_chat":"chatToggle"},initialize:function(){this.MenuRegion.currentView=new s({el:this.MenuRegion.el}),this.MenuRegion.attachView(this.MenuRegion.currentView),this.SearchRegion.currentView=new o({el:this.SearchRegion.el}),this.SearchRegion.attachView(this.SearchRegion.currentView),this.Notifications.currentView=new u({el:this.Notifications.el}),this.Notifications.attachView(this.Notifications.currentView),this.Avatar.currentView=new a({el:this.Avatar.el}),this.Avatar.attachView(this.Avatar.currentView),this.ChatRegion=App.ChatRegion={currentView:new f}},chatToggle:function(e){var n=this.ChatRegion.currentView,r=t(e.currentTarget);n.isRendered||n.render.apply(n),n.isOpened?(n.hide.apply(n),r.removeClass("header__icon_active")):(n.show.apply(n),r.addClass("header__icon_active"))},minimizeAll:function(){this.SearchRegion.currentView.minimize(),this.Notifications.currentView.minimize(),this.Avatar.currentView.minimize()}});return l}),function(e){e.fn.swap=function(t){t=e(t)[0];var n=this[0],r=n.parentNode.insertBefore(document.createTextNode(""),n);return t.parentNode.insertBefore(n,t),r.parentNode.insertBefore(t,r),r.parentNode.removeChild(r),this}}(jQuery),define("jqueryplugins/swap",function(){}),define("blocks/slideshow/slideshow",["require","jquery","underscore","backbone","marionette","jqueryplugins/swap"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette");e("jqueryplugins/swap");var s=r.Marionette.View.extend({ui:{leftButton:".slideshow__controls__buttons__left",rightButton:".slideshow__controls__buttons__right",items:".slideshow__list_item",currentItem:".slideshow__list_item:last",prevItem:".slideshow__list_item:nth-last-child(2)",nextItem:".slideshow__list_item:first",button:".slideshow__center__readmore",title:".slideshow__center__title",center:".slideshow__center",list:".slideshow__list",link:".slideshow__link"},events:{"click .slideshow__controls__buttons__left":"prev","click .slideshow__controls__buttons__right":"next"},initialize:function(){var e=this;this.bindUIElements(),App.ContentRegion.$el.find(".container .list").length>0&&(App.ContentRegion.currentView.on("layoutComplete",this.repositionMoveButtons,this),this.repositionMoveButtons())},update:function(e){var t=e.data("src"),r=n.isUndefined(e.attr("data-href"))?"javascript://":e.data("href"),i=n.isUndefined(e.attr("data-target"))?"_self":e.data("target"),s=n.isUndefined(e.attr("data-button"))?!1:e.data("button"),o=n.isUndefined(e.attr("data-title"))?!1:e.data("title");this.ui.link.attr("href",r),this.ui.link.attr("target",i),s?(this.ui.button.show(),this.ui.button.text(s)):this.ui.button.hide(),o?(this.ui.title.show(),this.ui.title.text(o)):this.ui.title.hide(),e.find("img").length<1&&e.html("<img>"),e.find("img").attr("src",t)},repositionMoveButtons:function(){var e=(t(window).width()-App.ContentRegion.$el.find(".container .list").width())/2+parseInt(this.ui.leftButton.width())/2;this.ui.leftButton.css({"margin-left":e+"px"}),this.ui.rightButton.css({"margin-right":e+"px"})},prev:function(e){var t=this;return e.stopPropagation(),this.update(this.ui.prevItem),this.ui.currentItem.animate({left:"-100%"},{duration:this.duration,complete:function(){t.ui.currentItem.removeAttr("style"),t.ui.currentItem.detach(),t.ui.list.prepend(t.ui.currentItem),t.bindUIElements()}}),!1},next:function(e){var t=this;return e.stopPropagation(),this.update(this.ui.nextItem),this.ui.nextItem.detach(),this.ui.currentItem.before(this.ui.nextItem),this.ui.currentItem.animate({left:"100%"},{duration:this.duration,complete:function(){t.ui.currentItem.removeAttr("style"),t.ui.currentItem.detach(),t.ui.nextItem.before(t.ui.currentItem),t.bindUIElements()}}),!1}});return s}),define("modules/global",["require","jquery","underscore","backbone","marionette","routers/photo","block!header","block!slideshow","block!comments"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("routers/photo"),o=e("block!header"),u=e("block!slideshow"),a=e("block!comments");return function(e,t){this.addInitializer(function(){new s;var e=new o({el:t.HeaderRegion.el});t.HeaderRegion.attachView(e),t.HeaderRegion.currentView=e;var n=new u({el:t.SlideshowRegion.el});t.SlideshowRegion.attachView(n),t.SlideshowRegion.currentView=n,t.CommentsRegion.currentView=[],t.CommentsRegion.$el.each(function(){var e=new a({el:this});t.CommentsRegion.currentView.push(e)})})}}),function(e){function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function i(t,n){e.fn[t]=function(i){if("string"==typeof i){for(var u=r.call(arguments,1),a=0,f=this.length;f>a;a++){var l=this[a],c=e.data(l,t);if(c)if(e.isFunction(c[i])&&"_"!==i.charAt(0)){var h=c[i].apply(c,u);if(void 0!==h)return h}else s("no such method '"+i+"' for "+t+" instance");else s("cannot call methods on "+t+" prior to initialization; "+"attempted to call '"+i+"'")}return this}return this.each(function(){var r=e.data(this,t);r?(r.option(i),r._init()):(r=new n(this,i),e.data(this,t,r))})}}if(e){var s="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){n(t),i(e,t)},e.bridget}}var r=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],n):n(e.jQuery)}(window),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,r=function(){};n.addEventListener?r=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(r=function(e,n,r){e[n+r]=r.handleEvent?function(){var n=t(e);r.handleEvent.call(r,n)}:function(){var n=t(e);r.call(e,n)},e.attachEvent("on"+n,e[n+r])});var i=function(){};n.removeEventListener?i=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(i=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=void 0}});var s={bind:r,unbind:i};"function"==typeof define&&define.amd?define("eventie/eventie",s):"object"==typeof exports?module.exports=s:e.eventie=s}(this),function(e){function t(e){"function"==typeof e&&(t.isReady?e():s.push(e))}function n(e){var n="readystatechange"===e.type&&"complete"!==i.readyState;if(!t.isReady&&!n){t.isReady=!0;for(var r=0,o=s.length;o>r;r++){var u=s[r];u()}}}function r(r){return r.bind(i,"DOMContentLoaded",n),r.bind(i,"readystatechange",n),r.bind(e,"load",n),t}var i=e.document,s=[];t.isReady=!1,"function"==typeof define&&define.amd?(t.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],r)):e.docReady=r(e.eventie)}(this),function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,s=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e){function t(e){if(e){if("string"==typeof r[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,s=0,u=n.length;u>s;s++)if(t=n[s]+e,"string"==typeof r[t])return t}}var n="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:e.getStyleProperty=t}(window),function(e){function t(e){var t=parseFloat(e),n=-1===e.indexOf("%")&&!isNaN(t);return n&&t}function n(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,n=o.length;n>t;t++){var r=o[t];e[r]=0}return e}function r(e){function r(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var r=s(e);if("none"===r.display)return n();var i={};i.width=e.offsetWidth,i.height=e.offsetHeight;for(var l=i.isBorderBox=!!f&&!!r[f]&&"border-box"===r[f],c=0,h=o.length;h>c;c++){var d=o[c],v=r[d];v=u(e,v);var m=parseFloat(v);i[d]=isNaN(m)?0:m}var g=i.paddingLeft+i.paddingRight,y=i.paddingTop+i.paddingBottom,b=i.marginLeft+i.marginRight,w=i.marginTop+i.marginBottom,E=i.borderLeftWidth+i.borderRightWidth,S=i.borderTopWidth+i.borderBottomWidth,x=l&&a,T=t(r.width);T!==!1&&(i.width=T+(x?0:g+E));var N=t(r.height);return N!==!1&&(i.height=N+(x?0:y+S)),i.innerWidth=i.width-(g+E),i.innerHeight=i.height-(y+S),i.outerWidth=i.width+b,i.outerHeight=i.height+w,i}}function u(e,t){if(i||-1===t.indexOf("%"))return t;var n=e.style,r=n.left,s=e.runtimeStyle,o=s&&s.left;return o&&(s.left=e.currentStyle.left),n.left=t,t=n.pixelLeft,n.left=r,o&&(s.left=o),t}var a,f=e("boxSizing");return function(){if(f){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[f]="border-box";var n=document.body||document.documentElement;n.appendChild(e);var r=s(e);a=200===t(r.width),n.removeChild(e)}}(),r}var i=e.getComputedStyle,s=i?function(e){return i(e,null)}:function(e){return e.currentStyle},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],r):"object"==typeof exports?module.exports=r(require("get-style-property")):e.getSize=r(e.getStyleProperty)}(window),function(e,t){function n(e,t){return e[u](t)}function r(e){if(!e.parentNode){var t=document.createDocumentFragment();t.appendChild(e)}}function i(e,t){r(e);for(var n=e.parentNode.querySelectorAll(t),i=0,s=n.length;s>i;i++)if(n[i]===e)return!0;return!1}function s(e,t){return r(e),n(e,t)}var o,u=function(){if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],n=0,r=e.length;r>n;n++){var i=e[n],s=i+"MatchesSelector";if(t[s])return s}}();if(u){var a=document.createElement("div"),f=n(a,"div");o=f?n:s}else o=i;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return o}):window.matchesSelector=o}(this,Element.prototype),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){for(var t in e)return!1;return t=null,!0}function r(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function i(e,i,s){function u(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var a=s("transition"),f=s("transform"),l=a&&f,c=!!s("perspective"),h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[a],p=["transform","transition","transitionDuration","transitionProperty"],d=function(){for(var e={},t=0,n=p.length;n>t;t++){var r=p[t],i=s(r);i&&i!==r&&(e[r]=i)}return e}();t(u.prototype,e.prototype),u.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},u.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},u.prototype.getSize=function(){this.size=i(this.element)},u.prototype.css=function(e){var t=this.element.style;for(var n in e){var r=d[n]||n;t[r]=e[n]}},u.prototype.getPosition=function(){var e=o(this.element),t=this.layout.options,n=t.isOriginLeft,r=t.isOriginTop,i=parseInt(e[n?"left":"right"],10),s=parseInt(e[r?"top":"bottom"],10);i=isNaN(i)?0:i,s=isNaN(s)?0:s;var u=this.layout.size;i-=n?u.paddingLeft:u.paddingRight,s-=r?u.paddingTop:u.paddingBottom,this.position.x=i,this.position.y=s},u.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,n={};t.isOriginLeft?(n.left=this.position.x+e.paddingLeft+"px",n.right=""):(n.right=this.position.x+e.paddingRight+"px",n.left=""),t.isOriginTop?(n.top=this.position.y+e.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+e.paddingBottom+"px",n.top=""),this.css(n),this.emitEvent("layout",[this])};var v=c?function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"}:function(e,t){return"translate("+e+"px, "+t+"px)"};u.prototype._transitionTo=function(e,t){this.getPosition();var n=this.position.x,r=this.position.y,i=parseInt(e,10),s=parseInt(t,10),o=i===this.position.x&&s===this.position.y;if(this.setPosition(e,t),o&&!this.isTransitioning)return this.layoutPosition(),void 0;var u=e-n,a=t-r,f={},l=this.layout.options;u=l.isOriginLeft?u:-u,a=l.isOriginTop?a:-a,f.transform=v(u,a),this.transition({to:f,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},u.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},u.prototype.moveTo=l?u.prototype._transitionTo:u.prototype.goTo,u.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},u.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},u.prototype._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(e),void 0;var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);if(e.from){this.css(e.from);var r=this.element.offsetHeight;r=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var m=f&&r(f)+",opacity";u.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:m,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(h,this,!1))},u.prototype.transition=u.prototype[a?"_transition":"_nonTransition"],u.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},u.prototype.onotransitionend=function(e){this.ontransitionend(e)};var g={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};u.prototype.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,r=g[e.propertyName]||e.propertyName;if(delete t.ingProperties[r],n(t.ingProperties)&&this.disableTransition(),r in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[r]),r in t.onEnd){var i=t.onEnd[r];i.call(this),delete t.onEnd[r]}this.emitEvent("transitionEnd",[this])}},u.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(h,this,!1),this.isTransitioning=!1},u.prototype._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var y={transitionProperty:"",transitionDuration:""};return u.prototype.removeTransitionStyles=function(){this.css(y)},u.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},u.prototype.remove=function(){if(!a||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var e=this;this.on("transitionEnd",function(){return e.removeElem(),!0}),this.hide()},u.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options;this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0})},u.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options;this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},u.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},u}var s=e.getComputedStyle,o=s?function(e){return s(e,null)}:function(e){return e.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],i):(e.Outlayer={},e.Outlayer.Item=i(e.EventEmitter,e.getSize,e.getStyleProperty))}(window),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){return"[object Array]"===c.call(e)}function r(e){var t=[];if(n(e))t=e;else if(e&&"number"==typeof e.length)for(var r=0,i=e.length;i>r;r++)t.push(e[r]);else t.push(e);return t}function i(e,t){var n=p(t,e);-1!==n&&t.splice(n,1)}function s(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()}function o(n,o,c,p,d,v){function m(e,n){if("string"==typeof e&&(e=u.querySelector(e)),!e||!h(e))return a&&a.error("Bad "+this.constructor.namespace+" element: "+e),void 0;this.element=e,this.options=t({},this.constructor.defaults),this.option(n);var r=++g;this.element.outlayerGUID=r,y[r]=this,this._create(),this.options.isInitLayout&&this.layout()}var g=0,y={};return m.namespace="outlayer",m.Item=v,m.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},t(m.prototype,c.prototype),m.prototype.option=function(e){t(this.options,e)},m.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),t(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},m.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},m.prototype._itemize=function(e){for(var t=this._filterFindItemElements(e),n=this.constructor.Item,r=[],i=0,s=t.length;s>i;i++){var o=t[i],u=new n(o,this);r.push(u)}return r},m.prototype._filterFindItemElements=function(e){e=r(e);for(var t=this.options.itemSelector,n=[],i=0,s=e.length;s>i;i++){var o=e[i];if(h(o))if(t){d(o,t)&&n.push(o);for(var u=o.querySelectorAll(t),a=0,f=u.length;f>a;a++)n.push(u[a])}else n.push(o)}return n},m.prototype.getItemElements=function(){for(var e=[],t=0,n=this.items.length;n>t;t++)e.push(this.items[t].element);return e},m.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},m.prototype._init=m.prototype.layout,m.prototype._resetLayout=function(){this.getSize()},m.prototype.getSize=function(){this.size=p(this.element)},m.prototype._getMeasurement=function(e,t){var n,r=this.options[e];r?("string"==typeof r?n=this.element.querySelector(r):h(r)&&(n=r),this[e]=n?p(n)[t]:r):this[e]=0},m.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},m.prototype._getItemsForLayout=function(e){for(var t=[],n=0,r=e.length;r>n;n++){var i=e[n];i.isIgnored||t.push(i)}return t},m.prototype._layoutItems=function(e,t){function n(){r.emitEvent("layoutComplete",[r,e])}var r=this;if(!e||!e.length)return n(),void 0;this._itemsOn(e,"layout",n);for(var i=[],s=0,o=e.length;o>s;s++){var u=e[s],a=this._getItemLayoutPosition(u);a.item=u,a.isInstant=t||u.isLayoutInstant,i.push(a)}this._processLayoutQueue(i)},m.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},m.prototype._processLayoutQueue=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];this._positionItem(r.item,r.x,r.y,r.isInstant)}},m.prototype._positionItem=function(e,t,n,r){r?e.goTo(t,n):e.moveTo(t,n)},m.prototype._postLayout=function(){this.resizeContainer()},m.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},m.prototype._getContainerSize=l,m.prototype._setContainerMeasure=function(e,t){if(void 0!==e){var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},m.prototype._itemsOn=function(e,t,n){function r(){return i++,i===s&&n.call(o),!0}for(var i=0,s=e.length,o=this,u=0,a=e.length;a>u;u++){var f=e[u];f.on(t,r)}},m.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},m.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},m.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,n=e.length;n>t;t++){var r=e[t];this.ignore(r)}}},m.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,n=e.length;n>t;t++){var r=e[t];i(r,this.stamps),this.unignore(r)}},m.prototype._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=r(e)):void 0},m.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;t>e;e++){var n=this.stamps[e];this._manageStamp(n)}}},m.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},m.prototype._manageStamp=l,m.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,r=p(e),i={left:t.left-n.left-r.marginLeft,top:t.top-n.top-r.marginTop,right:n.right-t.right-r.marginRight,bottom:n.bottom-t.bottom-r.marginBottom};return i},m.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},m.prototype.bindResize=function(){this.isResizeBound||(n.bind(e,"resize",this),this.isResizeBound=!0)},m.prototype.unbindResize=function(){this.isResizeBound&&n.unbind(e,"resize",this),this.isResizeBound=!1},m.prototype.onresize=function(){function e(){t.resize(),delete t.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(e,100)},m.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},m.prototype.needsResizeLayout=function(){var e=p(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},m.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},m.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},m.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)}},m.prototype.reveal=function(e){var t=e&&e.length;if(t)for(var n=0;t>n;n++){var r=e[n];r.reveal()}},m.prototype.hide=function(e){var t=e&&e.length;if(t)for(var n=0;t>n;n++){var r=e[n];r.hide()}},m.prototype.getItem=function(e){for(var t=0,n=this.items.length;n>t;t++){var r=this.items[t];if(r.element===e)return r}},m.prototype.getItems=function(e){if(e&&e.length){for(var t=[],n=0,r=e.length;r>n;n++){var i=e[n],s=this.getItem(i);s&&t.push(s)}return t}},m.prototype.remove=function(e){e=r(e);var t=this.getItems(e);if(t&&t.length){this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])});for(var n=0,s=t.length;s>n;n++){var o=t[n];o.remove(),i(o,this.items)}}},m.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,n=this.items.length;n>t;t++){var r=this.items[t];r.destroy()}this.unbindResize(),delete this.element.outlayerGUID,f&&f.removeData(this.element,this.constructor.namespace)},m.data=function(e){var t=e&&e.outlayerGUID;return t&&y[t]},m.create=function(e,n){function r(){m.apply(this,arguments)}return Object.create?r.prototype=Object.create(m.prototype):t(r.prototype,m.prototype),r.prototype.constructor=r,r.defaults=t({},m.defaults),t(r.defaults,n),r.prototype.settings={},r.namespace=e,r.data=m.data,r.Item=function(){v.apply(this,arguments)},r.Item.prototype=new v,o(function(){for(var t=s(e),n=u.querySelectorAll(".js-"+t),i="data-"+t+"-options",o=0,l=n.length;l>o;o++){var c,h=n[o],p=h.getAttribute(i);try{c=p&&JSON.parse(p)}catch(d){a&&a.error("Error parsing "+i+" on "+h.nodeName.toLowerCase()+(h.id?"#"+h.id:"")+": "+d);continue}var v=new r(h,c);f&&f.data(h,e,v)}}),f&&f.bridget&&f.bridget(e,r),r},m.Item=v,m}var u=e.document,a=e.console,f=e.jQuery,l=function(){},c=Object.prototype.toString,h="object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},p=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],o):e.Outlayer=o(e.eventie,e.docReady,e.EventEmitter,e.getSize,e.matchesSelector,e.Outlayer.Item)}(window),function(e){function t(e){function t(){e.Item.apply(this,arguments)}return t.prototype=new e.Item,t.prototype._create=function(){this.id=this.layout.itemGUID++,e.Item.prototype._create.call(this),this.sortData={}},t.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var e=this.layout.options.getSortData,t=this.layout._sorters;for(var n in e){var r=t[n];this.sortData[n]=r(this.element,this)}}},t}"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],t):(e.Isotope=e.Isotope||{},e.Isotope.Item=t(e.Outlayer))}(window),function(e){function t(e,t){function n(e){this.isotope=e,e&&(this.options=e.options[this.namespace],this.element=e.element,this.items=e.filteredItems,this.size=e.size)}return function(){function e(e){return function(){return t.prototype[e].apply(this.isotope,arguments)}}for(var r=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],s=0,o=r.length;o>s;s++){var u=r[s];n.prototype[u]=e(u)}}(),n.prototype.needsVerticalResizeLayout=function(){var t=e(this.isotope.element),n=this.isotope.size&&t;return n&&t.innerHeight!==this.isotope.size.innerHeight},n.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},n.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},n.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},n.prototype.getSegmentSize=function(e,t){var n=e+t,r="outer"+t;if(this._getMeasurement(n,r),!this[n]){var i=this.getFirstItemSize();this[n]=i&&i[r]||this.isotope.size["inner"+t]}},n.prototype.getFirstItemSize=function(){var t=this.isotope.filteredItems[0];return t&&t.element&&e(t.element)},n.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},n.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},n.modes={},n.create=function(e,t){function r(){n.apply(this,arguments)}return r.prototype=new n,t&&(r.options=t),r.prototype.namespace=e,n.modes[e]=r,r},n}"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],t):(e.Isotope=e.Isotope||{},e.Isotope.LayoutMode=t(e.getSize,e.Outlayer))}(window),function(e){function t(e,t){var r=e.create("masonry");return r.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var e=this.cols;for(this.colYs=[];e--;)this.colYs.push(0);this.maxY=0},r.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],n=e&&e.element;this.columnWidth=n&&t(n).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},r.prototype.getContainerWidth=function(){var e=this.options.isFitWidth?this.element.parentNode:this.element,n=t(e);this.containerWidth=n&&n.innerWidth},r.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,r=t&&1>t?"round":"ceil",s=Math[r](e.size.outerWidth/this.columnWidth);s=Math.min(s,this.cols);for(var o=this._getColGroup(s),u=Math.min.apply(Math,o),a=n(o,u),f={x:this.columnWidth*a,y:u},l=u+e.size.outerHeight,c=this.cols+1-o.length,h=0;c>h;h++)this.colYs[a+h]=l;return f},r.prototype._getColGroup=function(e){if(2>e)return this.colYs;for(var t=[],n=this.cols+1-e,r=0;n>r;r++){var i=this.colYs.slice(r,r+e);t[r]=Math.max.apply(Math,i)}return t},r.prototype._manageStamp=function(e){var n=t(e),r=this._getElementOffset(e),i=this.options.isOriginLeft?r.left:r.right,s=i+n.outerWidth,o=Math.floor(i/this.columnWidth);o=Math.max(0,o);var u=Math.floor(s/this.columnWidth);u-=s%this.columnWidth?0:1,u=Math.min(this.cols-1,u);for(var a=(this.options.isOriginTop?r.top:r.bottom)+n.outerHeight,f=o;u>=f;f++)this.colYs[f]=Math.max(a,this.colYs[f])},r.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this.options.isFitWidth&&(e.width=this._getContainerFitWidth()),e},r.prototype._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},r.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!==this.containerWidth},r}var n=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++){var i=e[n];if(i===t)return n}return-1};"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],t):e.Masonry=t(e.Outlayer,e.getSize)}(window),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,n){var r=e.create("masonry"),i=r.prototype._getElementOffset,s=r.prototype.layout,o=r.prototype._getMeasurement;t(r.prototype,n.prototype),r.prototype._getElementOffset=i,r.prototype.layout=s,r.prototype._getMeasurement=o;var u=r.prototype.measureColumns;r.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,u.call(this)};var a=r.prototype._manageStamp;return r.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,a.apply(this,arguments)},r}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],n):n(e.Isotope.LayoutMode,e.Masonry)}(window),function(e){function t(e){var t=e.create("fitRows");return t.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0},t.prototype._getItemLayoutPosition=function(e){e.getSize(),0!==this.x&&e.size.outerWidth+this.x>this.isotope.size.innerWidth&&(this.x=0,this.y=this.maxY);var t={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+e.size.outerHeight),this.x+=e.size.outerWidth,t},t.prototype._getContainerSize=function(){return{height:this.maxY}},t}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],t):t(e.Isotope.LayoutMode)}(window),function(e){function t(e){var t=e.create("vertical",{horizontalAlignment:0});return t.prototype._resetLayout=function(){this.y=0},t.prototype._getItemLayoutPosition=function(e){e.getSize();var t=(this.isotope.size.innerWidth-e.size.outerWidth)*this.options.horizontalAlignment,n=this.y;return this.y+=e.size.outerHeight,{x:t,y:n}},t.prototype._getContainerSize=function(){return{height:this.y}},t}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],t):t(e.Isotope.LayoutMode)}(window),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){return"[object Array]"===l.call(e)}function r(e){var t=[];if(n(e))t=e;else if(e&&"number"==typeof e.length)for(var r=0,i=e.length;i>r;r++)t.push(e[r]);else t.push(e);return t}function i(e,t){var n=c(t,e);-1!==n&&t.splice(n,1)}function s(e,n,s,a,l){function c(e,t){return function(n,r){for(var i=0,s=e.length;s>i;i++){var o=e[i],u=n.sortData[o],a=r.sortData[o];if(u>a||a>u){var f=void 0!==t[o]?t[o]:t,l=f?1:-1;return(u>a?1:-1)*l}}return 0}}var h=e.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});h.Item=a,h.LayoutMode=l,h.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),e.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var t in l.modes)this._initLayoutMode(t)},h.prototype.reloadItems=function(){this.itemGUID=0,e.prototype.reloadItems.call(this)},h.prototype._itemize=function(){for(var t=e.prototype._itemize.apply(this,arguments),n=0,r=t.length;r>n;n++){var i=t[n];i.id=this.itemGUID++}return this._updateItemsSortData(t),t},h.prototype._initLayoutMode=function(e){var n=l.modes[e],r=this.options[e]||{};this.options[e]=n.options?t(n.options,r):r,this.modes[e]=new n(this)},h.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?(this.arrange(),void 0):(this._layout(),void 0)},h.prototype._layout=function(){var e=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,e),this._isLayoutInited=!0},h.prototype.arrange=function(e){this.option(e),this._getIsInstant(),this.filteredItems=this._filter(this.items),this._sort(),this._layout()},h.prototype._init=h.prototype.arrange,h.prototype._getIsInstant=function(){var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=e,e},h.prototype._filter=function(e){function t(){c.reveal(i),c.hide(s)}var n=this.options.filter;n=n||"*";for(var r=[],i=[],s=[],o=this._getFilterTest(n),u=0,a=e.length;a>u;u++){var f=e[u];if(!f.isIgnored){var l=o(f);l&&r.push(f),l&&f.isHidden?i.push(f):l||f.isHidden||s.push(f)}}var c=this;return this._isInstant?this._noTransition(t):t(),r},h.prototype._getFilterTest=function(e){return o&&this.options.isJQueryFiltering?function(t){return o(t.element).is(e)}:"function"==typeof e?function(t){return e(t.element)}:function(t){return s(t.element,e)}},h.prototype.updateSortData=function(e){this._getSorters(),e=r(e);var t=this.getItems(e);t=t.length?t:this.items,this._updateItemsSortData(t)},h.prototype._getSorters=function(){var e=this.options.getSortData;for(var t in e){var n=e[t];this._sorters[t]=d(n)}},h.prototype._updateItemsSortData=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];r.updateSortData()}};var d=function(){function e(e){if("string"!=typeof e)return e;var n=u(e).split(" "),r=n[0],i=r.match(/^\[(.+)\]$/),s=i&&i[1],o=t(s,r),a=h.sortDataParsers[n[1]];return e=a?function(e){return e&&a(o(e))}:function(e){return e&&o(e)}}function t(e,t){var n;return n=e?function(t){return t.getAttribute(e)}:function(e){var n=e.querySelector(t);return n&&f(n)}}return e}();h.sortDataParsers={parseInt:function(e){return parseInt(e,10)},parseFloat:function(e){return parseFloat(e)}},h.prototype._sort=function(){var e=this.options.sortBy;if(e){var t=[].concat.apply(e,this.sortHistory),n=c(t,this.options.sortAscending);this.filteredItems.sort(n),e!==this.sortHistory[0]&&this.sortHistory.unshift(e)}},h.prototype._mode=function(){var e=this.options.layoutMode,t=this.modes[e];if(!t)throw Error("No layout mode: "+e);return t.options=this.options[e],t},h.prototype._resetLayout=function(){e.prototype._resetLayout.call(this),this._mode()._resetLayout()},h.prototype._getItemLayoutPosition=function(e){return this._mode()._getItemLayoutPosition(e)},h.prototype._manageStamp=function(e){this._mode()._manageStamp(e)},h.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},h.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},h.prototype.appended=function(e){var t=this.addItems(e);if(t.length){var n=this._filterRevealAdded(t);this.filteredItems=this.filteredItems.concat(n)}},h.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps();var r=this._filterRevealAdded(t);this.layoutItems(n),this.filteredItems=r.concat(this.filteredItems)}},h.prototype._filterRevealAdded=function(e){var t=this._noTransition(function(){return this._filter(e)});return this.layoutItems(t,!0),this.reveal(t),e},h.prototype.insert=function(e){var t=this.addItems(e);if(t.length){var n,r,i=t.length;for(n=0;i>n;n++)r=t[n],this.element.appendChild(r.element);var s=this._filter(t);for(this._noTransition(function(){this.hide(s)}),n=0;i>n;n++)t[n].isLayoutInstant=!0;for(this.arrange(),n=0;i>n;n++)delete t[n].isLayoutInstant;this.reveal(s)}};var v=h.prototype.remove;return h.prototype.remove=function(e){e=r(e);var t=this.getItems(e);if(v.call(this,e),t&&t.length)for(var n=0,s=t.length;s>n;n++){var o=t[n];i(o,this.filteredItems)}},h.prototype._noTransition=function(e){var t=this.options.transitionDuration;this.options.transitionDuration=0;var n=e.call(this);return this.options.transitionDuration=t,n},h}var o=e.jQuery,u=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s+|\s+$/g,"")},a=document.documentElement,f=a.textContent?function(e){return e.textContent}:function(e){return e.innerText},l=Object.prototype.toString,c=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1};"function"==typeof define&&define.amd?define("isotope",["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],s):e.Isotope=s(e.Outlayer,e.getSize,e.matchesSelector,e.Isotope.Item,e.Isotope.LayoutMode)}(window),function(e){e.fn.isotopeStick=function(t){var n=e.extend({},e.fn.isotopeStick.defaults,t,e.fn.isotopeStick.prior);this.each(function(){var t=e(this),r=t.children(),i=-1,s=function(e){var t=e.width(),n=e.parent().width();e.css({"margin-left":(n-t)/2})},o=function(){return-1==i&&(i=r.first().outerWidth(!0),r.each(function(t){var n=e(this).outerWidth(!0);n<i&&(i=n)}),i=parseFloat(i)),i},u=function(){return parseFloat(t.width())},a=function(){return Math.floor(u()/o()-1)},f=function(){var t=parseInt(r.eq(0).css("margin-left"));return r.each(function(){parseInt(e(this).css("top"))==0&&(t+=e(this).outerWidth(!0))}),t},l=!0,c=function(){var e=a();for(var n=0,i=0;n<r.length;n++)n<e&&r.eq(n).outerWidth(!0)>o()&&e--,e==n&&i++,r.eq(n).attr("data-pos",n+i);var s=t.find('[data-pos="'+(e+1)+'"]'),f=s.outerWidth(!0);s.length>0&&f>o()&&u()>f*2&&(e++,t.find('[data-pos="'+(e+1)+'"]').attr("data-pos",e-1)),l&&(e++,l=!1),t.find('[data-align="right-top"]').attr("data-pos",e)},h=function(){n.isSetWidth&&t.css("width",""),n.isSetParentWidth&&t.parent().css("width",""),c(),t.isotope("updateSortData").isotope(),t.isotope({sortBy:"pos"})};c(),t.isotope(n),n.isSetWidth&&(t.css("width",f()),t.isotope("on","layoutComplete",function(){t.css("width",f())})),n.isSetParentWidth&&(t.parent().css("width",f()),n.isMarginParentCenter&&s(t.parent()),t.isotope("on","layoutComplete",function(){t.parent().css("width",f()),n.isMarginParentCenter&&s(t.parent())})),e(window).resize(h),e(document).ready(h)})},e.fn.isotopeStick.defaults={isSetWidth:!1,isSetParentWidth:!1,isMarginParentCenter:!1},e.fn.isotopeStick.prior={getSortData:{pos:"[data-pos] parseInt"},sortBy:"pos"}}(jQuery),define("isotope.stick",function(){}),define("blocks/journal/__item/journal__item",["require","jquery","underscore","backbone","marionette","models/article/article"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("models/article/article"),o=r.Marionette.View.extend({defaultOptions:{isRendered:!0},ui:{title:".journal__item__title",label:".label_new",like:".button_like"},events:{"click .button_like":"like"},initialize:function(e){var n=t.extend({},this.defaultOptions,e);n.isRendered&&(this.bindUIElements(),this.getModelFromElement())},getModelFromElement:function(){var e=new s;e.set({id:this.$el.data("id"),isLiked:this.ui.like.hasClass("button_like_active")}),this.model=e},like:function(){this.model.get("isLiked")?(this.model.dislike(),this.ui.like.removeClass("button_like_active")):(this.model.like(),this.ui.like.addClass("button_like_active"))}});return o}),define("blocks/journal/__item/_switcher/journal__item_switcher",["require","jquery","underscore","backbone","marionette"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=r.Marionette.View.extend({ui:{button1:".journal__item_switcher__b1",button2:".journal__item_switcher__b2",set1:".journal__item_switcher__s1",set2:".journal__item_switcher__s2"},events:{"click .journal__item_switcher__b1":"toggle","click .journal__item_switcher__b2":"toggle"},initialize:function(e){this.bindUIElements()},toggle:function(){this.ui.button1.hasClass("button_news_active")?(this.ui.button1.removeClass("button_news_active"),this.ui.button2.addClass("button_news_active"),this.ui.set1.hide(),this.ui.set2.show()):(this.ui.button2.removeClass("button_news_active"),this.ui.button1.addClass("button_news_active"),this.ui.set2.hide(),this.ui.set1.show())}});return s}),define("blocks/journal/__item/_image/journal__item_image",["require","jquery","underscore","backbone","marionette"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=r.Marionette.View.extend({events:{"click .photo-popup-link":"open"},open:function(e){var n=t(e.currentTarget),r=n.attr("href");return location.href=/^[^#]+/.exec(location.href)[0]+"#"+r.substr(1),e.stopPropagation(),!1}});return s}),define("blocks/journal/__item/_category/journal__item_category",["require","jquery","underscore","backbone","marionette"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=r.Marionette.View.extend({duration:300,moreHeight:0,ui:{moreButton:".list_category__more",lessButton:".list_category__turn",moreSet:".list_pull-down"},events:{"click .list_category__more":"more","click .list_category__turn":"less"},initialize:function(){this.bindUIElements(),this.moreHeight=this.ui.moreSet.height()-16},more:function(){var e=this;this.ui.moreButton.hide(),this.ui.moreSet.css({height:0,display:"block"}),this.ui.moreSet.animate({height:this.moreHeight+this.ui.moreButton.height()/2},{duration:this.duration}),this.ui.lessButton.show()},less:function(){var e=this;this.ui.lessButton.hide(),this.ui.moreSet.animate({height:0},{complete:function(){e.ui.moreSet.css({display:"none",height:e.moreHeight})},duration:this.duration}),this.ui.moreButton.show()}});return s}),function(e){function n(){}function r(e){function r(t){if(t.prototype.option)return;t.prototype.option=function(t){if(!e.isPlainObject(t))return;this.options=e.extend(!0,this.options,t)}}function s(n,r){e.fn[n]=function(s){if(typeof s=="string"){var o=t.call(arguments,1);for(var u=0,a=this.length;u<a;u++){var f=this[u],l=e.data(f,n);if(!l){i("cannot call methods on "+n+" prior to initialization; "+"attempted to call '"+s+"'");continue}if(!e.isFunction(l[s])||s.charAt(0)==="_"){i("no such method '"+s+"' for "+n+" instance");continue}var c=l[s].apply(l,o);if(c!==undefined)return c}return this}return this.each(function(){var t=e.data(this,n);t?(t.option(s),t._init()):(t=new r(this,s),e.data(this,n,t))})}}if(!e)return;var i=typeof console=="undefined"?n:function(e){console.error(e)};return e.bridget=function(e,t){r(t),s(e,t)},e.bridget}var t=Array.prototype.slice;typeof define=="function"&&define.amd?define("jqueryplugins/jquery.bridget",["jquery"],r):r(e.jQuery)}(window),function(e){typeof define=="function"&&define.amd?define("cookie",["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(s!==undefined&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setTime(+l+f*864e5)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t&&t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t)===undefined?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),define("blocks/journal/journal",["require","jquery","underscore","backbone","marionette","isotope","isotope.stick","block!journal/__item","block!journal/__item/_switcher","block!journal/__item/_image","block!journal/__item/_category","jqueryplugins/jquery.bridget","cookie"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("isotope"),o=e("isotope.stick"),u=e("block!journal/__item"),a=e("block!journal/__item/_switcher"),f=e("block!journal/__item/_image"),l=e("block!journal/__item/_category");e("jqueryplugins/jquery.bridget"),e("cookie"),t.bridget("isotope",s);var c=r.Marionette.View.extend({ui:{list:".list",articleItems:".journal__item:not(.journal__item_category, .banner_thin-border, .banner_thick-border, .journal__item banner_width25)",switcherItems:".journal__item_switcher",imageItems:".journal__item_image",categoryItems:".journal__item_category"},render:function(){var e=this;this.bindUIElements();if(this.ui.articleItems.length<1)return!1;var n=t.cookie("journal-margin-left");return n&&t(this.ui.list).parent().css("margin-left",n),this.ui.list.removeClass("list_loading"),t(this.ui.list).isotopeStick({doubleWidthSelector:".content__item_width50",isSetParentWidth:!0,isMarginParentCenter:!0}),t(this.ui.list).isotope("on","layoutComplete",function(){e.trigger("layoutComplete")}),t(document).ready(function(){t(e.ui.list).isotope("arrange")}),this.ui.articleItems.each(function(){var e=new u({el:this})}),this.ui.switcherItems.each(function(){var e=new a({el:this})}),this.ui.imageItems.each(function(){var e=new f({el:this})}),this.ui.categoryItems.each(function(){var e=new l({el:this})}),this.on("layoutComplete",function(){t.cookie("journal-margin-left",this.ui.list.parent().css("margin-left"))}),!0}});return c}),define("modules/main",["require","jquery","underscore","backbone","marionette","block!journal"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("marionette"),s=e("block!journal");return function(e,t){this.addInitializer(function(){var e=new s({el:t.ContentRegion.el});t.ContentRegion.currentView=e;if(!e.render())var n=setInterval(function(){e.render()&&clearInterval(n)},100)})}}),require.config({baseUrl:"js",paths:{order:"libs/require/order",text:"libs/require/text",json:"libs/require/json",css:"libs/require/css.min",block:"libs/require/block",textblock:"libs/require/textblock",blocks:"../blocks",jqueryplugins:"libs/jquery/plugins/",jquery:"libs/jquery/jquery-1.10.2",backbone:"libs/backbone/backbone-min","backbone.history.extend":"libs/backbone/backbone.history.extend","backbone.view.xevent":"libs/backbone/backbone.view.xevent",marionette:"libs/marionette/backbone.marionette","backbone.wreqr":"libs/marionette/backbone.wreqr","backbone.babysitter":"libs/marionette/backbone.babysitter",underscore:"libs/backbone/underscore-min",html5shiv:"libs/html5shiv/html5shiv","respond.js":"libs/respond.js/respond.min",json2:"libs/json2/json2",cookie:"libs/jquery/plugins/cookie.jquery",coodrinates:"libs/jquery/plugins/coordinates.jquery","jquery-ui":"libs/jquery/jquery-ui/js/jquery-ui-1.10.4.custom.min",dropzone:"libs/dropzone/dropzone-amd-module",noty:"libs/jquery/plugins/noty/",emessage:"libs/jquery/plugins/emessage.jquery",velocity:"libs/jquery/plugins/velocity/jquery.velocity.min",nprogress:"libs/nprogress/nprogress","isotope.stick":"libs/isotope/isotope.stick.ext",isotope:"libs/isotope/isotope.pkgd.min",jscrollpane:"libs/jscrollpane/jquery.jscrollpane.min",mousewheel:"libs/jscrollpane/jquery.mousewheel",formstyler:"libs/formstyler/jquery.formstyler.min",pluso:"libs/pluso/pluso",config:"generated/config.json",smilesList:"generated/smiles.json"},map:{"*":{css:"libs/require/css.min"}},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},cookie:{deps:["jquery"]},coodrinates:{deps:["jquery"]},"jquery-ui":{deps:["jquery"]},emessage:{deps:["jquery"]},"libs/isotope/isotope.stick.ext":{deps:["jquery","libs/isotope/isotope.pkgd.min"]},noty:{deps:["jquery"]},jscrollpane:{deps:["jquery","mousewheel"]},mousewheel:{deps:["jquery"]},formstyler:{deps:["jquery"]}}}),require(["underscore","backbone","marionette","json!config","modules/global","modules/main","models/user","cookie","pluso"],function(e,t,n,r,i,s,o){var u=new t.Marionette.Application;window.App=u,u.addRegions({HeaderRegion:"#header",SlideshowRegion:"#slideshow",ContentRegion:"#content",FooterRegion:"#footer",CommentsRegion:".comments"}),u.config=r,u.module("GlobalModule",{startWithParent:!0,define:i}),u.module("MainModule",{startWithParent:!1,define:s}),u.vent.on("routing:started",function(){t.history.start()}),u.addInitializer(function(){return u.vent.trigger("routing:started")});var a=document.createEvent("Event");a.initEvent("regirested",!0,!0),document.dispatchEvent(a),$.cookie("currentUserData",JSON.stringify({id:1,nickname:"Popov",group:{isCanDeleteOwnChatMessages:!0}}));var f=$.cookie("currentUserData"),l=new o(e.isUndefined(f)?{}:JSON.parse(f));u.currentUser=l,u.navigate=function(n,r){e.isUndefined(r)&&(r={trigger:!0}),t.history.navigate(n,r)},u.start()}),define("app",function(){});